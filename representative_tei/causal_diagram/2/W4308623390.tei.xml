<?xml version="1.0" encoding="UTF-8"?>
<TEI xml:space="preserve" xmlns="http://www.tei-c.org/ns/1.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.tei-c.org/ns/1.0 https://raw.githubusercontent.com/kermitt2/grobid/master/grobid-home/schemas/xsd/Grobid.xsd"
 xmlns:xlink="http://www.w3.org/1999/xlink">
	<teiHeader xml:lang="en">
		<fileDesc>
			<titleStmt>
				<title level="a" type="main">Reliable Counterparts: Efficiently Testing Causal Relationships in Digital Twins</title>
			</titleStmt>
			<publicationStmt>
				<publisher/>
				<availability status="unknown"><licence/></availability>
			</publicationStmt>
			<sourceDesc>
				<biblStruct>
					<analytic>
						<author role="corresp">
							<persName><forename type="first">Richard</forename><forename type="middle">J</forename><surname>Somers</surname></persName>
							<email>rsomers1@sheffield.ac.uk</email>
						</author>
						<author>
							<persName><forename type="first">Andrew</forename><forename type="middle">G</forename><surname>Clark</surname></persName>
						</author>
						<author>
							<persName><forename type="first">Neil</forename><surname>Walkinshaw</surname></persName>
						</author>
						<author>
							<persName><forename type="first">Robert</forename><forename type="middle">M</forename><surname>Hierons</surname></persName>
						</author>
						<author>
							<persName><forename type="first">Robert</forename><forename type="middle">M</forename><surname>Hi</surname></persName>
						</author>
						<author>
							<affiliation key="aff0">
								<orgName type="institution">University of Sheffield Sheffield</orgName>
								<address>
									<country key="GB">United Kingdom</country>
								</address>
							</affiliation>
						</author>
						<author>
							<affiliation key="aff1">
								<orgName type="institution">University of Sheffield Sheffield</orgName>
								<address>
									<country key="GB">United Kingdom</country>
								</address>
							</affiliation>
						</author>
						<author>
							<affiliation key="aff2">
								<orgName type="institution">University of Sheffield Sheffield</orgName>
								<address>
									<country key="GB">United Kingdom</country>
								</address>
							</affiliation>
						</author>
						<author>
							<affiliation key="aff3">
								<orgName type="institution">University of Sheffield Sheffield</orgName>
								<address>
									<settlement>New York</settlement>
									<region>NY</region>
									<country>United Kingdom USA</country>
								</address>
							</affiliation>
						</author>
						<title level="a" type="main">Reliable Counterparts: Efficiently Testing Causal Relationships in Digital Twins</title>
					</analytic>
					<monogr>
						<imprint>
							<date/>
						</imprint>
					</monogr>
					<idno type="DOI">10.1145/nnnnnnn.nnnnnnn</idno>
				</biblStruct>
			</sourceDesc>
		</fileDesc>
		<encodingDesc>
			<appInfo>
				<application version="0.8.1" ident="GROBID" when="2025-10-14T19:35+0000">
					<desc>GROBID - A machine learning software for extracting information from scholarly documents</desc>
					<ref target="https://github.com/kermitt2/grobid"/>
				</application>
			</appInfo>
		</encodingDesc>
		<profileDesc>
			<textClass>
				<keywords>
					<term>digital twin</term>
					<term>causal inference</term>
					<term>testing</term>
					<term>fault localisation</term>
					<term>cyber-physical system</term>
				</keywords>
			</textClass>
			<abstract>
<div xmlns="http://www.tei-c.org/ns/1.0"><p>The lack of testability of digital twins poses several difficulties when developing reliable systems. Intricate models complicate the definition of comprehensive testing criteria, and physical couplings make obtaining test data an arduous task. To alleviate these challenges, we explore the use of causal inference based testing and propose a technique to allow for correct behaviour of digital twins to be captured in causal diagrams, which are then tested with an efficient data set through the use of counterfactuals. We explore a motivating example of a robotic arm to show how this technique can confirm known causal relationships in a system, and even uncover a fault in the system which caused dangerous behaviour. Our technique localised this erroneous behaviour to a single causal relationship between two variables. Having shown this technique works with a case study, we explore its limitations and the challenges when approaching other industrial applications.</p></div>
			</abstract>
		</profileDesc>
	</teiHeader>
	<text xml:lang="en">
		<body>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="1">INTRODUCTION</head><p>Digital twins are an emerging technology. They use data-driven and physics-based simulation to model, communicate with and provide additional functionality to their coupled physical system <ref type="bibr" target="#b6">[7]</ref>. Digital twins rely on models to accurately represent their physical counterpart, accepting real-time data from the coupled physical system and relaying feedback to provide more informed functionality <ref type="bibr" target="#b4">[5,</ref><ref type="bibr" target="#b7">8]</ref>. These systems have recently been adopted into safety critical and human collaborative environments <ref type="bibr" target="#b5">[6,</ref><ref type="bibr" target="#b9">10]</ref>, making it essential that they have correct system behaviour.</p><p>Digital twins present a complex challenge due to their lack of testability. Coupling to physical systems as well as intricate models poses a problem to test adequacy across both the physical and virtual domains. These difficulties also provide challenges in executing the required tests due to the extensive physical setup, expensive run times, and complex internal structures <ref type="bibr" target="#b16">[17]</ref>. These aspects define digital twins as having a lack of testability <ref type="bibr" target="#b17">[18]</ref>.</p><p>Current testing solutions for digital twins exist <ref type="bibr" target="#b20">[21]</ref>, but test only the physical system using the digital twin. Testing of the digital twin itself is rarely considered, leading to these inherently complex models being less reliable in safety critical environments <ref type="bibr" target="#b16">[17]</ref>.</p><p>We propose a method that uses causal inference based testing to solve these challenges, building on previous methods <ref type="bibr" target="#b0">[1,</ref><ref type="bibr" target="#b14">15]</ref>. We address the limitations of these methods' requirements to have understandable and accessible source code by capturing domain expertise through causal graphs. As well as this, we use counterfactual test cases, which reduce the amount of test data required, making this technique better for use with physically coupled systems.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2">MOTIVATING EXAMPLE</head><p>There has been an increase in the adoption of digital twin based systems in smart manufacturing and safety-critical environments <ref type="bibr" target="#b5">[6,</ref><ref type="bibr" target="#b9">10]</ref>. It is, therefore, important that we have systematic methods for validating such systems. Incorrect or untested digital twin behaviours can lead to expensive faults in modular robotics as well as dangerous behaviour in collaborative human robot environments <ref type="bibr" target="#b5">[6]</ref>. Current testing techniques struggle due to the coupling of digital and physical spaces causing cumbersome testing requirements, making obtaining test data for these systems difficult <ref type="bibr" target="#b16">[17]</ref>.</p><p>This section outlines the case study for this paper and highlights the problems that arise when applying traditional testing techniques to digital twins. We first outline the digital twin we will be focusing on during this paper, and then explore its difficulties in testing.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.1">Digital Twin -Robotic Arm</head><p>We analysed a robotic arm model as part of a digital twin framework <ref type="bibr" target="#b4">[5]</ref> as a case study. This digital twin framework was provided by the Sheffield Advanced Manufacturing Research Centre and is used to monitor and assure the safety of real human robot collaborative environments. It allows for execution of digital twin models, coupling to physical systems and sharing data between different domains and other digital twins. The robot arm chosen for this study was the UR10 from Universal Robotics <ref type="bibr" target="#b15">[16]</ref> as it is widely used in industry and would require a complex model for the behaviour of all 6 joints. This robotic arm allowed for tools, held by the robot's end effector, to be positioned anywhere in 3d space, at any angle, requiring precise movements to achieve this.</p><p>The model of the UR10 provided in the digital twin framework is complex, with different aspects of the model running on separate services to accommodate its intricate behaviour. A position in 3d space can be given to the digital twin, which moves the arm, in virtual space, so that the tool of the end effector is positioned precisely where requested. We aim to test the model of this digital twin throughout the remainder of this paper.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.2">Testing Difficulties</head><p>It is essential for safety that we ensure reliably correct behaviour in a human robotic collaborative framework. We outline how the unintelligible models and lack of controlled data causes testing difficulties for the motivating example, with regards to the lack of testability in digital twins outlined in Section 1.</p><p>Capturing the desired behaviour of digital twins requires a modelbased representation. Current techniques rely on analysing the source code of systems to find faults <ref type="bibr" target="#b0">[1,</ref><ref type="bibr" target="#b1">2,</ref><ref type="bibr" target="#b14">15]</ref>. These approaches are not suited to digital twins as they can contain complex models, possibly running across multiples services and sometimes even in the cloud with completely inaccessible source code. This can be seen in our motivating example as the source code for the arm's path planning algorithm is inaccessible. Analysing, or even obtaining, the source code for such models becomes an impossible task, requiring a different approach to represent digital twin behaviour.</p><p>Digital twins make the gathering and controlling of data required for testing very challenging. Traditional testing approaches run the model in a variety of configurations and observe the output. Digital twins are not this simple as both the physical and virtual domains must be accounted for when testing. Extensive set up and physical execution can be required for specific test cases which take into account physical stochasticity <ref type="bibr" target="#b16">[17]</ref>. Our motivating example shares these difficulties due to its physical coupling. Therefore, we cannot rely on large data sets which contain the exact data required for desired test cases.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3">CAUSAL INFERENCE AND TESTING</head><p>Digital twins bring a number of difficulties that make the application of traditional testing techniques challenging. In this section, we explore Causal Inference and how it can help alleviate some of the issues addressed in Section 2.2. We then continue by outlining a causal testing procedure for use in the next sections.</p><p>Causal Inference (CI) is a family of methodologies that measure causal effects to make claims about causal relationships <ref type="bibr" target="#b10">[11]</ref>, such as investigating whether changing a particular line of code causes a fault <ref type="bibr" target="#b14">[15]</ref>. CI techniques, such as Causal Directed Acyclic Graphs (DAGs) and counterfactuals, allow us to address the difficulties of testing digital twins by making strong claims on causality, without access to large, specific data sets.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.1">Modelling unintelligible behaviour</head><p>CI can be used to test strong claims about causal relationships, in a way that conventional statistics cannot <ref type="bibr" target="#b12">[13]</ref>, because it is supplied with domain knowledge in the form of a causal DAG. DAGs are models that provide an intuitive graphical method for expressing the causal assumptions necessary to solve CI problems <ref type="bibr" target="#b11">[12]</ref>. Informally, a causal DAG ùê∫ = (ùëâ , ùê∏) is a directed acyclic graph comprising a set of random variables ùëâ (the nodes) and directed edges ùê∏ that capture causality, such that an edge ùëã ‚Üí ùëå denotes the assumption that changing ùëã in isolation should cause ùëå to change.</p><p>In the context of digital twins, this presents an opportunity for the developer to represent their expectations of what correct relationships should be. This provides a simple, intuitive basis for capturing the complex interactions between the variables and states of a digital twin across multiple domains.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.2">Handling small, uncontrolled data sets</head><p>A strength of CI is that DAGs can be reconciled with existing data sets to reason about causal relationships between variables. CI uses counterfactuals to reason about data which is not present in the data set <ref type="bibr" target="#b13">[14]</ref>, presenting a way in which specific data need not be obtained and allowing for smaller, less controlled data sets to be used. Such a technique allows for causal outcomes to be inferred without the need for specific executions or large data sets.</p><p>For testing digital twins, this means that test data for specific scenarios need not be present within the data set. This technique can be used to help alleviate the problem of running specific test cases as the required scenarios can be reasoned about without precise data being present, allowing existing datasets to be used.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3.3">Causal Testing</head><p>As shown above, CI makes it possible to answer causal questions from passively collected data that contains various forms of bias, such as confounding (informally, when the cause and effect share a common cause), instead of running costly experiments. In a software testing context, this has the potential to draw causal conclusions from existing test data and, therefore, predict the outcome of test cases that cannot be run <ref type="bibr" target="#b2">[3]</ref>. Such an approach would help improve the testability of software that has a vast input space and is expensive to run, such as digital twins. We outline the steps for causal testing, shown in Figure <ref type="figure" target="#fig_0">1</ref>:</p><p>(1) Generating a causal DAG: domain expertise capture the intended behaviour of the digital twin in a causal DAG. Relationships within this DAG allow for causal claims to be made about the system. Complex behaviours can be outlined using this without understanding the exact internal structure of the system. DAGs are created manually by domain experts as there is no way to do this automatically.</p><p>(2) Defining a data set: Existing data from a digital twin can be used with regards to the variables present in the causal DAG. Due to the limitations of data collection outlined in Section 2.2, a smaller data set which does not contain the exact scenarios to be tested is adequate. (3) Causal Inference: The generated DAG is used, alongside the obtained data set, to perform causal inference. Causal test cases are defined that intervene on a variable to measure the effect on another variable. The average treatment effect <ref type="bibr" target="#b8">[9]</ref> as well as the confidence intervals of this intervention can be observed. Informally, given ùëã ‚Üí ùëå , we use the causal DAG and data set to infer how an intervention to the value of ùëã would affect the value of ùëå . (4) Causal claims: The data collected from causal inference can be used to determine whether there is evidence that a causal relationship holds in the digital twin (the digital twin is behaving as expected) or if it does not hold (the digital twin is behaving unexpectedly).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4">ROBOT ARM CASE STUDY</head><p>This section follows the outlined approach in Figure <ref type="figure" target="#fig_0">1</ref>. We use a causal DAG to represent the motivating example outlined in Section 2.1. We then generate a data-set from the digital twin and use this to test causal relationships in the model. We provide two example scenarios: a scenario where we are able to confirm a known causal relationship and one where a fault is localised to another specific causal relationship. Although the digital twin has 6 joints, we simplify this case study to only observe 2 consecutive joints.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.1">Generating a Causal Diagram</head><p>A causal DAG was used to capture the assumptions of correct behaviour of the robotic arm (Figure <ref type="figure" target="#fig_0">1</ref> step 1), allowing for a representation of the arms motion. Figure <ref type="figure" target="#fig_1">2</ref> presents the initial state of the joints (joint_1_start_rot, joint_2_start_rot), the target given to the robot arm (effector_target), the desired final rotation of the joints (joint_1_end_rot, joint_2_end_rot) and the rotation of each joint half way through their motion (joint_1_mid_rot, joint_2_mid_rot). The joint rotations half way through the arm's motion were used to simply represent the path of each joint. This simplification does not capture the entire path and will be discussed in Section 5.</p><p>The causal relationships between variables in the causal DAG represent the intended behaviour of variables with respect to one another. This can be seen by the desired end rotation of the joints being causally affected by the given target position. We also assume that the path of a joint is dependent on its start and end positions as they define the beginning and end of that path.</p><p>To test the digital twin, we establish that there is an interdependency between the two joints under test. The arm's motion should be informed by the rotation of all joints throughout the motion. This ensures the behaviour is safe in a human robotic collaborative environment. Therefore, the path of a joint should depend on the initial and final states of other joints. This can be seen in Figure <ref type="figure" target="#fig_1">2</ref> by the start and desired end rotations of joint 1 affecting the rotation mid way through movement of joint 2 and vice versa. If each joint was not aware of each other joint, possibly dangerous and unexpected behaviour could occur. Interdependency, however, can cause issues in the creation of a causal DAG as it could have produced cycles in the causal relationships, which are not permitted. Causal Directed Cyclic Graphs (DCG) <ref type="bibr" target="#b21">[22]</ref> as well as equation-based techniques <ref type="bibr" target="#b3">[4]</ref> have been explored in the literature for representing more complex behaviours, such as cycles, as an alternative to causal DAGs and are further explored in Section 5.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.2">Obtaining a Data-set</head><p>A major advantage of using CI is that it is possible to test from existing data sets without running the digital twin for specific test cases (Figure <ref type="figure" target="#fig_0">1</ref> step 2). The data required for the CI data set could be found by examining the causal DAG presented in Figure <ref type="figure" target="#fig_1">2</ref>. We were able to run the digital twin model 105 times to produce a data-set which contained the required variables at the required time-steps for a variety of random start states and target positions. Although this digital twin was not connected to a physical asset, the model was only run a relatively small number of times to replicate the difficulties of generating data-sets from digital twin systems explored in Section 2.2. This small data-set meant that the exact data required for each test case would likely not be present, therefore requiring us to deal with counterfactuals. How these test cases are constructed is explored in Section 4.3.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.3">Generating Test Cases</head><p>Causal test cases present evidence of a causal relationship by inferring the effect of a given intervention (Figure <ref type="figure" target="#fig_0">1</ref> step 3). This process is further explained in part 3 of Section 3.3. Multiple test cases can be executed with different intervention values, each providing evidence toward a causal relationship between the cause and effect variables. This evidence can either support known causal relationships, inferring that this relationship in the model is acting as expected, or oppose expected causal relationships, localising errors in how the system should be behaving to that specific relationship.</p><p>Each joint of the arm stored a rotation in radians between -ùúã and ùúã. The range -2.8 to 2.8 was partitioned into intervals of 0.4  <ref type="table" target="#tab_0">1</ref>. From this, we generated test cases which explored how deviating from a rotation of 0.0 radians on a joint would affect its own and other joints' planned motion. We outline two scenarios to apply CI-based testing. Each tests a different causal relationship, highlighted in Figure <ref type="figure" target="#fig_1">2</ref>. We then use the data obtained from CI to determine whether these causal relationships hold and if the digital twin is behaving correctly.</p><p>Scenario A -Confirming that joint_1_end_rot affects joint_1_mid_rot. This scenario examines a single relationship within the causal DAG generated for the motivating example. The specified target end point, and therefore the calculated end position of a joint, should always have a causal effect on the planned route for the same joint. In this case, the middle rotation of a joint will be causally affected by its end rotation. This relationship can be seen highlighted in green in Figure <ref type="figure" target="#fig_1">2</ref>.</p><p>Scenario B -Confirming that joint_1_start_rot affects joint_2_mid_rot. This scenario explores a different relationship in the causal DAG for the motivating example. Each joint should take into account the movement of each other joint when planning the arm's movement to ensure a safe and informed movement. Therefore, a causal relationship between the start position of one joint and the planned route of another should be present for correct behaviour. This relationship can be seen highlighted in red in Figure <ref type="figure" target="#fig_1">2</ref>.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.4">Scenario Results</head><p>Table <ref type="table" target="#tab_0">1</ref> displays the results of both Scenario A and B for each of the interventions (Int) described in Section 4.3. For each scenario, an average treatment effect (ATE) <ref type="bibr" target="#b8">[9]</ref> as well as the 95% confidence intervals (95% CIs) were generated using causal inference based on the generated causal diagram and the obtained digital twin data-set. The ATE provides the average amount by which the effect variable is changed due to the intervention on the cause variable. The 95% confidence intervals represents the range in which the observed variable will likely lie for the given intervention. To provide evidence of a causal relationship, the 95% confidence intervals must not overlap the value zero (Figure <ref type="figure" target="#fig_0">1</ref> </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>step 4).</head><p>For Scenario A, the ATE value of the middle rotation of the joint decreases as the intervention value of the end rotation of the joint is increased. This is also mirrored by the 95% confidence intervals which also decrease. These intervals do not overlap the value zero for any intervention and therefore all provide evidence of a causal relationship for the end rotation of a joint causing an effect on the middle rotation of a joint.</p><p>The ATE and 95% confidence intervals in Scenario B follow a similar trend, decreasing as the intervention to the initial rotation is increased. However, the 95% confidence intervals all contain the value zero and therefore do not provide evidence of a causal relationship. Informally, this means that joint 2's path is not calculated based on the initial position of joint 1. For a system in a safety critical setting, this misrepresentation of the actual system could lead to a situation where the digital twin deems certain movements to be safe that would be hazardous in the corresponding physical setting. Our technique was able to localise this fault to a single causal relationship, providing a starting point for developers to fix this behaviour in a complex, typically untestable model.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5">DISCUSSION</head><p>Having gathered results for our two scenarios, we use this section to discuss the effectiveness of CI based testing techniques for digital twins. We also discuss difficulties uncovered during the process of testing the motivating example.</p><p>Our results showed that we were able to identify correct behaviour and even uncover erroneous behaviour in a safety critical digital twin. These scenarios allowed for specific causal relationships to be tested and, therefore, enabled us to isolate a fault down to a single causal relationship. This technique allows developers to accurately find where erroneous behaviour needs to be fixed, reducing time searching through intricate digital twin models.</p><p>Our technique was able to overcome the challenges to testability posed by digital twins, successfully building upon previous causal inference based testing techniques <ref type="bibr" target="#b0">[1,</ref><ref type="bibr" target="#b1">2,</ref><ref type="bibr" target="#b14">15]</ref>, further explored in Section 6. We used an efficient data set with no specific test cases to perform testing. This allowed testing to not require expensive run times due to physical couplings, but instead could use existing, unspecific run time data. Our small data set was able to determine both correct and incorrect behaviour within the digital twin.</p><p>Digital twins do, however, present difficulties when testing with CI. Accurately representing complex digital twin behaviours, such as data driven components <ref type="bibr" target="#b18">[19]</ref> and adaptive behaviour <ref type="bibr" target="#b6">[7]</ref>, require extensive domain knowledge. In our example, a simplification was made to represent the path of a joint as a single variable. In practice, this is not representative of the full path and could have lead to causal relationships within its execution being overlooked. Our motivating example also only tested direct causal relationships between variables. Testing more complex behaviour could require the use of causal mediation analysis <ref type="bibr" target="#b12">[13]</ref>, allowing for paths of multiple causal relationships to be observed. Outlining future works to accommodate these complex behaviours is outlined in Section 7.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6">RELATED WORK</head><p>Baah et al. <ref type="bibr" target="#b0">[1,</ref><ref type="bibr" target="#b1">2]</ref> propose a graphical based approach to fault diagnosis. An approach of extracting a program dependency graph and using its edges to statistically determine faults <ref type="bibr" target="#b1">[2]</ref> was developed and then extended to use these graphs, in addition to causal inference, to perform fault localisation on source code <ref type="bibr" target="#b0">[1]</ref>. This technique requires a causal diagram to be developed from a program dependence graph of the source code, allowing causal relationships to be tested within it. However, access to the source code to generate causal graphs is not always possible with digital twins as their models can be too complex for this technique and also extend across both physical and digital spaces.</p><p>These methods have been expanded by Podgurski et al. <ref type="bibr" target="#b14">[15]</ref>, allowing for faults to be identified using causal inference to intervene on specific lines of code. This approach, however, still requires access to the source code and would not be suitable for the complex, multi-domain models found in digital twins. Our method addresses the limitations and difficulties of these approaches through capturing domain expertise in causal DAGs, allowing the testing of more systems using causal inference without accessing their source code.</p><p>Wang et al. <ref type="bibr" target="#b20">[21]</ref> designed a digital twin which provides fault diagnosis for its physical system. It models a rotor blade and determines when the blade of the physical system has become unbalanced. We build upon this work by providing a technique which can not only determine faults in a physical system, but also allows for cross domain testing with a greatly reduced observed data set.</p><p>At the time of writing, no studies could be found relating to causal inference based testing of digital twins. There are a number of techniques for testing complex and unintelligible systems <ref type="bibr" target="#b19">[20]</ref> which explore multiple techniques to test these models, primarily for model inference. We will comparing these approaches to our technique to allow for limitations and enhancements to be uncovered in future works.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="7">CONCLUSION AND FUTURE WORKS</head><p>In this paper, we explore a method of using causal inference based testing to alleviate the challenges of testing digital twins posed by their lack of testability. We build upon existing methods <ref type="bibr" target="#b0">[1,</ref><ref type="bibr" target="#b1">2,</ref><ref type="bibr" target="#b14">15]</ref> by using causal DAGs to capture expected causal properties about a digital twin's intended behaviour. This attempts to solve the limitations of existing methods in capturing the complex models found in these systems. We also use counterfactuals to allow for reduced data sets, which need not contain specific test cases, to be used when testing physically coupled systems, reducing the time and expense of acquiring an extensive controlled testing data set.</p><p>We explore an industrial digital twin framework to show the validity and limitations of our technique. In doing so, we show how, using causal DAGs, we are able to confirm the presence of a causal relationship and, conversely, able to identify and localise a new fault, which causes dangerous behaviour in a safety critical environment, to a single causal relationship.</p><p>In future work, we aim to examine more digital twins to test more intricate behaviour. In doing this, we aim to understand how to ensure coverage of causal relationships within the complex and inaccessible behaviours of a digital twin. Behaviours which include time-based actions, neural networks and adapting to the environment present further challenges to testing digital twins. Ensuring the creation of accurate causal DAGs will allow domain expertise inform this process, improving the testability of digital twins.</p></div><figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_0"><head>Figure 1 :</head><label>1</label><figDesc>Figure 1: Using causal inference to test a digital twin. Stages 1-4 are outlined. People in the diagram represent the stages in which domain expertise is used</figDesc><graphic coords="3,317.96,540.27,240.21,102.88" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_1"><head>Figure 2 :</head><label>2</label><figDesc>Figure 2: Generated causal DAG of the motivating example. Two causal relationships are highlighted for Scenario A (green) and Scenario B (red)</figDesc><graphic coords="4,317.96,172.78,240.24,82.15" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_0"><head>Table 1 :</head><label>1</label><figDesc>Results of causal testing showing the Average Treatment Effect (ATE) and 95% Confidence Intervals (95% CIs) for both Scenario A and Scenario B. Evidence of causal relationships are highlighted in bold.</figDesc><table><row><cell>Int</cell><cell>ATE A</cell><cell>95% CIs A</cell><cell>ATE B</cell><cell>95% CIs B</cell></row><row><cell>-2.8</cell><cell>1.45</cell><cell>0.98, 1.92</cell><cell>0.14</cell><cell>-0.34, 0.62</cell></row><row><cell>-2.4</cell><cell>1.24</cell><cell>0.84, 1.65</cell><cell>0.12</cell><cell>-0.29, 0.53</cell></row><row><cell>-2.0</cell><cell>1.03</cell><cell>0.70, 1.37</cell><cell>0.10</cell><cell>-0.24, 0.44</cell></row><row><cell>-1.6</cell><cell>0.83</cell><cell>0.56, 1.10</cell><cell>0.08</cell><cell>-0.20, 0.35</cell></row><row><cell>-1.2</cell><cell>0.62</cell><cell>0.42, 0.82</cell><cell>0.06</cell><cell>-0.15, 0.26</cell></row><row><cell>-0.8</cell><cell>0.41</cell><cell>0.28, 0.55</cell><cell>0.04</cell><cell>-0.10, 0.18</cell></row><row><cell>-0.4</cell><cell>0.21</cell><cell>0.13, 0.27</cell><cell>0.02</cell><cell>-0.05, 0.09</cell></row><row><cell>0.4</cell><cell>-0.21</cell><cell>-0.27, -0.14</cell><cell>-0.02</cell><cell>-0.09, 0.05</cell></row><row><cell>0.8</cell><cell>-0.41</cell><cell>-0.55, -0.28</cell><cell>-0.04</cell><cell>-0.18, 0.10</cell></row><row><cell>1.2</cell><cell>-0.62</cell><cell>-0.82, -0.42</cell><cell>-0.06</cell><cell>-0.26, 0.15</cell></row><row><cell>1.6</cell><cell>-0.83</cell><cell>-1.10, -0.56</cell><cell>-0.08</cell><cell>-0.35, 0.20</cell></row><row><cell>2.0</cell><cell>-1.03</cell><cell>-1.37, -0.70</cell><cell>-0.10</cell><cell>-0.44, 0.24</cell></row><row><cell>2.4</cell><cell>-1.24</cell><cell>-1.65, -0.84</cell><cell>-0.12</cell><cell>-0.53, 0.29</cell></row><row><cell>2.8</cell><cell>-1.45</cell><cell>-1.92, -0.98</cell><cell>-0.14</cell><cell>-0.62, 0.34</cell></row><row><cell cols="5">and these values were taken as intervention values, as seen in Table</cell></row></table></figure>
		</body>
		<back>
			<div type="references">

				<listBibl>

<biblStruct xml:id="b0">
	<analytic>
		<title level="a" type="main">Causal Inference for Statistical Fault Localization</title>
		<author>
			<persName><forename type="first">George</forename><forename type="middle">K</forename><surname>Baah</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Andy</forename><surname>Podgurski</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Mary</forename><surname>Jean</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Harrold</forename></persName>
		</author>
		<idno type="DOI">10.1145/1831708.1831717</idno>
		<idno>ISSTA &apos;10</idno>
		<ptr target="https://doi.org/10.1145/1831708.1831717" />
	</analytic>
	<monogr>
		<title level="m">Proceedings of the 19th International Symposium on Software Testing and Analysis</title>
		<meeting>the 19th International Symposium on Software Testing and Analysis<address><addrLine>Trento, Italy; New York, NY, USA</addrLine></address></meeting>
		<imprint>
			<publisher>Association for Computing Machinery</publisher>
			<date type="published" when="2010">2010</date>
			<biblScope unit="page" from="73" to="84" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b1">
	<analytic>
		<title level="a" type="main">The probabilistic program dependence graph and its application to fault diagnosis</title>
		<author>
			<persName><forename type="first">George</forename><forename type="middle">K</forename><surname>Baah</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Andy</forename><surname>Podgurski</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Mary</forename><surname>Jean</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Harrold</forename></persName>
		</author>
		<idno type="DOI">10.1109/TSE.2009.87</idno>
		<ptr target="https://doi.org/10.1109/TSE.2009.87" />
	</analytic>
	<monogr>
		<title level="j">IEEE Transactions on Software Engineering</title>
		<imprint>
			<biblScope unit="volume">36</biblScope>
			<biblScope unit="page" from="528" to="545" />
			<date type="published" when="2010">2010. 2010</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b2">
	<monogr>
		<author>
			<persName><forename type="first">Andrew</forename><forename type="middle">G</forename><surname>Clark</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Michael</forename><surname>Foster</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Benedikt</forename><surname>Prifling</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Neil</forename><surname>Walkinshaw</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Robert</forename><forename type="middle">M</forename><surname>Hierons</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Volker</forename><surname>Schmidt</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Robert</forename><forename type="middle">D</forename><surname>Turner</surname></persName>
		</author>
		<idno type="DOI">10.48550/ARXIV.2209.00357</idno>
		<ptr target="https://doi.org/10.48550/ARXIV.2209.00357" />
		<title level="m">Testing Causality in Scientific Modelling Software</title>
		<imprint>
			<date type="published" when="2022">2022</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b3">
	<monogr>
		<title level="m" type="main">Functional Equations with Causal Operators</title>
		<author>
			<persName><forename type="first">Constantin</forename><surname>Corduneanu</surname></persName>
		</author>
		<idno type="DOI">10.4324/9780203166376</idno>
		<ptr target="https://doi.org/10.4324/9780203166376" />
		<imprint>
			<date type="published" when="2002">2002</date>
			<publisher>CRC Press</publisher>
			<pubPlace>London</pubPlace>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b4">
	<monogr>
		<author>
			<persName><forename type="first">B</forename><surname>Douthwaite</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Lesage</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Gleirscher</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J M</forename><surname>Calinescu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Aitken</surname></persName>
		</author>
		<author>
			<persName><surname>Alexander</surname></persName>
		</author>
		<author>
			<persName><surname>Law</surname></persName>
		</author>
		<title level="m">A Modular Digital Twinning Framework for Safety Assurance of Collaborative Robotics</title>
		<imprint>
			<date type="published" when="2021">2021</date>
		</imprint>
		<respStmt>
			<orgName>The University of Sheffield</orgName>
		</respStmt>
	</monogr>
	<note type="report_type">Technical Report</note>
</biblStruct>

<biblStruct xml:id="b5">
	<analytic>
		<title level="a" type="main">Complexity in engineering design and manufacturing</title>
		<author>
			<persName><forename type="first">Waguih</forename><surname>Elmaraghy</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Hoda</forename><surname>Elmaraghy</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Tetsuo</forename><surname>Tomiyama</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Laszlo</forename><surname>Monostori</surname></persName>
		</author>
		<idno type="DOI">10.1016/j.cirp.2012.05.001</idno>
		<ptr target="https://doi.org/10.1016/j.cirp.2012.05.001" />
	</analytic>
	<monogr>
		<title level="j">CIRP Annals</title>
		<imprint>
			<biblScope unit="volume">61</biblScope>
			<biblScope unit="page" from="793" to="814" />
			<date type="published" when="2012">2012. 2012</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b6">
	<analytic>
		<title level="a" type="main">Untangling the requirements of a Digital Twin</title>
		<author>
			<persName><forename type="first">Jonathan</forename><surname>Eyre</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Sam</forename><surname>Hyde</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Daniel</forename><surname>Walker</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Seun</forename><surname>Ojo</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Oliver</forename><surname>Hayes</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Robin</forename><surname>Hartley</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Rab</forename><surname>Scott</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Jonathan</forename><surname>Bray</surname></persName>
		</author>
		<ptr target="https://www.amrc.co.uk/pages/digital-twin-report" />
	</analytic>
	<monogr>
		<title level="m">Advanced Manufacturing Research Centre</title>
		<imprint>
			<date type="published" when="2021">2021</date>
		</imprint>
	</monogr>
	<note type="report_type">Technical Report</note>
</biblStruct>

<biblStruct xml:id="b7">
	<analytic>
		<title level="a" type="main">Digital Twin: Enabling Technologies, Challenges and Open Research</title>
		<author>
			<persName><forename type="first">Aidan</forename><surname>Fuller</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Zhong</forename><surname>Fan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Charles</forename><surname>Day</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Chris</forename><surname>Barlow</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">IEEE Access</title>
		<imprint>
			<biblScope unit="volume">8</biblScope>
			<biblScope unit="page" from="108952" to="108971" />
			<date type="published" when="2020">2020. 2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b8">
	<monogr>
		<title level="m" type="main">Causal Inference: What If</title>
		<author>
			<persName><forename type="first">Miguel</forename><surname>Hernan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">James</forename><surname>Robins</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2020">2020</date>
			<publisher>Chapman &amp; Hall/CRC</publisher>
			<pubPlace>Boca Raton</pubPlace>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b9">
	<analytic>
		<title level="a" type="main">Digital Twins for Industry 4.0 and Beyond</title>
		<author>
			<persName><forename type="first">Yuling</forename><surname>Hsu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Jing-Ming</forename><surname>Chiu</surname></persName>
		</author>
		<author>
			<persName><forename type="first">John</forename><forename type="middle">S</forename><surname>Liu</surname></persName>
		</author>
		<idno type="DOI">10.1109/IEEM44572</idno>
		<ptr target="https://doi.org/10.1109/IEEM44572" />
	</analytic>
	<monogr>
		<title level="m">2019 IEEE International Conference on Industrial Engineering and Engineering Management (IEEM)</title>
		<imprint>
			<date type="published" when="2019">2019. 2019</date>
			<biblScope unit="page">8978614</biblScope>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b10">
	<analytic>
		<title level="a" type="main">The statistics of causal inference: A view from political methodology</title>
		<author>
			<persName><forename type="first">Luke</forename><surname>Keele</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Political Analysis</title>
		<imprint>
			<biblScope unit="page" from="313" to="335" />
			<date type="published" when="2015">2015. 2015</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b11">
	<analytic>
		<title level="a" type="main">causal graphs for empirical research</title>
		<author>
			<persName><forename type="first">Judea</forename><surname>Pearl</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Biometrika</title>
		<imprint>
			<biblScope unit="volume">82</biblScope>
			<biblScope unit="page" from="669" to="688" />
			<date type="published" when="1995">1995. 1995</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b12">
	<analytic>
		<title level="a" type="main">Causal inference in statistics: An overview</title>
		<author>
			<persName><forename type="first">Judea</forename><surname>Pearl</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Statistics surveys</title>
		<imprint>
			<biblScope unit="volume">3</biblScope>
			<biblScope unit="page" from="96" to="146" />
			<date type="published" when="2009">2009. 2009</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b13">
	<monogr>
		<title level="m" type="main">The book of why: the new science of cause and effect</title>
		<author>
			<persName><forename type="first">Judea</forename><surname>Pearl</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Dana</forename><surname>Mackenzie</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2018">2018</date>
		</imprint>
	</monogr>
	<note>Basic books</note>
</biblStruct>

<biblStruct xml:id="b14">
	<analytic>
		<title level="a" type="main">CounterFault: Value-Based Fault Localization by Modeling and Predicting Counterfactual Outcomes</title>
		<author>
			<persName><forename type="first">Andy</forename><surname>Podgurski</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Yiƒüit</forename><surname>K√º√ß√ºk</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2020 IEEE International Conference on Software Maintenance and Evolution</title>
		<imprint>
			<publisher>IEEE</publisher>
			<date type="published" when="2020">2020</date>
			<biblScope unit="page" from="382" to="393" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b15">
	<monogr>
		<ptr target="https://www.universal-robots.com/products/ur10-robot/" />
		<title level="m">UR10E collaborative industrial robot -payload up to 12.5 kg</title>
		<imprint/>
		<respStmt>
			<orgName>Universal Robotics</orgName>
		</respStmt>
	</monogr>
</biblStruct>

<biblStruct xml:id="b16">
	<monogr>
		<title level="m" type="main">Digital Twins: State of the Art Theory and Practice, Challenges, and Open Research Questions</title>
		<author>
			<persName><forename type="first">Angira</forename><surname>Sharma</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Edward</forename><forename type="middle">Elson</forename><surname>Kosasih</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Jie</forename><surname>Zhang</surname></persName>
		</author>
		<idno type="arXiv">arXiv:2011.02833</idno>
		<imprint>
			<date type="published" when="2020">2020. 2020</date>
		</imprint>
	</monogr>
	<note>Alexandra Brintrup, and Anisoara Calinescu</note>
</biblStruct>

<biblStruct xml:id="b17">
	<monogr>
		<author>
			<persName><surname>Ieee</surname></persName>
		</author>
		<author>
			<persName><surname>Standards</surname></persName>
		</author>
		<idno>ISO/IEC/IEEE 24765:2017. Standard</idno>
		<title level="m">Systems and software engineering √ê Vocabulary</title>
		<imprint>
			<date type="published" when="2017">2017</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b18">
	<analytic>
		<title level="a" type="main">Digital Twins: Stateof-the-Art and Future Directions for Modeling and Simulation in Engineering Dynamics Applications</title>
		<author>
			<persName><forename type="first">D</forename><forename type="middle">J</forename><surname>Wagg</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K</forename><surname>Worden</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><forename type="middle">J</forename><surname>Barthorpe</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Gardner</surname></persName>
		</author>
		<idno type="DOI">10.1115/1.4046739030901</idno>
		<ptr target="https://doi.org/10.1115/1.4046739030901" />
	</analytic>
	<monogr>
		<title level="j">ASCE-ASME J Risk and Uncert in Engrg Sys Part B Mech Engrg</title>
		<imprint>
			<biblScope unit="volume">6</biblScope>
			<date type="published" when="2020-05">2020. 05 2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b19">
	<monogr>
		<title level="m" type="main">Testing Functional Black-Box Programs Without a Specification</title>
		<author>
			<persName><forename type="first">Neil</forename><surname>Walkinshaw</surname></persName>
		</author>
		<idno type="DOI">10.1007/978-3-319-96562-8_4</idno>
		<ptr target="https://doi.org/10.1007/978-3-319-96562-8_4" />
		<imprint>
			<date type="published" when="2018">2018</date>
			<publisher>Springer International Publishing</publisher>
			<biblScope unit="volume">101</biblScope>
			<pubPlace>Cham</pubPlace>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b20">
	<analytic>
		<title level="a" type="main">Digital Twin for rotating machinery fault diagnosis in smart manufacturing</title>
		<author>
			<persName><forename type="first">Jinjiang</forename><surname>Wang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Lunkuan</forename><surname>Ye</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Robert</forename><forename type="middle">X</forename><surname>Gao</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Chen</forename><surname>Li</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Laibin</forename><surname>Zhang</surname></persName>
		</author>
		<idno type="DOI">10.1080/00207543.2018.1552032</idno>
		<ptr target="https://doi.org/10.1080/00207543.2018.1552032" />
	</analytic>
	<monogr>
		<title level="j">International Journal of Production Research</title>
		<imprint>
			<biblScope unit="volume">57</biblScope>
			<biblScope unit="page" from="3920" to="3934" />
			<date type="published" when="2019">2019. 2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b21">
	<analytic>
		<title level="a" type="main">Dynamic uncertain causality graph for knowledge representation and probabilistic reasoning: Directed cyclic graph and joint probability distribution</title>
		<author>
			<persName><forename type="first">Qin</forename><surname>Zhang</surname></persName>
		</author>
		<idno type="DOI">10.1109/TNNLS.2015.2402162</idno>
		<ptr target="https://doi.org/10.1109/TNNLS.2015.2402162" />
	</analytic>
	<monogr>
		<title level="j">IEEE Transactions on Neural Networks and Learning Systems</title>
		<imprint>
			<biblScope unit="volume">26</biblScope>
			<biblScope unit="page" from="1503" to="1517" />
			<date type="published" when="2015-07">2015. 7 2015</date>
		</imprint>
	</monogr>
</biblStruct>

				</listBibl>
			</div>
		</back>
	</text>
</TEI>
