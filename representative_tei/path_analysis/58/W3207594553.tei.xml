<?xml version="1.0" encoding="UTF-8"?>
<TEI xml:space="preserve" xmlns="http://www.tei-c.org/ns/1.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.tei-c.org/ns/1.0 https://raw.githubusercontent.com/kermitt2/grobid/master/grobid-home/schemas/xsd/Grobid.xsd"
 xmlns:xlink="http://www.w3.org/1999/xlink">
	<teiHeader xml:lang="en">
		<fileDesc>
			<titleStmt>
				<title level="a" type="main">Worst-case Delay Bounds in Time-Sensitive Networks with Packet Replication and Elimination</title>
			</titleStmt>
			<publicationStmt>
				<publisher/>
				<availability  status="unknown">
					<licence/>
				</availability>
				<date type="published" when="2022-08-22">22 Aug 2022</date>
			</publicationStmt>
			<sourceDesc>
				<biblStruct>
					<analytic>
						<author role="corresp">
							<persName><forename type="first">Ludovic</forename><surname>Thomas</surname></persName>
							<email>ludovic.thomas@isae-supaero.fr</email>
							<affiliation key="aff0">
								<orgName type="department">ISAE-Supaéro</orgName>
								<orgName type="institution">Université de Toulouse. Toulouse</orgName>
								<address>
									<country key="FR">France</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Ahlem</forename><surname>Mifdaoui</surname></persName>
							<affiliation key="aff0">
								<orgName type="department">ISAE-Supaéro</orgName>
								<orgName type="institution">Université de Toulouse. Toulouse</orgName>
								<address>
									<country key="FR">France</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Jean-Yves</forename><surname>Le Boudec</surname></persName>
							<affiliation key="aff0">
								<orgName type="department">ISAE-Supaéro</orgName>
								<orgName type="institution">Université de Toulouse. Toulouse</orgName>
								<address>
									<country key="FR">France</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Y</forename><surname>Le Boudec</surname></persName>
							<affiliation key="aff1">
								<orgName type="department" key="dep1">I&amp;C Departement</orgName>
								<orgName type="department" key="dep2">EPFL. Lausanne</orgName>
								<address>
									<settlement>Switzer- land</settlement>
								</address>
							</affiliation>
						</author>
						<title level="a" type="main">Worst-case Delay Bounds in Time-Sensitive Networks with Packet Replication and Elimination</title>
					</analytic>
					<monogr>
						<imprint>
							<date type="published" when="2022-08-22">22 Aug 2022</date>
						</imprint>
					</monogr>
					<idno type="DOI">10.1109/TNET.2022.3180763</idno>
					<idno type="arXiv">arXiv:2110.05808v2[cs.NI]</idno>
					<note type="submission">POF Packet ordering function Packet ordering function Does not exist in TSN (March 2022</note>
				</biblStruct>
			</sourceDesc>
		</fileDesc>
		<encodingDesc>
			<appInfo>
				<application version="0.8.1" ident="GROBID" when="2025-10-29T00:44+0000">
					<desc>GROBID - A machine learning software for extracting information from scholarly documents</desc>
					<ref target="https://github.com/kermitt2/grobid"/>
				</application>
			</appInfo>
		</encodingDesc>
		<profileDesc>
			<textClass>
				<keywords>
					<term>Network Calculus</term>
					<term>Time-Sensitive Networking (TSN)</term>
					<term>Deterministic Networking (DetNet)</term>
					<term>Packet Replication Elimination and Ordering Functions (PREOF)</term>
					<term>Frame Replication and Elimination for Redundancy (FRER)</term>
					<term>Asynchronous Traffic Shaping (ATS) REG Traffic regulator Shapers [19</term>
					<term>§2.3.3] ATS: Asynchronous traffic shaping [20]</term>
				</keywords>
			</textClass>
			<abstract>
<div xmlns="http://www.tei-c.org/ns/1.0"><p>Packet replication and elimination functions are used by time-sensitive networks (as in the context of IEEE TSN and IETF DetNet) to increase the reliability of the network. Packets are replicated onto redundant paths by a replication function. Later the paths merge again and an elimination function removes the duplicates. This redundancy scheme has an effect on the timing behavior of time-sensitive networks and many challenges arise from conducting timing analyses. The replication can induce a burstiness increase along the paths of replicates, as well as packet mis-ordering that could increase the delays in the crossed bridges or routers. The induced packet mis-ordering could also negatively affect the interactions between the redundancy and scheduling mechanisms such as traffic regulators (as with per-flow regulators and interleaved regulators, implemented by TSN asynchronous traffic shaping). Using the network calculus framework, we provide a method of worst-case timing analysis for time-sensitive networks that implement redundancy mechanisms in the general use case, i.e., at end-devices and/or intermediate nodes. We first provide a network calculus toolbox for bounding the burstiness increase and the amount of reordering caused by the elimination function of duplicate packets. We then analyze the interactions with traffic regulators and show that their shaping-for-free property does not hold when placed after a packet elimination function. We provide a bound for the delay penalty when using per-flow regulators and prove that the penalty is not bounded with interleaved regulators. Finally, we use an industrial use-case to show the applicability and the benefits of our findings.</p></div>
			</abstract>
		</profileDesc>
	</teiHeader>
	<text xml:lang="en">
		<body>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="1">INTRODUCTION</head><p>T IME-SENSITIVE NETWORKS were specified by the de- terministic networking (DetNet) working group of the Internet Engineering Task Force (IETF), as well as the timesensitive networking (TSN) task group of the Institute of Electrical and Electronics Engineers (IEEE), for supporting safety-critical applications in several domains, such as aerospace <ref type="bibr" target="#b0">[1]</ref>, automation <ref type="bibr" target="#b1">[2]</ref> and automotive <ref type="bibr" target="#b2">[3]</ref>.</p><p>As opposed to the best-effort service, safety-critical applications require a deterministic service [4, §3.1] <ref type="bibr" target="#b4">[5]</ref> with zero congestion loss, high levels of reliability, bounded out-oforder delivery and guarantees on the end-to-end latency of each flow. Time-sensitive networks provide this service by relying on a set of redundancy and scheduling mechanisms. The former reduce the probability of end-to-end losses whereas the later aim to guarantee latency bounds <ref type="bibr" target="#b4">[5]</ref>.</p><p>Verifying these bounds on a network is a known intractable issue for simulators and real-life experiments because worst-case situations are not captured by stochastic metrics <ref type="bibr">[6, §1]</ref>. Therefore, both the TSN and the DetNet working groups recommend using analytical tools for conducting worst-case timing analyses and for proving the determinism of the network's service <ref type="bibr">[7, §L.3, §N.2] [8]</ref>. Among them, the network-calculus framework <ref type="bibr" target="#b8">[9]</ref> com-Manuscript received someday; revised some other day putes latency, jitter, and backlog bounds, assuming that the sources [resp., the servers] respect some contract of maximum traffic generation [resp., of minimum service]. It has been used to prove certification requirements in avionics <ref type="bibr" target="#b9">[10]</ref>. The worst-case timing performance of time-sensitive networks, when focusing only on scheduling mechanisms, has been widely analyzed in the literature <ref type="bibr" target="#b10">[11]</ref>- <ref type="bibr" target="#b15">[16]</ref>.</p><p>The main issue addressed in this paper is the effect of the redundancy mechanisms on the delay guarantees in timesensitive networks. These redundancy mechanisms, such as frame replication and elimination for redundancy (FRER) <ref type="bibr" target="#b17">[18]</ref> in TSN and packet replication, elimination and ordering functions (PREOFs) <ref type="bibr" target="#b3">[4]</ref> in DetNet, decrease the end-to-end packetloss ratio by distributing "the contents of [. . . ] flows over multiple paths in time and/or space, so that the loss of some of the paths does need not cause the loss of any packets" <ref type="bibr" target="#b3">[4]</ref>. To do so, the DetNet packet-replication function (PRF) replicates In this paper Term used in DetNet <ref type="bibr" target="#b3">[4]</ref> Term used in TSN <ref type="bibr" target="#b16">[17]</ref> </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>PREFs</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Packet replication and elimination functions</head><p>Packet replication and elimination functions FRER: Frame replication and elimination for redundancy <ref type="bibr" target="#b17">[18]</ref> PRF each incoming packet into several outgoing packets that can take different paths (Fig. <ref type="figure" target="#fig_0">1</ref>). The paths then merge and multiple copies of the packet (the replicates) reach a packetelimination function (PEF) that forwards only the first replicate and eliminates the subsequent ones (the duplicates).</p><p>The PEF generally relies on a sequence number in the packet header to identify the replicates <ref type="bibr" target="#b3">[4]</ref>. In Table <ref type="table" target="#tab_0">1</ref>, we compare the terms used in IETF DetNet and IEEE TSN. The main acronyms used thorough the paper are also listed in Table <ref type="table" target="#tab_0">1</ref>.</p><p>The packet replication and elimination functions (PREFs) could increase the worst-case end-to-end latency of the flows: [4, §3.1] recalls that their use is "constrained by the need to meet the users' latency requirements". Therefore, understanding how PREFs affect the worst-case latency guarantees is fundamental to: (i) determine the applicability of PREFs in industrial networks; (ii) perform trade-offs between latency and loss-ratio requirements; and (iii) design networks with stringent requirements on both aspects.</p><p>Three main challenges arise from conducting worst-case timing analyses of PREFs. First, the replication of packets through the network can induce a burstiness increase along the paths of replicate packets, which leads to increasing delay and backlog bounds in the crossed nodes. Second, the traffic exiting the PEF can exhibit both an increased burstiness and a mis-ordering of the packets. This can lead to increased delay bounds in the nodes placed after the PEF. Third, the coexistence of the packet mis-ordering with the burstiness increase could negatively affect the behavior of the devices that have been designed for tackling each issue individually. For example, packet-ordering functions (POFs) have been specified in IETF DetNet for removing only the packet mis-ordering. Similarly, traffic regulators (also called shapers) are scheduling mechanisms designed for removing only the burstiness increase. If a traffic regulator (as in TSN ATS, asynchronous traffic shaping) is placed after the PEF for removing the burstiness increase caused by the redundancy, then the packet mis-ordering that coexists with this burstiness increase could negatively affect the behavior of the traffic regulator.</p><p>The existing worst-case timing analyses of redundancy mechanisms in time-sensitive networks <ref type="bibr" target="#b20">[21]</ref>, <ref type="bibr" target="#b21">[22]</ref> are limited to the assumption of using redundancy mechanisms at the end-systems as with Avionics Full-dupleX switched Ethernet (AFDX) <ref type="bibr" target="#b9">[10]</ref> and Parallel Redundancy Protocol (PRP) <ref type="bibr" target="#b22">[23]</ref>. This assumption discards the main challenges detailed above. More recent works <ref type="bibr">[21, §4.3.2]</ref>  <ref type="bibr" target="#b23">[24]</ref> based on simulation consider redundancy mechanisms at intermediate nodes. However, firm conclusions are difficult to draw from simulations as they not cover the worst-case behavior.</p><p>Therefore, our primary goal in this paper is to bridge these gaps and to provide a method of worst-case timing analysis for time-sensitive networks that implement redundancy mechanisms in the general use-case, i.e., at endsystems and/or intermediate nodes. Specifically:</p><p>• We provide a network-calculus toolbox that enables the computation of upper bounds on the burstiness increase (Theorem 1) and on the amount of reordering (Theorem 2) due to the elimination of duplicate packets. Theorem 1 is useful for computing delay bounds in the nodes located after the elimination of duplicates, whereas the bound from Theorem 2 can be compared to the application's requirements to decide if the packets should be reordered prior to their delivery.</p><p>• We analyze the interactions between redundancy mechanisms and traffic regulators. We show that the packet mis-ordering due to the elimination of duplicates leads to a bounded increase of the worst-case delay with perflow regulators (PFRs) (Theorem 3) and to unbounded delays with interleaved regulators (IRs) (e.g., TSN ATS) (Theorem 4). The problem goes away if the packets are re-ordered after the elimination and before the regulator (Theorem 5). • We conduct performance analyses for an industrial use-case that highlight the interest of our introduced approach to tighten the delay bounds in comparison to intuitive computation approaches. In Section 2, we illustrate the issues posed by PREFs using a toy example. In Section 3, we relate our proposed approach to the state of the art, and we describe the system model in Section 4. Our main theoretical contributions are detailed in Sections 5 and 6, that cover the network-calculus toolbox for redundancy mechanisms and the analysis of the interaction between such mechanisms and traffic regulators. Finally, we validate our approach on an industrial use-case in Section 7.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2">ILLUSTRATION OF THE ISSUES POSED BY PACKET REPLICATION AND ELIMINATION</head><p>In this section, we illustrate the issues posed by packet replication and elimination functions (PREFs) in time-sensitive networks, as identified in the Introduction. We first detail the burstiness increase and the mis-ordering introduced by PREFs. Afterwards, we focus on the problems arising from the interactions between PREFs and traffic regulators.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.1">Burstiness and Misordering Introduced by PREFs</head><p>To highlight the effect of PREFs on the burstiness and packet order, we consider the toy example in Fig. <ref type="figure" target="#fig_10">2</ref> Fig. <ref type="figure" target="#fig_39">3</ref>. An example trajectory on the toy example of Fig. <ref type="figure" target="#fig_10">2</ref> causing a double-rate output of the PEF.</p><p>with a rate r 0 of one packet per every time unit is replicated at the output of the vertex B and sent over two paths: C [resp., D], with a minimum delay of zero time units [resp., six time units] and a maximum delay of one time unit [resp., seven time units]. A possible trace of packets for the toy example is given in Fig. <ref type="figure" target="#fig_39">3</ref>. Here, the path through C drops all Data Units 1 to 6: they are only received through D with a latency of seven time units (7 t.u.). After 7 t.u., the link through C is available again and the Data Units 7 to 14 are received through both C and D, with a latency of 1 [resp., 7] t.u. The PEF receives the sum of "outC" and "outD". It drops the duplicates but forwards the packets that contain not-already-seen data units. Its output is on the Line "out". We observe that the traffic after the PEF is much more bursty than before the replication function: between t.u. 8 and t.u. 13, the PEF simultaneously outputs the "older" packets 1-6 received through the "long" path and the "newer" packets 7-12 received through the now-active "short" path. This increases the load on the downstream link with a doubled rate, 2r 0 , for a duration of 6 t.u.</p><p>The toy example hence suggests that packet replication and elimination functions (PREFs) can significantly increase the flows' burstiness, which could further worsen the congestion and the worst-case delay in the downstream nodes. Obtaining a bound on this burstiness increase is important for computing the end-to-end latency of the flow. Indeed, a delay bound for the flow in the third section of Fig. <ref type="figure" target="#fig_0">1</ref> (after the PEF) can be obtained from such an upper bound on the flow's worst-case traffic at the output of the PEF and from a lower bound on the minimum service provided by the nodes located after the PEF.</p><p>A first approach for bounding the traffic of the flow after the PEF, which we denote as intuitive, consists in doing as if the PEF would never drop a packet (i.e., even the duplicates are forwarded). This approach requires the network engineer to dimension all the downstream nodes in order to support a sustained double rate. In Theorem 1, we provide a better bound for the traffic at the output of the PEF. It leads to better end-to-end latency bounds, as we show in Sec. <ref type="bibr" target="#b6">7</ref>.</p><p>We also observe that PREFs can create a mis-ordering: In the toy example, Data Unit 6 exits the PEF five time units after Data Unit 7. Obtaining an upper bound for this misordering is important for comparing it to the application's requirements. We provide such bound in Theorem 2. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>∼ in</head><p>Fig. <ref type="figure">4</ref>. The toy example of Fig. <ref type="figure" target="#fig_10">2</ref> extended with POF and REG to deal with the mis-ordering and burstiness increase issues due to PEF.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.2">Interactions Between PREF and Other Devices</head><p>If either the end-to-end latency bound or the mis-ordering bound does not meet the system requirements, then we can use one of the devices specified by the working groups for tackling the corresponding issue. For example, if the receiving application does not tolerate any mis-ordering, then the DetNet packet-ordering function (POF) [4, §3.2.2.2] can be used after the PEF to correct the mis-ordering introduced by PREFs. Similarly, if the end-to-end latency of a flow does not meet its requirements due to a high worst-case delay in the third section of Figure <ref type="figure" target="#fig_0">1</ref>, then using traffic regulators <ref type="bibr" target="#b19">[20]</ref> just after the PEF appears as a natural choice: Traffic regulators (REGs) have been designed for removing the burstiness increase <ref type="bibr" target="#b10">[11]</ref>, <ref type="bibr" target="#b11">[12]</ref> thus for reducing the worst-case delay in downstream nodes. They come in two flavors: per-flow regulators (PFRs) process each flow individually whereas interleaved regulators (IRs) process flow aggregates.</p><p>To the best of our knowledge, the interactions between PREFs and other devices such as POFs and regulators have not yet been analyzed. For instance, many properties of the regulators rely on the assumption that the upstream system is first in, first out (FIFO) <ref type="bibr" target="#b11">[12]</ref>. As observed on the toy example, this assumption does not hold with PREFs.</p><p>Assume, for example, that the traffic regulator in Fig. <ref type="figure">4</ref> shapes the traffic back to the profile it had at the input "in". In terms of burstiness, this makes the middle section in Fig. <ref type="figure" target="#fig_0">1</ref> transparent to the third section. The regulator processes the traffic from the "out" line of Fig. <ref type="figure" target="#fig_39">3</ref> and forces the packets to be as spaced as in the "in" line by delaying and storing the packets if required. Clearly, the upstream system between "in" and "out" in Fig. <ref type="figure" target="#fig_39">3</ref> is not FIFO, because the packets exit the PEF out of order. Thus the properties of the regulators that depend on this assumption might not hold and the cohabitation of the PEF and the REG could negatively affect the latency bounds. A packet-ordering function (POF) (dashed box in Fig. <ref type="figure">4</ref>) can be used after the PEF and before the regulator to force the upstream system to be FIFO. If such POF is placed, then we would expect to retrieve all the properties of regulators.</p><p>In Sec. 6, we analyze the interactions between PREFs and regulators. We observe that the conclusions depend on the type of the regulator: either PFR or IR (as with TSN ATS).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3">RELATED WORK</head><p>The most relevant timing analyses of redundancy mechanisms in time-sensitive networks can mainly be categorized according to the assumption of where to enable the packet replication and elimination functions.</p><p>The existing approaches in this area considering the packet replication and elimination only at the end-devices concern mainly High-availability Seamless Redundancy (HSR) The graph of flow f . EP-vertex in G(f )</p><p>A vertex at which the duplicates of f have not been eliminated yet. Diamond ancestor of n in G(f ) A vertex that is not an EP-vertex of G(f ) and that is contained in any paths of f between its source and n.</p><formula xml:id="formula_0">d a→n f [resp., D a→n f ]</formula><p>Lower [resp., upper] delay bound for f between a and n, along any possible path a → n within G(f ).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>PEFn(f )</head><p>Packet-elimination function at output-port n that eliminates the duplicates of flow f .</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>POFn(F, o)</head><p>Packet-ordering function at n that uses reference o to force the order of the data units of the aggregate F .</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>REGn(F, o)</head><p>Regulator (either interleaved or per-flow) that shapes the flows within F in a FIFO manner. and Parallel Redundancy Protocol (PRP) <ref type="bibr">[23, §4]</ref>. Both mechanisms eliminate the duplicates only at the destination; thus their analysis does not require to bound the traffic at the output of the PEF and discards the mis-ordering issue. In <ref type="bibr" target="#b21">[22]</ref>, worst-case delay bounds are computed in HSR-based networks by using network calculus. The idea consists in taking the maximum of the delay bounds along each of the redundant paths. In <ref type="bibr" target="#b24">[25]</ref>, model checking is used to analyze how well PEF algorithms based on sequence numbers can detect duplicates in AFDX, a PRP-based network.</p><p>On the other hand, there exist only few seminal works in the literature considering the packet replication and elimination anywhere in the network. These works mainly concern FRER <ref type="bibr" target="#b17">[18]</ref>, which is the first mechanism enabling such an assumption. As mentioned in [18, §C.9] and further illustrated in Sec. 2, the elimination of duplicates within the network raises issues in computing the end-to-end delay bounds. In <ref type="bibr" target="#b25">[26]</ref>, further concerns about FRER have been discussed. In <ref type="bibr" target="#b26">[27]</ref>, a simulation framework based on OMNeT++ has been developed for TSN mechanisms, including FRER <ref type="bibr">[21, §4.3.2]</ref>. However there is no specific experiment for assessing the effect of FRER on latency bounds. Furthermore, obtaining the worst-case delay bounds with simulators is a known intractable problem <ref type="bibr">[6, §I]</ref>. Thus, as stated above, there are no formal analyses of delay bounds of redundancy mechanisms, such as TSN FRER or DetNet PREOF, when the packet replication and elimination is performed anywhere in the network, or on the interactions between redundancy and scheduling mechanisms.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4">SYSTEM MODEL</head><p>Our system model is divided into three abstraction levels. It results from an analysis of the TSN and DetNet documents and Appendix A details its applicability for these standards. Notations used thorough the paper are listed in Table <ref type="table" target="#tab_2">2</ref>. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.1">Network and Flow Model</head><p>Type of network: We consider an asynchronous packetswitching full-duplex store-and-forward network that transports data units between applications. We assume that there is one or several classes of traffic and that flows are statically assigned to a class. We focus on one class and denote by G the underlying graph for this class <ref type="bibr" target="#b5">[6,</ref><ref type="bibr">Chap. 12</ref>]. G contains one vertex per output port in the network (see Sec. 4.2 for the exact mapping between the two notions) and (a, b) is a directed edge of G if at least one flow crosses b just after a. The network does not need to be feed-forward, it can contain cyclic dependencies (i.e., G can contain cycles) <ref type="bibr" target="#b12">[13]</ref>.</p><p>Data unit versus packet: At any time, a data unit can be transported by several packets located at several locations. A flow f is a coherent sequence of data units that originate from a unique source and that follow a directed acyclic subgraph of G to reach one or several destinations. An example of such a flow graph, noted G(f ), is shown in Fig. <ref type="figure">5</ref>. Flow constraints: We assume that each flow is constrained by a network-calculus arrival curve α 0 f at the output of its source application. For an observation point M (that can be a vertex or a function), we note α f,M the arrival curve of f at M . For n a vertex of G(f ) [resp., for FUN a function], we note α f,n * [resp., α f,FUN * ] the arrival curve of f at the output of vertex n [resp., at the output of the function FUN]. Position of PRF, PEF in a flow graph: When a vertex, such as B in Fig. <ref type="figure">5</ref>, has several children, we consider that an implicit PRF has been installed on B for the flow f : it sends a copy of each incoming data unit to each child. When a vertex has several parents, such as F in Fig. <ref type="figure">5</ref>, this means that it can receive the same data unit several times, within different packets. However, this does not necessarily mean that it implements a PEF. If a PEF is present on such a vertex (case of F in Fig. <ref type="figure">6a</ref>), then it forwards only the first received packet that contains the data unit. If the vertex does not contain a PEF (case of F in Fig. <ref type="figure">6b</ref>), then it forwards all the packets, and might consequently forward the same data unit several times. Packets that transport already-seen data units at a given location are called duplicates.</p><p>Assumption on the elimination of duplicates: When several paths of a flow merge, we assume that the duplicates are eliminated before the path can split again. We believe that this assumption does not restrict the analysis of industrial systems. Indeed, the main use-case for having a PEF a few hops after the merge point (as in Fig. <ref type="figure">6b</ref>) is when the edge router does not support PEF. The edge router then forwards all the received packets to the end-system, that is responsible for removing the duplicates. EP-vertex: elimination-pending (EP) vertices of G(f ) are the only vertices that can observe a data unit of f more than once. Formally, if a vertex, that does not contain a PEF for f , has several parents in G(f ) (vertex F in Fig. <ref type="figure">6b</ref>), then we qualify it as an EP-vertex of G(f ). An EP-vertex can have at most one child in G(f ). Additionally, a vertex that does not contain a PEF for f and is a child of an EP-vertex is also an EP-vertex of G(f ). Diamond ancestor: For any two vertices a and n in a flow graph G(f ), we say that a is a diamond ancestor of n in G(f ) if a is not an EP-vertex in G(f ) and all paths in G(f ) from the source of f to n contain a. In Fig. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.2">Device Model</head><p>Device: The model for each device in the network is illustrated in Fig. <ref type="figure" target="#fig_3">7</ref>: it consists of input ports, output ports, and a switching fabric. The vertices in the network's graph G, such as vertex F in thick red in Fig. <ref type="figure" target="#fig_3">7</ref>, are made of the output port on one device, followed by the input port on the subsequent device. Output port: We model each output port as in Fig. <ref type="figure" target="#fig_3">7</ref>. It contains a FIFO-per-class class-based queuing subsystem (CBQS). We assume that, for each vertex n, we know a network-caclulus service curve β n that the CBQS offers in a FIFO manner to the class of interest. The service curve can be obtained through an analysis of the scheduling policy <ref type="bibr" target="#b14">[15]</ref> and includes any additional technological latency. The CBQS can be preceded by a set of optional functions. Packetized streams: Within a device, between the output of the input port (that contains the packetizer) and the input of the CBQS, the stream of bits for each flow is packetized. T : After being stored for a duration T , m is immediately released, even if the previously-expected data unit has not been received so far. The timeout allows the POF to recover from losses without blocking the following data units forever <ref type="bibr" target="#b27">[28]</ref>, <ref type="bibr" target="#b28">[29]</ref>. We assume that the timeout value of every POF conforms with the recommendations of [28, §IV.B]. As a consequence, the timeout cannot only be triggered when one of the data units m of F is lost for the POF.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4.3">Model for the</head><p>The model of POF is illustrated in Fig. <ref type="figure">8</ref>. A possible implementation is given in <ref type="bibr">[28, §3.4</ref>] and <ref type="bibr" target="#b28">[29]</ref>. A POF cannot be placed at an EP-vertex: we always assume that the duplicates are eliminated before the flow is handed to the POF, which is consistent with the assumptions in <ref type="bibr">[29, §4.1]</ref>. REG: Consider a set of flows F crossing n such that, for each flow f ∈ F, o is a diamond ancestor of n in G(f ). The output port in n can contain a regulator (REG) for the aggregate F with reference o, noted REG n (F, o). The regulator is configured with a set of shaping curves, one per flow f of the aggregate F, which we note {σ n,f } f ∈F . For each f ∈ F, σ n,f must be concave and must be an arrival curve of f at the output of the reference vertex o. The regulator then puts all the packets of the aggregate F in a FIFO queue (Fig. <ref type="figure">9</ref>) and examines only the head-ofline packet. It releases the head-of-line packet as soon as doing so does not violate the shaping curve σ n,f , where f is the flow of the head-of-line packet. When the regulator processes a single flow, F = {f }, we model it as a per-flow regulator (PFR) <ref type="bibr">[9, §1.7.4]</ref>. When F contains two or more flows, we model it as an interleaved regulator (IR) <ref type="bibr" target="#b11">[12]</ref>.</p><p>We consider that each output port contains a forwarding pipeline before the CBQS with the following optional functions, in this order: PEFs → POFs → REGs.</p><p>Example: Consider two flows f, g, both with the same flow graph of Fig. <ref type="figure">5</ref> and a PEF at F . The output port F processes streams of packets coming from both parents C and D. A first possible example of the organization of the functions before the CBQS within vertex F is shown in    <ref type="figure" target="#fig_4">10</ref>. Each flow is first processed by its respective PEF, then both duplicate-free flows are reordered as an aggregate by using POF F ({f, g}, B). This function enforces the same order for the aggregate as the one at the output of B, i.e., before the redundant section. Last, they are both processed by the same interleaved regulator that enforces two different contracts for f and for g, but that keeps the aggregate {f, g} FIFO. A variant of this situation is shown in Fig. <ref type="figure" target="#fig_5">11</ref>. After elimination, each flow is now independent from the other one, where the POFs enforce per-flow order and the two REGs are per-flow regulators (PFRs). This situation is different from Fig. <ref type="figure" target="#fig_4">10</ref> because a packet of f cannot be delayed by a packet of g. In addition, this configuration could have a higher hardware cost than in Fig. <ref type="figure" target="#fig_4">10</ref>. FIFO assumptions: With the exception of POF, each network element is assumed to be FIFO for the class of interest. Assumptions on losses: With the exception of PEF, each function, each CBQS, each switching fabric, each input port and each internal connection within a device is assumed to be lossless (does not lose any packets). Packets can be lost on the transmission links between devices. This model covers various failures, including random media losses, the shutdown of an output port (equivalent to its out-going link losing all packets) and the shutdown of an input port (equivalent to its in-going link losing all packets).</p><formula xml:id="formula_1">CBQS REG F ({f, g}, B) POF F ({f, g}, B) PEF F (f ) PEF F (g)</formula></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>CBQS</head><formula xml:id="formula_2">REG F ({f }, B) POF F ({f }, B) PEF F (f ) REG F ({g}, B) POF F ({g}, B) PEF F (g)</formula><p>As packets can be lost on transmission links, the network is not assumed to be lossless. Of course, the latency bounds computed in this paper are only valid for the non-lost data units (the data units for which at least one replicate reaches the destination), but these bounds remain valid even if some other data units are lost in the network.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5">TOOLBOX FOR THE DETERMINISTIC ANALYSIS OF PACKET REPLICATION AND ELIMINATION</head><p>Network calculus <ref type="bibr" target="#b8">[9]</ref> is a mathematical framework for computing deterministic latency bounds. It relies on the concepts of arrival and service curves. An arrival curve α f,M at a specific observation point M and for a specific flow f is a constraint on the maximum amount of traffic of flow f that can cross M over any periods of time [s, t], which is equivalent to: ∀s ≤ t, R(t) -R(s) ≤ α(t -s), with R(t) the amount of data of flow f crossing M between 0 and t. Also, a service curve β S of a specific network element S is a constraint on the minimum amount of traffic that the network element must serve. Network calculus gives delay and backlog bounds in network elements given the arrivalcurve and service-curve constraints <ref type="bibr" target="#b8">[9]</ref>, <ref type="bibr" target="#b29">[30]</ref>.</p><p>In this section, we compute an upper bound of the burstiness increase caused by PREFs by computing an arrival curve α f,PEF * for the flow f at the output of the packetelimination function. The arrival curve α f,PEF * can then be combined with the service curves of the downstream elements (that can be found in <ref type="bibr" target="#b14">[15]</ref>, <ref type="bibr" target="#b30">[31]</ref>) to compute a delay bound in the last section of Fig. <ref type="figure" target="#fig_0">1</ref>. This delay bound is useful for validating the system's latency requirements.</p><p>We also quantify the amount of mis-ordering introduced by the redundancy. This bound can be compared to the application's requirement to decide if reordering is required before delivering the data to the application. If so, the same bound can be combined with the results of <ref type="bibr" target="#b27">[28]</ref> to configure the packet-ordering function (POF) that corrects this misordering. The consequences of such reordering on the flow's delay and burstiness are also analyzed.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.1">Output Arrival Curve of a PEF</head><p>Theorem 1 (Output arrival curve of a PEF). Let PEF n (f ) be a packet-elimination function for flow f at the output port of vertex n ∈ vertices(G(f )). Assume that α f,PEF in is an arrival curve of f at the input of PEF n (f ). Then 1/ α f,PEF in is an arrival curve for the flow at the output of the PEF. 2/ For every diamond ancestor a of n in G(f ), assume that α f,a * is an arrival curve for f at the output of a and denote by d a→n f [resp., D a→n f ] a minimum [resp., maximum] delay bound for f between the output of a and the input of PEF n (f ), along any possible paths a → n within the graph G(f ). Then</p><formula xml:id="formula_3">α a→n f α f,a * δ (D a→n f )-(d a→n f ) (1)</formula><p>is an arrival curve for f at the output of the PEF. Furthermore, the min-plus convolution of all above arrival curves</p><formula xml:id="formula_4">α f,PEF * = α f,PEF in ⊗ α a1→n f ⊗ α a2→n f ⊗ α a3→n f ⊗ . . . (2)</formula><p>for any set of diamond ancestors a 1 , a 2 , a 3 , . . . of n in G(f ) is also an arrival curve for f at the output of the PEF, where ⊗ denote the min-plus convolution 1 .</p><p>The result is proved as follows: Item 1/ is a direct consequence of the fact that the PEF has no delay. Item 2/ is obtained by considering the entire system made of the portion of the graph G(f ) between the diamond ancestor a and n. This system is neither lossless nor FIFO, but several classical network-calculus results remain applicable, as we discuss in Appendix B. α f,PEF * is finally obtained by applying <ref type="bibr" target="#b8">[9,</ref><ref type="bibr">Lemma 1.2.4]</ref>. A formal proof of Theorem 1 is given in Appendix C.1.</p><p>Application to the Toy Example: An arrival curve α f,PEF * for f at the output of the PEF within F (Fig. <ref type="figure" target="#fig_10">2</ref>) is shown in Fig. <ref type="figure" target="#fig_7">12</ref> with a solid red line.</p><p>The first constituent, α f,PEF in is the arrival curve at f at the input of the PEF (as per Theorem 1, Item 1). To obtain it, we first observe that the periodic profile of the flow f at the output of B (as on the Line "in" of Fig. <ref type="figure" target="#fig_39">3</ref>) is constrained by the leaky-bucket arrival curve α f,B * = γ r0,b0 with a rate of one data unit per unit of time (r 0 = 1 d.u./t.u.) and a burst of one data unit (b 0 = 1 d.u.). By using the jitter bound within C and D and Proposition 3 in Appendix B, we obtain that the arrival curves of f at the output of C and D, α f,C * and α f,D * , equal to the same leaky-bucket arrival curve γ r0,2b0 with a burst 2b 0 of two units of data. As f enters F from both C and D, we obtain α f,PEF in = α f,C * + α f,D * = γ 2r0,4b0 , a leaky-bucket arrival curve with a rate 2r 0 and a burst 4b 0 .</p><p>The second constituent of α f,PEF * in Fig. <ref type="figure" target="#fig_7">12</ref> is obtained by applying the Equation (1) of Theorem 1, Item 2/ with a = B. From Fig. <ref type="figure" target="#fig_10">2</ref>, we obtain that a delay lower-bound [resp., an upper-bound] for f from B to F along any possible paths  within</p><formula xml:id="formula_5">1. f ⊗ g : t → inf s≥0 (f (s) + g(t -s)).</formula><formula xml:id="formula_6">αf ,P E F in 2 r0 r0 α B → F f 4b 0 8b 0 α f,PEF * = α f,PEF in ⊗ α B→F f = min α f,PEF in , α B→F f</formula><formula xml:id="formula_7">G(f ) is d B→F f = 0 t.u. (through C) [resp., D B→F f = 7 t.u, through D]. We obtain α B→F f = α f,B * δ D B→F f -d B→F f = γ r0,b0 δ 7 , i.e., α B→F f = γ r0,8b0 .</formula><p>If we assumes that the PEF does not delete any packet, as in the intuitive approach mentioned in Section 2, we only know that f has the arrival curve α f,PEF in at the output of the PEF (Item 1 of the Theorem). This arrival curve shows that the traffic can exhibits a burst of 4b 0 and a rate 2r 0 twice as big as the normal source rate.</p><p>But our theorem goes beyond the intuitive approach: its second item applied with a = B provides a second arrival curve for f : α B→F f . In the network-calculus framework, we can combine the knowledge of two arrival curves by computing their min-plus convolution:</p><formula xml:id="formula_8">α f,PEF * = α f,PEF in ⊗ α B→F f</formula><p>is also an arrival curve for f at the output of the PEF. With the leaky-bucket arrival curves of the toy example, the min-plus convolution is simply the minimum of the two curves, shown with a solid red line on Fig. <ref type="figure" target="#fig_7">12</ref>. We observe that Theorem 1 provides a better upper-bound of the traffic than the intuitive approach. For example, α f,PEF * indicates that the double rate 2r 0 is only a peak rate that the traffic cannot exhibits forever: flow f keeps a sustained rate r 0 , but with a much higher burst 8b 0 . In network calculus, the arrival curves that describe flows with a peek rate (2r 0 ) and a sustained rate (r 0 ) are called variable-bit-rate (VBR) arrival curves. Theorem 1 provides for the toy example the best possible VBR arrival curve, as we prove later.</p><p>Remark: Theorem 1 does not require to identify pairs of replication/elimination functions, with one PRF and one PEF in each pair. Therefore, Theorem 1 is suited for complex flow graphs, including graphs with repeated patterns of redundancy, with meshes, as well as graphs where the packet-elimination function is not located at the merge point of the paths. When pairs of PRF/PEF can be identified as in Fig. <ref type="figure" target="#fig_0">1</ref>, the following simpler corollary can be used.</p><p>Corollary 1 (Application of the theorem to a unique redundant section with parallel systems). Consider a flow f with an arrival curve α f that is replicated and sent into N systems {S i } i∈ 1,N and then processed by a packetelimination function PEF(f ), as in Fig. <ref type="figure" target="#fig_8">13</ref>. Note that each S i is not necessary a single network element but can be any combination of network elements. Assume that the packets forwarded through S i (i.e., the ones not lost) have a delay © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See <ref type="url" target="https://www.ieee.org/publications/rights/index.html">https://www.ieee.org/publications/rights/index.html</ref> for more information.</p><p>Replication through S i that is bounded within</p><formula xml:id="formula_9">S 1 S 2 . . . S N PEF n (f ) f α f α * f</formula><formula xml:id="formula_10">[d i , D i ]. Then, α * f = i∈ 1,N α f δ (Di-di) ⊗   α f δ max i∈ 1,N Di-min j∈ 1,N dj   (3) is an arrival curve for f at the output of PEF(f ).</formula><p>Corollary 1 is a direct application of Theorem 1. A formal proof is given in Appendix C.2. The corollary is of interest for two reasons. First, its simpler notation is likely to cover many industrial applications containing a unique redundant portion with parallel systems. Second, Corollary 1 is tight in the following sense.</p><p>Proposition 1 (The result in Corollary 1 is tight with N = 2 and leaky-bucket-constrained flows, in the family of variable-bit-rate (VBR) arrival curves.). For any leaky-bucket arrival curve γ r,b , for any set of values</p><formula xml:id="formula_11">d 1 , D 1 , d 2 , D 2 ∈ R such that d 1 ≤ D 1 and d 2 ≤ D 2 ,</formula><p>there exists a flow f with arrival-curve α f = γ r,b and no minimum packet length whose content is replicated and sent to two systems S 1 and S 2 in which the packets of f suffer a delay bounded in [d 1 , D 1 ] and [d 2 , D 2 ] respectively; the sum of the outputs of the two systems is then processed by a packet-elimination function PEF n (f ), such that, the arrival curve α * f defined in (3) is the best VBR arrival curve for f at the output of PEF n (f ).</p><p>Note that, due to the inherent nature of the PEF processing packets, there could exist staircase arrival-curves that fit the worst-case traffic even better than the arrival curve provided in Corollary 1. However, deterministic computational tools process concave piecewise-linear arrival-curves better than staircase arrival-curves <ref type="bibr" target="#b31">[32]</ref>. Proposition 1 proves that we obtain the best arrival-curve in the family of concave piecewise-linear arrival-curves with two segments or less.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Intuition of the Proof with the Toy Example:</head><p>We give an intuition of the proof of Proposition 1 by using the toy example of Fig. <ref type="figure" target="#fig_10">2</ref>. Our goal is to obtain a cumulative function R * (t) at the output of PEF such that t → R * (t) -R * (s) "perfectly fits" the arrival curve γ 2r0,4b0 ⊗ γ r0,8b0 , for some observation starting time s (as in Fig. <ref type="figure" target="#fig_7">12</ref>). In the scenario of Fig. <ref type="figure" target="#fig_39">3</ref>, we already achieved a peak rate of 2r 0 by using a disconnection of the short link for a duration equal to the delay difference between the two paths. To obtain the worstcase burst, we now simply need to use the jitter within each path and synchronize the moments when the maximum burst on each path reaches the PEF. This is done by using the trajectory shown in Fig. <ref type="figure" target="#fig_9">14</ref>. Here, Packet 1 suffers the maximal delay on the long path and the following packets suffer only 6 t.u. This causes Packets 1 and 2 to exit D at the same time. We do the  same with Packets 7 and 8 through C and we synchronize these two events at the same time, so that four packets simultaneously exit the PEF at t.u. 8. In the figure we spread the packets within t.u. 8 for ease of reading, but they exit at the exact same time (t.u. 8). Because of this, we can also put an arbitrary order of arrivals among them (in a real-life system it means that there exists a very small difference in their reception instants).</p><p>If we start counting the packets at Time Unit 8, we observe the cumulative arrival function shown in dashed blue in Fig. <ref type="figure" target="#fig_7">12</ref>, for which it is clear that the arrival curve in solid red is the best concave piecewise-linear envelope with two segments. The formal proof of Proposition 1 in Appendix C.3 extends the intuition for any choice of values for r, b, d 1 , d 2 , D 1 , D 2 (assuming no minimal packet length).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="5.2">Reordering Introduced by the Packet Replication and Elimination Functions</head><p>In Sec. 5.1 we provide a characterization of the traffic at the output of a PEF in the form of an arrival curve. The arrival curve can then be used to compute delay and backlog bounds on subsequent vertices, from which we can obtain the ETE delay bounds. However, as we can observe in the toy example (Figures <ref type="figure" target="#fig_39">3</ref> and<ref type="figure" target="#fig_9">14</ref>), the data units at the output of the PEF are out-of-order compared to the input. The misordering of the flow's data units cannot be captured by arrival curves. As described in Sec. 2, it still has an effect on the performances of time-sensitive networks <ref type="bibr" target="#b27">[28]</ref>.</p><p>Two metrics are of interest when quantifying misordering in time-sensitive networks: the reordering late time offset (RTO) and the reordering byte offset (RBO) <ref type="bibr" target="#b27">[28]</ref>, <ref type="bibr" target="#b32">[33]</ref>.</p><p>In this paper we focus on the mis-ordering as a consequence of the redundancy. Thus we are only interested in defining reordering metrics after the PEF, relative to a reference order defined before the PRF.</p><p>For a flow f and two vertices n [resp., o] containing the observation points v [resp., w] such that f is packetized at v and w, n is not an EP-vertex of G(f ) and o is a diamond ancestor of n in G(f ), we denote by λ v (f, w) the RTO of the data units of flow f at the observation point v, with respect to their order at w, as defined in <ref type="bibr" target="#b27">[28]</ref>, <ref type="bibr" target="#b32">[33]</ref>. With the restrictions on v and w, λ v (f, w) is well defined from <ref type="bibr" target="#b27">[28]</ref>, <ref type="bibr" target="#b32">[33]</ref> because each data unit of f is observed at most once at w and v, thus the arrival instant of each data unit at w and v is well defined. Similarly, with v and w meeting the same conditions, we denote by π v (f, w) the RBO, as defined in <ref type="bibr" target="#b27">[28]</ref>, <ref type="bibr" target="#b32">[33]</ref> of the data units of flow f at v with respect to their order at the reference w.</p><p>If POF n ({f }, o) is a packet-ordering function that forces the data units of f to be in the same order as their order at the output of o, then with v being the input of POF n , λ v (f, o * ) gives the minimum value for the timeout parameter T of POF algorithm and π v (f, o * ) gives its required buffer size [28, §IV.B]. In general, if a destination d does not support any mis-ordering, then a function POF d ({f }, source(f )) that uses the reference o = source(f ) is placed just before delivery to the application. The end-toend RTO and RBO λ d (f, source(f )), π d (f, source(f )) must be obtained to correctly configure this POF.</p><p>Proposition 2 (RBO ≤ α(RTO)). For a flow f , and two observations points v, w meeting the above conditions, if</p><formula xml:id="formula_12">λ v (f, w) &lt; +∞, then π v (f, w) ≤ α v,f (λ v (f, w))<label>(4)</label></formula><p>The result is directly obtained by writing the definitions of the two notions. Its formal proof is in Appendix C.4. Proposition 2 combined with our results from Sec. 5.1 show that we can focus on the effect of the PEF on the RTO to also obtain a bound on the RBO. </p><p>where |x| + max(0, x), α f,a * is an arrival curve for f at the output of the input port within a and α ↓ f,a * is its lower pseudo-inverse 2 defined in <ref type="bibr">[34, §10]</ref>.</p><p>Theorem 2 is a direct application of <ref type="bibr" target="#b27">[28,</ref><ref type="bibr">Thm. 5]</ref> for the system located between the diamond ancestor and the output of the PEF, see Appendix C.5.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Application to the Toy Example:</head><p>The lower-pseudo inverse of α f,B * = γ r0,b0 in the toy example of Fig. <ref type="figure" target="#fig_10">2</ref> </p><formula xml:id="formula_14">is α ↓ f,B * : x → |x -b 0 | + /r 0 .</formula><p>In the toy example, all packets have the same size of one d.u., so α ↓ f,B * (2L min ) = 1 t.u. Applying Theorem 2 proves that the RTO at the output of the PEF within F in Fig. <ref type="figure" target="#fig_10">2</ref> is bounded by 6 t.u. In the trajectory of Fig. <ref type="figure" target="#fig_9">14</ref>, we observe that d.u. 6 is late by 4 t.u. with respect to d.u. 7. The worst-case RTO is hence comprised between 4 and 6 t.u.</p><p>Assume now that we place, after the PEF, the function POF F ({f }, B), a packet-ordering function enforcing for f the order defined at B (Fig. <ref type="figure" target="#fig_34">15</ref>). With Theorem 2, we know that its timeout T should be of at least 6 time units and it requires a buffer of at least 14 d.u. (Proposition 2 and Fig. <ref type="figure" target="#fig_7">12</ref>). In the trajectory of Fig. <ref type="figure" target="#fig_9">14</ref>, the POF receives the</p><formula xml:id="formula_15">2. For f : R → R ∪ {-∞, +∞} a wide-sense increasing function, its lower pseudo inverse f ↓ is defined by f ↓ (y) = inf{x|f (x) ≥ y}. Packet Replication Function (PRF) [0, 1] [6, 7] PEFF (f ) POFF ({f }, B) D C outC outD F B in out outPof</formula><p>Fig. <ref type="figure" target="#fig_34">15</ref>. Toy example of Fig. <ref type="figure" target="#fig_10">2</ref>, with a packet-ordering function (POF) placed after the PEF to correct the mis-ordering caused by the redundancy.  traffic from the Line "out" and forces the data units to be in the same order as on the Line "in". The resulting output is given in Fig. <ref type="figure" target="#fig_11">16</ref>. We observe two main characteristics of the POF; they have been widely studied in <ref type="bibr" target="#b27">[28]</ref>. First, we note that all data units continue to have a delay upper-bounded by 7 t.u. Indeed, none of the data units has been lost for the POF thus the POF does not increase the end-to-end (ETE) latency of the data units <ref type="bibr" target="#b27">[28,</ref><ref type="bibr">Thm. 4]</ref>.</p><p>Second, we observe that the traffic at the output of the POF (Fig. <ref type="figure" target="#fig_11">16</ref>) is much more bursty than the traffic at the output of the PEF (Line "out", Fig. <ref type="figure" target="#fig_9">14</ref>). We observe that seven d.u. exit the POF at the same time (t.u. 12). The traffic is hence no more constrained by α P EF * = γ 2r0,4b0 ⊗ γ r0,8b0 , the arrival curve of the flow at the output of the PEF, obtained by applying Theorem 1 (Sec. 5.1). We apply Corollary 1 of <ref type="bibr" target="#b27">[28]</ref>: If none of the data units is lost for the POF (at least one replicate of each data unit reaches the PEF), then α P OF * = γ r0,8b0 is an arrival curve of f at the output of the POF. The trajectory in Fig. <ref type="figure" target="#fig_11">16</ref> is indeed γ r0,8b0 -constrained. If both replicates of a data unit can be lost, then γ r0,8b0+T r0 is an arrival curve for f at the output of the POF, with T being the timeout parameter of the POF.</p><p>Placing a POF after a PEF hence comes with benefits and drawbacks, as summarized on the first line of Table <ref type="table" target="#tab_10">3</ref>.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6">ANALYSIS OF THE INTERACTIONS BETWEEN PREFS AND TRAFFIC REGULATORS</head><p>Sec. 5.2 shows that a packet-ordering function (POF) can be used after a PEF to remove the mis-ordering caused by the redundancy. Similarly, regulators can be used after a PEF to remove the burstiness increase caused by the redundancy, especially if the downstream systems cannot support the worst-case traffic of the PEF output (Theorem 1).</p><p>Traffic regulators come in two flavors: per-flow regulators (PFRs) and interleaved regulators (IRs). Both are configured with per-flow contracts, {σ f,n } f , and force each flow f to be σ f,n -compliant, delaying the packets if required.</p><p>Hence, when the shaping curve σ f,n for each flow f equals the arrival curve that the flow had before the redundant section, then the regulators remove any burstiness increase caused by the redundancy, thus making the redundancy transparent to the downstream nodes. However, © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See <ref type="url" target="https://www.ieee.org/publications/rights/index.html">https://www.ieee.org/publications/rights/index.html</ref> for more information. regulators are themselves queuing systems and their effect on the worst-case ETE delay should be accounted for.</p><formula xml:id="formula_16">a PEF n (f ) REGn({f }, a) S S n [d, D] [d , D ] σ n,f α f,a *</formula><p>In this section, we first analyze the interactions between PEF and a regulator placed directly after. We evaluate how these interactions affect the ETE delay guarantees of the flows, and we show that the conclusions highly depend on the nature of the regulator (either PFR or IR). We last analyze the effect of a POF placed after the PEF and before the REG.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6.1">Delay Bound Analysis of PREFs Combined with Per-Flow Regulators</head><p>Consider a vertex n containing a function PEF n (f ) and consider a diamond ancestor a of n in G(f ) (Fig. <ref type="figure" target="#fig_12">17</ref>). Between a and n, the flow follows G(f ), with potentially multiple vertices and multiple paths. Consider the system S between the output of a and the output of PEF n (f ) (solid box in Fig. <ref type="figure" target="#fig_12">17</ref> After S, and still within vertex n (dashed oval on the right of Fig. <ref type="figure" target="#fig_12">17</ref>), we place a PFR: REG n ({f }, a) with shaping curve σ n,f α f,a * . We now consider the system S made of S followed by the PFR, and we are interested in the delay bounds [d , D ] for the non-lost data units through S . If S was FIFO, we could use the essential shaping-for-free property of regulators <ref type="bibr" target="#b8">[9]</ref>, <ref type="bibr" target="#b11">[12]</ref>: As f is σ f,n -constrained at the input of S, the regulator would not have increased the ETE delay of the data units; we write this as D = D. But, as S is not FIFO, the PFR does not guarantee the shaping-for-free property, as we show on the toy example.</p><p>Application to the Toy Example: Fig. <ref type="figure" target="#fig_14">18</ref> considers the toy example from Fig. <ref type="figure" target="#fig_10">2</ref>, to which we add the PFR REG n ({f }, B) within vertex F (dashed oval on the right in Fig. <ref type="figure" target="#fig_14">18</ref>), just after the function PEF F (f ). With the above notations, system S is between the observation points "in" and "outPEF", with the delay bounds [d, D] = [0, 7] t.u. System S is between the observation points "in" and "outPFR", and we seek to obtain a delay-bound D for S . Fig. <ref type="figure" target="#fig_34">19</ref>. An acceptable trajectory on the toy example, which shows that the delay bound D through S is at least 14 t.u. The delay of the data units from "in" to the observation points are given on the left of the packets.</p><p>Fig. <ref type="figure" target="#fig_34">19</ref> presents an acceptable trajectory at the different observation points using the same input "in" as in Fig. <ref type="figure" target="#fig_39">3</ref>. The path through vertex C forwards all packets with a constant delay of 7 t.u., whereas the path through vertex D drops Packets 1 to 6, then forwards Packet 7 with a delay of 1 t.u. (its worst-case delay) and finally forwards the following packets with a delay of 0 t.u. (its best-case delay). The line "outPEF" gives the resulting trajectory at the output of the PEF that removes any duplicates.</p><p>Based on its input ("outPEF") and on its shaping curve (σ f,F = α f,B * = γ r0,b0 ), the PFR outputs the packets as shown on the Line "outPFR". Recall that the PFR REG n ({f }, a) is itself a FIFO system (model in Sec. 4.3).</p><p>We observe that the d.u. 6 suffers through S a total delay of 14 t.u.; this is twice the delay upper-bound D through S alone. We note that this high delay for d.u. 6 can be explained by the time needed by the PFR to process d.u. 1 to 5 and 7 to 13 that arrived before d.u. 6 and to pace them as required by the shaping curve. This is done even though d.u.s 7 to 13 are out of order ("too early") with respect to d.u. 6. At "outPFR", the packet containing d.u. 6 is late with respect to d.u. 7 by 12 t.u. Hence, the reordering late time offset (RTO) of the flow through S (i.e., at the output of S , using the input of S as reference) is at least 12 t.u., while it was bounded by only 6 t.u. through S alone (Sec. 5.2).</p><p>We observe that the output of the PEF is bursty and out of order, and the PFR placed afterwards paces the packets to remove the burstiness. But, by doing so, the PFR worsens the mis-ordering of the packets (12 instead of 6) and increases the delay of the late packets (Packet 6), thus increasing the worst-case ETE delay (at least 14 t.u.). As such, the regulator comes with a delay penalty. With PFRs configured with leaky-bucket shaping curves, we can upperbound this delay penalty for any networks.</p><p>Theorem 3 ( Bound on the delay penalty of a PFR placed after a PEF). Assume that the PFR REG n ({f }, a) is configured with a leaky-bucket shaping curve σ n,f = γ r,b , and that σ n,f © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See <ref type="url" target="https://www.ieee.org/publications/rights/index.html">https://www.ieee.org/publications/rights/index.html</ref> for more information.</p><p>a PEF n (f 1 ) . . .</p><formula xml:id="formula_17">PEF n (f q ) REG n (F, a) {f i } i∈ 1,q S n D D {σ n,fi } i∈ 1,q</formula><p>Fig. <ref type="figure" target="#fig_36">20</ref>. Notations for the analysis of the interactions between PEFs and an interleaved regulator (IR) for an aggregate of flows</p><formula xml:id="formula_18">F = {f i } i∈ 1,q .</formula><p>is an arrival curve of f at the input of S. If d [resp., D] is a lower [resp., an upper] bound on the delay of f through the system S (Fig. <ref type="figure" target="#fig_12">17</ref>  <ref type="figure" target="#fig_34">19</ref>, it is also the worstcase delay. Applying Corollary 2 to the toy example gives that 13 t.u. is an upper-bound on the RTO of the flow at the output of the PFR, with respect to the order of the packets at B. Data Unit 6 in the trajectory achieves a reordering offset of 12 t.u. (with respect to d.u. 7), thus the worst-case RTO at the output of S in the toy example is between 12 and 13 t.u.</p><p>When a PFR is used after a PEF, the current subsection shows that the shaping-for-free property does not hold, but Theorem 3 captures the delay penalty by using the servicecurve characterization of PFRs, combined with the arrival curve obtained from Theorem 1. As we do not know any service-curve characterization for an IR, we cannot apply the Theorem 3 to interleaved regulators (IRs).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6.2">Instability of the Interleaved Regulator Placed after a Set of PEFs</head><p>With an interleaved regulator (IR), several flows F = {f i } 1≤i≤q , sharing the same redundant section a → n are processed by the same IR REG n (F, a), after their respective elimination function PEF n (f i ) for i ∈ 1, m (see Fig. <ref type="figure" target="#fig_36">20</ref>).</p><p>When the aggregate contains a unique flow, then the IR is a PFR. Therefore, we do not expect the shaping-for-free property to be valid with the IR either. However, as opposed to the PFR, we exhibit an adversarial model in which any IR placed after the PEFs and processing several flows yields unbounded latencies.</p><p>Theorem 4 (Instability of the IR placed after the PEFs). Consider a network with graph G and consider q ∈ N flows f 1 , . . . , f q (see Fig. <ref type="figure" target="#fig_36">20</ref>). Take two vertices a and n such that, for each i ∈ 1, q , a is a diamond ancestor of n in G(f i ). Assume that (a) for each i ∈ 1, q , vertex n contains PEF n (f i ), a PEF for f i , (b) vertex n contains REG n ({f i } i∈ 1,q , a), an interleaved regulator (IR) for the aggregate, placed after the PEFs, with the same leaky-bucket shaping curve for each flow: ∀i ∈ 1, q , σ fi,n = γ r,b , (c) all graphs {G(f i )} i∈ 1,q share at least two different paths P 1 , P 2 to reach n from a. For q ∈ N and r, b,</p><formula xml:id="formula_19">d 1 , d 2 , D 1 , D 2 ∈ R + with d 1 ≤ D 1 , d 2 ≤ D 2 and D 1 ≤ D 2 (flipping the indexes if required), if (d) b is greater than the minimum packet length, (e) d 1 , D 1 , d 2 , D 2</formula><p>are not all equal, and (f) q ≥ q min with</p><formula xml:id="formula_20">q min 2r |d 2 -D 1 | + b + 2 + 1</formula><p>then there exists an adversarial traffic arrival at a for each of the q flows and an adversarial implementation of the paths {P j } j such that 1/ each flow f i is γ r,b -constrained at a, 2/ for each data unit m belonging to one of the flows {f i } i∈ 1,q , if m is not lost on P 1 [resp., on P 2 ], then its delay along P 1 [resp., along</p><formula xml:id="formula_21">P 2 ] is within [d 1 , D 1 ] [resp., within [d 2 , D<label>2</label></formula><p>]], 3/ flows {f i } i have an unbounded latency within the IR, 4/ P 1 and P 2 are both FIFO, 5/ the system S made of the sub-graph of G between a and the output of the PEFs (Fig. <ref type="figure" target="#fig_36">20</ref>) remains lossless and FIFO-per-flow for each f i .</p><p>The proof is in Appendix C.7. It relies on the trajectory developed for the proof of <ref type="bibr" target="#b13">[14,</ref><ref type="bibr">Prop. 7.3]</ref>. The main idea is to use the mis-ordering caused by PREFs and the property that the IR looks only at the head-of-line packet to generate blocking situations with always-increasing packet delays.</p><p>Note that only Properties 1/ to 3/ of Theorem 4 are required to prove the validity of the adversarial model. However, our adversarial model provides additional Properties 4/ and 5/; they are of interest when considering the solutions for preventing the instability, as we illustrate in Sec. 6.3. Theorem 4 also provides a mean to obtain the following wider result, whose proof is in Appendix C.8.</p><p>Corollary 3 ( Instability of the interleaved regulator after a non-FIFO system, even if the system is FIFO-per-flow and lossless). For any D max &gt; 0, r &gt; 0, b greater than the minimum packet length, and for any IR that processes 3 or more flows {f i } i using the same leaky-bucket shaping curve γ r,b , there exists a lossless FIFO-per-flow system S and a γ r,b -constrained adversarial generation of each flow at the input of S such that, when the IR is placed after S, the delay of the flows through S is upper-bounded by D max but the delay of the flows through the IR is not bounded.  </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="6.3">Effect of the Packet-Ordering Function on the Combination of a PEF with Traffic Regulators</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Configuration</head><p>Benefits with respect to the PEF alone Drawbacks with respect to the PEF alone PEF + POF</p><p>• Destination receives the data units in order.</p><p>• Reordering-for-free: the POF does not increase the end-to-end delay bounds (when at least one replicate per d.u. is received).</p><p>• The POF worsens the arrival curve; this can lead to higher delay bounds in downstream nodes.</p><p>• Increased hardware complexity (Figure <ref type="figure">8</ref>).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>PEF + REG</head><p>• Output traffic keeps the arrival constraints it had before the redundant section, resulting in smaller delay bounds in downstream nodes.</p><p>• Delay penalty due to mis-ordering: With PFR: delay penalty with a guaranteed maximum delay. With IR: unbounded delay.</p><p>• Increased hardware complexity (Figure <ref type="figure">9</ref>).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>PEF + POF + REG</head><p>• Destination receives the data units in order.</p><p>• Reordering-for-free and shaping-for-free: [POF + REG] does not increase the delay bounds (when at least one replicate per data unit is received).</p><p>• Output traffic keeps the same arrival constraints as it had before the redundant section.</p><p>• Increased hardware complexity (Figures <ref type="figure">8</ref> and<ref type="figure">9</ref>).</p><formula xml:id="formula_22">Packet replication function (PRF) [0, 1] [6, 7] PEFF (f ) POFF ({f }, B) REGF ({f }, B) D C outC outD F B in outPOF outPEF outPFR</formula><p>Fig. <ref type="figure" target="#fig_36">21</ref>. Toy example of Fig. <ref type="figure" target="#fig_10">2</ref>, to which we added a POF followed by a PFR. We observe that the drawbacks of the regulators appear symmetrical with respect to those of the POF. For example, a main issue of the POF is the burstiness of the traffic at its output; this can be corrected by using a regulator. A main issue of the REGs is the delay penalty caused by the out-oforder input; this can be solved by placing a POF just before.</p><p>The combination PEF + POF + REG appears as a potential solution for keeping the benefits of both the POF and the REG without their main drawbacks. We first analyze this new configuration on the toy example.</p><p>Application to the Toy Example: Let us first add a POF before the PFR of the single-flow situation in Fig. <ref type="figure" target="#fig_14">18</ref>. It gives the situation presented in Fig. <ref type="figure" target="#fig_36">21</ref>. The POF enforces the order of the data units as seen at B. Assume for example that it receives the traffic defined by the line "outPEF" of Fig. <ref type="figure" target="#fig_34">19</ref>. Then the POF outputs the data units as on Line "outPOF" of Fig. <ref type="figure" target="#fig_16">22</ref>. The PFR further processes this trajectory to spread the data units as per the flow's contract and outputs them as on the Line "outPFR" of Fig. <ref type="figure" target="#fig_16">22</ref>. The resulting traffic is compliant with the initial arrival curve α r0,b0 . We observe that all the data units have kept an ETE delay below 7 t.u.</p><p>When using an interleaved regulator, Property 5/ of Theorem 4 shows that the re-sequencing must be performed globally on the aggregate processed by the IR, and not for each flow individually. The above observations are summarized in the following result, valid for both PFRs and IRs.</p><p>Theorem 5 ( Elimination-resequencing-reshaping is for free). Consider a network with graph G and consider a set a PEFn(f1)</p><p>. . .</p><formula xml:id="formula_23">PEFn(fm) POFn(F , a) REGn(F , a) S S † S F n [d, D] [d , D ]</formula><p>Fig. <ref type="figure" target="#fig_39">23</ref>. Notations of Theorem 5. An aggregate re-sequencing followed by a REG is placed after the PEFs. We are interested in the delay bounds through system S .</p><p>of one or more flows F. Take a and n two vertices of G such that for each flow f ∈ F, a is a diamond ancestor of n in G(f ) (see Fig. <ref type="figure" target="#fig_39">23</ref>). Assume that the CBQS within n is preceded by the following functions, in this order: a set of parallel packet-elimination functions The proof in Appendix C.9 first applies <ref type="bibr" target="#b27">[28,</ref><ref type="bibr">Theorem 4]</ref> to obtain the delay bounds through the system S † on Fig. <ref type="figure" target="#fig_39">23</ref>. This system is FIFO thus [9, Thm. 5] can be applied.</p><formula xml:id="formula_24">{PEF n (f )} f ∈F</formula><p>Therefore, the "PEF + POF + REG" configuration provides all the benefits on the network performance bounds associated with the "PEF + POF" and the "PEF + REG" configurations, removing most of their drawbacks. This is summarized on the last line of Table <ref type="table" target="#tab_10">3</ref>. Only the hardware cost remains a drawback, as the models of Figures <ref type="figure">8</ref> and<ref type="figure">9</ref> must be implemented. From <ref type="bibr" target="#b34">[35]</ref>. to compute end-to-end delay bounds in a representative industrial use-case that contains PREFs. FP-TFA has been chosen because it can compute delay bounds for general topologies, i.e. even for those with cyclic dependencies <ref type="bibr" target="#b12">[13]</ref>.</p><p>Network Description: We consider the Volvo core TSN network <ref type="bibr" target="#b34">[35]</ref>. Its physical topology is given in Fig. <ref type="figure" target="#fig_18">24</ref>. The network contains two redundant control units P1 and P2 [35, <ref type="bibr">Page 4]</ref>. Each of the four micro-controller units (MCUs) acts as a gateway between the core TSN network and the local networks running on legacy protocols. We hence assume that the MCUs are legacy devices that support only 100Mbps full-duplex links and cannot implement the recent technologies of TSN or DetNet, such as PREOFs. We assume that their applications cannot handle any duplicate.</p><p>Flow Description: We focus on the Command and Control class and consider four different periodic traffic profiles within the class. Their characteristics are based on <ref type="bibr" target="#b34">[35,</ref><ref type="bibr">Page 13</ref>] and listed in Table <ref type="table" target="#tab_12">4</ref>. For each traffic profile and for each MCU, there exist a multicast flow that carries the sensor data from the MCU to both P1 and P2 and a unicast flow per control unit (2 in total) that carries the commands from the control unit to the MCU (see Table <ref type="table" target="#tab_13">5</ref>).</p><p>To meet stringent loss-ratio requirements, flows are redounded by using PREFs, whenever two alternative paths can be found for a (source, destination) tuple. In total, the network contains 48 flows, including 40 redounded flows, 16 of which are also multicast.</p><p>Service Description: As the class of interest is of highest priority, each CBQS offers to the aggregate a service rate equal to the capacity of the transmission link (either 100Mbps or 1Gbps). We also assume that the technological latency within each output port is below 2µs, and we neglect input-port and switching-fabric latencies.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Comparison of the Analytical Models:</head><p>We first set the load of the network at 5.2%. We compare the intuitive approach from Sec. 2.1 with the tight model that relies on Theorem 1. In Fig. <ref type="figure" target="#fig_36">25</ref>, we provide the deterministic lower and upper bounds of the latency of each flow for each of its destinations. The delay upper-bounds are obtained by using the fix-point version of FP-TFA [13, § VI.C], modified for taking into account the effect of PREFs with either the intuitive approach or the tight model. The exact bestcase and worst-case latencies for the flow are guaranteed to be within the provided interval, thus the smaller the guaranteed interval the better the model.</p><p>We observe that an analysis of the network by using the tight model concludes that all flows meet their deadline, whereas the same analysis that uses the intuitive approach shows that four flows may violate their deadlines. The delay bounds for all flows, including those that are not redounded by PREFs, are improved with the tight model. For example, the flow in a box in Fig. <ref type="figure" target="#fig_36">25</ref>, from P2 to MCU3, is not redounded, but the tight model still computes a guaranteed delay interval tighter than with the intuitive approach. Indeed, the flow shares the link SWA → SW3 and SW3 → MCU3 with redounded flows, for which the burst bounds obtained with the tight model are smaller. Hence, the delay that this flow suffers in SWA and SW3 has a better bound with the tight model than with the intuitive one.</p><p>Comparison of the Technological Solutions: Fig. <ref type="figure" target="#fig_36">25</ref> shows that, at low network load, the network edges withstand the peak rate an increased burstiness at the output of the PEFs, even if they rely only on 100Mbps links.</p><p>We now consider the same network but we increase the load up to 88% by reducing the period of each flow. We focus on the four redounded flows from P2 to MCU1. Each of them is processed by a PEF within SWB to eliminate the duplicates coming from SW2 and SWA and each of them present a peak rate and and increased burstiness after its PEF.</p><p>We evaluate the opportunity to shape the four flows with their source profile before they compete with the four other © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See <ref type="url" target="https://www.ieee.org/publications/rights/index.html">https://www.ieee.org/publications/rights/index.html</ref> for more information. flows coming from P1 in the output port of SWB. We can either use four per-flow regulators (PFRs) (each processing a unique flow), or we can use a unique interleaved regulator (IR), because they all share the same reference point P2. Fig. <ref type="figure" target="#fig_19">26</ref> focuses on flow C_P2_MCU1_S. The baseline guaranteed delay interval (in the middle) is obtained from the application of the tight model without any regulator. We note that the flow is schedulable, but as the network load is higher, its safety margin is reduced with respect to Fig. <ref type="figure" target="#fig_36">25</ref>.</p><p>The dotted bars on the left of the baseline represent the guaranteed delay intervals obtained when the flows are processed, either with an IR (far-left), or with four independent PFRs, but without using any POF. For the IR, no guarantee can be obtained per Theorem 4. For the PFR, the flow remain schedulable but its safety margin is drastically reduced by the delay penalty of the PFR (Theorem 3).</p><p>The dashed bars on the right of the baseline represent the guaranteed delay bounds when using the combination POF+REG after the PEF, assuming that for each data unit, at least one replicate is not lost. On the far-right, the delay bounds with four per-flow POFs placed before the PFRs (as in Fig. <ref type="figure" target="#fig_5">11</ref>), and the other bar represents the delay bounds with a unique POF for the aggregate before the IR (as in Fig. <ref type="figure" target="#fig_4">10</ref>). The shaping-for-free property holds in both cases, thus their delay bounds are equal. They represent a 13% improvement with respect to the baseline. Indeed, the regulators reduce the downstream burst, thus reducing the worst-case delay in the low-capacity link SW1→MCU1.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="8">CONCLUSION</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="9">CONCLUSION</head><p>We provide a toolbox of network-calculus results that give theoretical foundations for the worst-case analysis of DetNet PREOF (packet replication, elimination and ordering functions) and TSN FRER (frame replication and elimination for redundancy). The toolbox contains an output-arrival-curve characterization of the packet-elimination function that is tighter than any other variable-bit-rate or leaky-bucket arrival curves. It also contains a quantification of the amount of mis-ordering caused by the redundancy.</p><p>We further analyze the interactions between the packetelimination function, the packet-ordering function and traffic regulators. We show that the latter can cancel the burstiness increase caused by the redundancy. But when traffic regulators are placed immediately after the packetelimination function, they do not enjoy the shaping-for-free property: Per-flow regulators induce a delay penalty that we upper-bound, whereas interleaved regulators (such as TSN Asynchronous Traffic Shapers) induce unbounded latencies. Shaping-for-free can be retrieved if the data units are reordered after the elimination function and prior to shaping.</p><p>The users of TSN FRER and TSN asynchronous traffic shaping (ATS) are invited to bear in mind the conflicting interactions outlined in this paper, as no packet-ordering function is available within TSN at the time of writing.</p><p>We finally apply our theoretical and practical results on a representative industrial use-case. The latency bounds obtained with the toolbox are significantly tighter than those obtained with an intuitive approach. We also highlight the end-to-end latency gain obtained on the use-case when traffic regulators are placed after the redundant section with a reordering function in between. The system model proposed in Section 4 results from an analysis of both the DetNet PREOFs <ref type="bibr" target="#b3">[4]</ref> and the TSN FRER <ref type="bibr" target="#b17">[18]</ref> documents. The present appendix can be used by the TSN and the DetNet communities for evaluating the applicability of our results in the TSN and DetNet contexts. The appendix highlights the similarities and the differences between the terms, the notions and the assumptions used in our system model with those that are used in the DetNet and TSN documents.</p><p>The IETF DetNet documents focus on the network-layer mechanisms whereas IEEE TSN documents focus on the link-layer mechanisms. A notion can hence have different terms depending on the considered layer. For example, within DetNet, data units are encapsulated within packets and a coherent sequence of them that originates also from a single source is a DetNet flow [4, §2.1]. Within TSN, data units are carried by frames, and a coherent sequence of them that originates from the same source is a stream <ref type="bibr">[18, §3]</ref>. In the paper, we use the terms packets and flows. These two adjectives are not used in our paper. Indeed, the model of Section 4 is based on directed acyclic graphs (DAGs) and on the knowledge of positions of the elimination points. This model is compatible with the compound and member terms but is also more versatile. For example, take the flow f defined by the graph in Figure <ref type="figure">5</ref> and by the knowledge that F contains a PEF for f . If we focus on destination G, we could say that the compound flow with path A → B is separated into duplicate member flows with paths B → C → F and B → D → F and that these member flows are merged back into the compound flow for path F → G. But the previous distinction between compound and member flows cannot be applied for destination E. Neither the DetNet documents nor the TSN documents clarify that the compound/member distinction depends on the destination that is considered. By focusing on DAGs and by not using the two adjectives, we remove the above ambiguity.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>A.1 Directed Acyclic Graphs (DAGs) versus</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>A.2 Replicates versus Duplicates</head><p>Neither <ref type="bibr" target="#b17">[18]</ref> nor <ref type="bibr" target="#b3">[4]</ref> provides a formal definition for replicates and duplicates. The TSN FRER standard even use both "eliminate duplicate packets" [18, §7.1.1] and "eliminates the replicates" [18, §1.6]. However, both documents seem to adhere to the following convention.</p><p>-Replicates are defined as identical copies of the same packet (of the same piece of data).</p><p>-Duplicates are defined with respect to a given location or for a given function (e.g., for a PEF): A packet is a duplicate at a given location [resp., for a given function] if an identical copy of itself (another replicate of the same piece of data) has been observed previously at the location [resp., by the function].</p><p>We re-use the same convention in our paper. The PEF is hence a function that forwards the first replicate and drops the duplicates, it eliminates the duplicates.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>A.3 Considered Types of Failures</head><p>Within DetNet, PREOFs provide service protection that "aims to mitigate or eliminate packet loss due to equipment failures, including random media and/or memory faults." [4, §3.2.2.]. Similarly, "FRER can substantially reduce the probability of packet loss due to equipment failures" [18, §1.2].</p><p>In the paper, we consider only failures that cause packets to be lost on the transmission links. As described in Section 4.3, this can model various real-life failures that lose packets but only if they do not affect the service provided to the non-lost packets. For example, random media packet losses fall within our model. Similarly, we can model a device that shuts down: in this case, all its links lose all packets. However, failures that cause a network element to provide less service than its minimum-service contract or that cause a source to generate more traffic than its maximum-traffic contract are not considered in our model but could be considered using tools from stochastic network calculus (SNC) <ref type="foot" target="#foot_1">3</ref> .</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>A.4 Packet Replication Function (PRF) and Multicast Mechanisms</head><p>In DetNet, "Flow replication [. . . ] can be performed by, for example, techniques similar to ordinary multicast replication" Our system model follows the same rationale. The packet-replication function (PRF) is implemented by the switching fabric that already handles the duplication of packets for multicast flows. The rationale also motivates the choice of DAGs for modeling flow paths. Indeed, DAGs represent a natural extension of multicast trees.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>A.5 Packet Ordering Function (POF) and its Position with Respect to the PEF</head><p>In [4, §2.1], a packet-ordering function (POF) is defined as a function that "reorders packets within a DetNet flow that are received out of order". In TSN, there exists no function with similar goals as of March 2022. In fact, in-order-delivery was a goal in an early draft version of the FRER standard, but it was latter removed due to hardware considerations 4 .</p><p>In our model, we extend the definition of the DetNet POF and allow the function to consider an aggregate of flows. As we show in Section 6, this aggregate reordering is necessary for obtaining delay bounds when interleaved regulators (IRs) are placed after the elimination function, and per-flow reordering is not sufficient to guarantee bounded latencies when an IR is placed after the PEF.</p><p>In where packet mis-ordering is seen as a side-effect of the PEF, for which a POF is a remedy when placed after the PEF. Additionally, the ongoing draft for the POF states that, "the [POF] algorithm assumes that a Packet Elimination Function (PEF) is performed on the incoming packets before they are handed to the POF function. Hence, the sequence of incoming packets can be out of order or incomplete but cannot contain duplicate packets" [29, §4.1]. In our model, we follow the same assumption.</p><p>The internal algorithm of the packet-ordering function (POF) also relies on a timeout parameter, that is denoted by T in our paper and in <ref type="bibr" target="#b27">[28]</ref> and that is called "POFMaxDelay" in <ref type="bibr" target="#b28">[29]</ref>. As its name suggest, it corresponds to the maximum delay that a data unit can spend in the POF, even if the previously-expected data unit has not been received so far. The timeout prevents the POF from holding forever a data unit if the previously-expected data unit has been lost. To prevent spurious transmission of out-of-order data units, the timeout T cannot take any value. In our paper, we always assume that T follows the recommendations of [28, §IV.B], which are also consistent with <ref type="bibr">[29, §4.3</ref>]. This configuration depends on the value of the reordering late time offset (RTO) at the location of the POF and our Theorem 2 provides this value for when the POF is placed after a PEF.</p><p>The implications of an incomplete sequence of data units for a POF are further analyzed in <ref type="bibr" target="#b27">[28]</ref>. In our Theorem 5, we reuse the results from <ref type="bibr" target="#b27">[28]</ref> and apply them in the case of a POF placed just after a PEF. <ref type="bibr" target="#b3">4</ref>. See Comment 29 at <ref type="url" target="https://www.ieee802.org/1/files/private/cb-drafts/d0/802-1CB-d0-3-dis.pdf">https://www.ieee802.org/1/files/private/ cb-drafts/d0/802-1CB-d0-3-dis.pdf</ref>. For the credentials, consult <ref type="url" target="https://www.ietf.org/proceedings/52/slides/bridge-0/tsld003.htm">https: //www.ietf.org/proceedings/52/slides/bridge-0/tsld003.htm</ref>.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>A.6 Traffic Regulators (REGs) and their Position with Respect to the Other Functions</head><p>Within TSN, asynchronous traffic shaping (ATS) <ref type="bibr" target="#b35">[36]</ref> is a building block that implements the interleaved regulator (IR) model within the TSN bridges. In ATS, each IR (called an ATS Scheduler Group in <ref type="bibr" target="#b35">[36]</ref>) is in the form REG n (F, o) where F is the set of flows that enter n from p, p is a direct parent of n, and o is a direct parent of p. As such, each ATS Scheduler Group can only cancel the burstiness increase within the direct upstream parent p. Our model authorizes more flexibility when defining the aggregate F and the reference o. Within our model, an IR can cancel the burstiness increase caused by any system made of several network elements.</p><p>For example, in the industrial application in Section 7, the IR placed in SWB cancel the burstiness increase caused by the entire system that is located between P2 and SWB (Figure <ref type="figure" target="#fig_18">24</ref>) and that includes a packet-replication function (PRF), two redundant paths with several devices for each, and a packet-elimination function (PEF).</p><p>In the technical documents, there exists an uncertainty on the relative order of the REG and the other PREOFs functions within a device (especially with respect to PEF). The TSN implementation of PEF (called FRER, see Table <ref type="table" target="#tab_0">1</ref>) is defined in <ref type="bibr" target="#b17">[18]</ref> whereas the TSN implementation of regulators (ATS) is defined in <ref type="bibr" target="#b35">[36]</ref>. Their pipeline models, [18, Figure <ref type="figure">8</ref>.2] and <ref type="bibr" target="#b35">[36,</ref><ref type="bibr">Figure 8.13]</ref>, place their respective mechanisms exactly at the same position in the forwarding process (between IEEE802.1Q 8.6.5 Flow metering and IEEE802.1Q 8.6.6 Queuing frames). As of August 2021, no information has been provided on their relative order.</p><p>In our paper, traffic regulators are of particular interest when they are placed after the PEFs, because they can shape the traffic back to the profile it had at the input of the redundant section (second section in Figure <ref type="figure" target="#fig_0">1</ref>). Analyzing the interactions between PREOFs and traffic regulators in this configuration is one of our major objectives in the paper, while placing a regulator before the PEF is equivalent to shaping the traffic within a sub-path of a multicast flow, a situation widely analyzed <ref type="bibr" target="#b10">[11]</ref>- <ref type="bibr" target="#b12">[13]</ref>. If regulators are placed before the PEF, then their effects on the arrival curve of the flow at the input of the PEF, α PEF in , can be computed. Then Item 1/ of Theorem 1 can be applied to obtain the arrival curve of the flow at the output of the PEF, as affected by the regulators placed before. Within DetNet, traffic shaping is also mentioned as one of the mechanisms for providing bounded delivery <ref type="bibr">[4, §4.5]</ref>. The DetNet working group refers to the traffic shapers of DiffServ <ref type="bibr" target="#b18">[19]</ref>. Thus, the traffic shapers that are mentioned in DetNet follow the per-flow regulator (PFR) model, but DetNet also indicates that the "actual queuing and shaping mechanisms are typically provided by the underlying subnet" </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>APPENDIX B WHAT NETWORK CALCULUS RESULTS REMAIN VALID FOR NON-LOSSLESS NON-FIFO SYSTEMS ?</head><p>A main aspect of the network-calculus framework is the capacity to combine its results in order to analyze a specific property in a network. Assume for example that a flow f goes through a lossless system S (Figure <ref type="figure" target="#fig_23">27</ref>) and assume that the delay of each bit of f through S is upper-bounded by D. Furthermore, note α the arrival curve of f at the input of S. Then, if we are interested in an arrival curve α * of f at the output of S, we can use Proposition 1.3.7 of <ref type="bibr" target="#b8">[9]</ref> to obtain that δ D is a service curve of S for f and combine it with Theorem 1.4.3 of <ref type="bibr" target="#b8">[9]</ref> to finally obtain α * = α δ D is an arrival curve of f at the output of the system. Clearly, if the system S can lose packets (is not lossless) but continues to provide the guaranteed delay bound D to the non-lost bits, then we expect the output traffic (that contains only the bits of non-lost packets) to be also α *constrained. Yet, [9, Prop. 1.3.7] applies only to lossless systems, thus making it impossible to reuse the same combination of results.</p><p>In this section, we provide a set of network-calculus results that remain valid with lossless and non-FIFO systems. In the literature, Ciucu et al. introduce 5 the concept of loss processes to model non-lossless but FIFO systems using the stochastic network calculus (SNC) framework. They focus on the service curves and on the concatenation property of services curves [9, Thm. 1.4.6], whereas we focus on obtaining an output arrival curve in the framework of deterministic network calculus (DNC). In the DNC framework, Mohammadpour and Le Boudec obtain an output arrival curve for a flow at the output of a non-FIFO system, when the jitter of each packet is constrained [28, <ref type="bibr">Lemma 1]</ref>.</p><p>Our following result can be distinguished from the previous work as it applies to any systems that do not need to be FIFO or lossless and in which the delay of each non-lost bit is constrained in a bounded interval. Proposition 3 (Arrival curve of a flow at the output of a system with bounded delay). Consider a flow f entering a system S. Assume that each bit of f that exits S suffers a delay within S that is bounded within [d, D]. Finally assume that α is an arrival curve for f at the input of S. S does not need to be FIFO or lossless.</p><p>Then, α * = α δ D-d is an arrival curve for f at the output of S.</p><p>Proof. Denote by R f the cumulative process of f at the input of S (Figure <ref type="figure" target="#fig_23">27</ref>). We decompose R f = R a + R b , with R a the cumulative process, at the input, for the stream of bits of f that are not lost inside S and R b = R f -R a . R a (t) is defined as the number of bits of f that eventually exit S (that are not lost inside it) and that are observed at the input of S during the interval [0, t]. Note that the cumulative functions R a and R b are unknown in general: When a bit is observed at the input of S, the real-life observer cannot infer whether it will be lost within S or not. However, we can still work on the unknown functions R a and R b .</p><p>We denote by R * a [resp., R * b ] the output cumulative function related to the input process R a [resp., R b ]. Hence, R * a (t) is defined as the number of bits of f that exit S (are not lost inside it) and that are seen at the output of S during the interval [0, t].</p><p>All cumulative functions are positive, wide-sense increasing and defined for t ≥ 0 [9, §1.1.1]. We extend their definition domain by using the convention that all cumulative functions equal zero in R-:</p><formula xml:id="formula_25">∀t ≤ 0, R a (t) = R b (t) = R * a (t) = R * b (t) = 0. As α is an arrival curve for f at the input of S, the input process R f is α-constrained [9, Definition 1.2.1], thus for all s ≤ t, R f (t) -R f (s) ≤ α(t -s) R a (t) + R b (t) -R a (s) + R b (s) ≤ α(t -s) R a (t) -R a (s) ≤ α(t -s) + R b (s) -R b (t) As s ≤ t, and R b is wide-sense increasing, R b (s)-R b (t) ≤ 0 and R a (t) -R a (s) ≤ α(t -s) which shows that the cumulative process R a is also α-constrained. By definition of R b and R * b , ∀t, R * b (t) = 0 and R * a (t) = R * f (t)<label>(6)</label></formula><p>The system S is not FIFO but the non-lost bits have a maximum delay of D. Hence, all the bits of R a that have entered S at t have exited S by t + D,</p><formula xml:id="formula_26">R * a (t + D) ≥ R a (t)<label>(7)</label></formula><p>Equation ( <ref type="formula" target="#formula_26">7</ref>) is valid for t &lt; 0 because R a (t) = 0 for t &lt; 0 and R * a is a positive function. Similarly, the minimum delay of each data unit within S is d. As such, all the data units that have exited S by t + d must have entered S before t,</p><formula xml:id="formula_27">R * a (t + d) ≤ R a (t)<label>(8)</label></formula><p>Equation ( <ref type="formula" target="#formula_27">8</ref>) is again valid for t &lt; 0: R a (t) = 0 but R * a (t+d) also equals zero because the minimum time that a bit needs to reach the output is d.</p><formula xml:id="formula_28">Then, ∀t ≥ s, R * a (t) -R * a (s) ≤ R a (t -d) -R a (s -D) (7) and (8) ≤ α(t -s + (D -d)) R a is α-constrained ≤ (α δ D-d )(t -s)</formula><p>Combining the above result with <ref type="bibr" target="#b5">(6)</ref> shows, ∀t ≥ s</p><formula xml:id="formula_29">R * f (t) -R * f (s) ≤ (α δ D-d )(t -s)<label>(9)</label></formula><p>which proves that α * = α δ D-d is an arrival curve for f at the output of S.</p><p>For a system with a constant delay or without any delay, Proposition 3 is simplified as follows.</p><p>Corollary 4 (A system with constant delay keeps the arrival curves). If S is a system in which the non-lost bits of any flow have a constant delay, then an arrival curve for a flow or aggregate of flows at the input of S is also an arrival curve for the same flow or aggregate of flows at the output of S.</p><p>Proof. For the aggregate, we simply need to consider the whole aggregate as a unique flow when applying Proposition 3.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>APPENDIX C PROOFS C.1 Proof of Theorem 1</head><p>Proof of Theorem 1. Consider a vertex n and a flow f such that n contains a PEF for f , noted PEF n (f ). We first note that flow f is packetized at both the input and the output of PEF n (f ).</p><p>Proof of Item 1/ As per the model in Section 4.3, PEF n (f ) is a network element that can lose packets but does not have any delay for the forwarded packets. As a consequence, it does not have any delay for the forwarded bits either (both its input and its output are packetized). Applying Corollary 4 proves that an arrival curve for f at the input of the PEF, α f,PEF in , is also an arrival curve for f at the output of the PEF.</p><p>Item 2/ Consider a diamond ancestor a of n. The observation point a * is located at the output of the input port within a. As such, flow f is packetized at the observation point a * . As such, a bound on the per-bit delay between a * and either the PEF's input or the PEF's output PEF * is also a per-packet delay bound on the delay between the same two observation points, and vice versa.</p><p>Denote by P G(f ) a,n the set of all possible paths from a to n in G(f ) and consider a data unit m of f such that m is not lost for n. By definition of the diamond ancestor, a is not an EP-vertex for f , thus the data unit m is observed exactly once at a.</p><p>Denote by {P m i } i∈I(m) the set of packets containing m that reach PEF n (f ), with I(m) a set to index them. I(m) is not empty because m is not lost for n (at least one packet containing m reaches n). Furthermore, I(m) is a finite set because G(f ) is finite and acyclic: m is replicated a finite number of times.</p><p>For i in I(m), call ρ i the path within G(f ) that the packet P m i took from the source of f to n. By definition of a diamond ancestor of n, this path crosses a and by definition of P G(f ) a,n , there exists a path p i ∈ P G(f ) a,n such that packet P m i took path p i between a and n (p i is a sub-path of ρ i ).</p><p>Denote by d m i the delay of packet P m i between the output of a and the input of PEF n (f ). By definition of the notations D a→n f and d a→n f used in Theorem 1,</p><formula xml:id="formula_30">d a→n f ≤ d m i ≤ D a→n f<label>(10)</label></formula><p>The values d a→n f and D a→n f can be seen as the lower and upper-bound of the non-lost data units through the system located between the output of a and the input of PEF n (f ). This system is represented with a cloud in Figure <ref type="figure" target="#fig_25">28</ref>. The data unit m exits PEF n (f ) as soon as one of the the packets {P m i } i∈I(m) reaches the packet-elimination function. If we denote by d m a→PEF * the delay of the data unit m from the output of a to the output of the PEF, we have, ∀m ∈ f , m not lost for n,</p><formula xml:id="formula_31">∃i ∈ I(m), d m a→PEF * = d m i<label>(11)</label></formula><p>Combining Equations ( <ref type="formula" target="#formula_30">10</ref>) and <ref type="bibr" target="#b10">(11)</ref> gives <ref type="formula">12</ref>) proves that any non-lost data units of f for n suffer through the system S in Figure <ref type="figure" target="#fig_25">28</ref>  ) is an arrival curve for f at the output of the PEF.</p><formula xml:id="formula_32">∀m ∈ f, m not lost for n, d a→n f ≤ d m a * →PEF * ≤ D a→n f (12) Equation (</formula></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>C.2 Proof of Corollary 1</head><p>Proof of Corollary 1. The replication is performed by the switching fabric, both its input and output are hence packetized. The same remark applies for the PEF thus we conclude that both the input and the output of each system S i is also packetized. Therefore, the per-bit delay of flow f through S i is also bounded by</p><formula xml:id="formula_33">[d i , D i ].</formula><p>For each i ∈ 1, N , the application of Proposition 3 gives the arrival curve for f at the output of</p><formula xml:id="formula_34">S i ∀ ∈ 1, N , α f,S * i = α f δ Di-d1 We then obtain α f,PEF in α f,PEF in = i∈ 1,n α f,S * i = i∈ 1,n α f δ Di-d1</formula><p>We then apply Equation (1) with the ancestor a being the input of the replication function in Figure <ref type="figure" target="#fig_8">13</ref>. A lower delay bound for f from the ancestor a to the input of the PEF along any possible paths (i.e. through any S i ) is</p><formula xml:id="formula_35">d a→n f = min{d i ; i ∈ 1, N } Similarly, D a→n f = max{D i ; i ∈ 1, N } © 2022 IEEE.</formula><p>Personal use is permitted, but republication/redistribution requires IEEE permission.See <ref type="url" target="https://www.ieee.org/publications/rights/index.html">https://www.ieee.org/publications/rights/index.html</ref> for more information.</p><p>and (1) can be written</p><formula xml:id="formula_36">α a→n f = α f,a * δ D a→n f -d a→n f = α f δ maxi Di-mini di</formula><p>We apply Theorem 1: α f,PEF * = α f,PEF in ⊗ α a→n f is an arrival curve for f at the output of the PEF. Replacing with the above expressions for α f,PEF in  </p><formula xml:id="formula_37">α * =   i∈ 1,2 γ r,b δ Di-di   ⊗ (γ r,b δ D2-d1 )</formula><p>= γ r,b+r(D1-d1) + γ r,b+r(D2-d1) ⊗ γ r,b+r(D2-d1) = γ 2r,2b+r(D1-d1+D2-d2) ⊗ γ r,b+r(D2-d1) <ref type="bibr" target="#b12">(13)</ref> is an arrival curve for f after the PEF in Figure <ref type="figure" target="#fig_8">13</ref>.</p><p>In the following, we exhibit a trajectory with a γ r,bconstrained source for f and no minimal packet length. We exhibit also two systems S 1 , S 2 , in which the delay of the non-lost data-units is in the intervals </p><p>(Note that χ 1 ≥ 1 and χ 2 ≥ 1) Last, we define</p><formula xml:id="formula_39">ψ = r(d 2 -D 1 ) -b b<label>(15)</label></formula><p>and we also have ψ ≥ 1. C.3.1.2 Description of the traffic generation at the source: For the sake of clarity, we classify the data-units generated by the source into four categories: I, B, S and X. The category of a data-unit defines the role that the dataunit has in the trajectory. Each of the three first categories (I, B, S) has two sub-categories that we distinguish by using a superscript (e.g., I 1 and I 2 ). This sub-category notion is used in order to distinguish the role of every system (S 1 or S 2 ) in the trajectory.</p><p>Subcategories do not infer the order with which dataunits are generated. The notions of categories and subcategories are only used in the proof, they are not related to any physical property of the packets (neither to their length nor to any field in their header).</p><p>Category I: The source generates two "initiator" dataunits: I 2 [resp., I 1 ] at absolute time 0 [resp., (D 2 -D 1 )], of length b (see Table <ref type="table">6</ref>). Figure <ref type="figure" target="#fig_29">29</ref> shows the timeline of the data-units I out of the source. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Data unit m</head><p>Size, size(m) Generation time, G(m)</p><formula xml:id="formula_40">I 2 b 0 I 1 b D 2 -D 1</formula><p>Note: The role of the two data-units of category I is to initiate the backlog period. In the next parts of the proof, we create a situation where I 1 and I 2 exit the PEF of Figure <ref type="figure" target="#fig_8">13</ref> at the same time, creating the 2b part of the burst in the term γ 2r,2b+r(D1-d1+D2-d2) of ( <ref type="formula">13</ref>).</p><p>Category B: In addition to the data-units of category I, the source generates χ 2 data-units of subcategory B 2 and χ 1 data-units of subcategory B 1 , as described in Table <ref type="table" target="#tab_15">7</ref>. A possible output of the source when combining categories I and B is shown in Figure <ref type="figure" target="#fig_31">30</ref>. In the proposed situation, we have χ 1 = 1 (i.e., r(D 1 -d 1 ) ≤ b). Then the interval 1, χ 1 -1 in Table <ref type="table" target="#tab_15">7</ref> is empty and category B 1 contains a unique data-unit B Note that for any value of χ 1 , χ 2 , by Table <ref type="table" target="#tab_15">7</ref>,   </p><formula xml:id="formula_41">∀j ∈ {1, 2} k∈ 1,χ j size(B j k ) = r(D j -d j )<label>(16)</label></formula><formula xml:id="formula_42">Data unit m Size, size(m) Generation time, G(m) ∀k ∈ 1, χ 2 -1 , B 2 k b k b r B 2 χ 2 r(D2 -d2) -(χ 2 -1)b (D2 -d2) ∀k ∈ 1, χ 1 -1 , B 1 k b (D2 -D1) + k b r B 1 χ 1 r(D1 -d1) -(χ 1</formula><formula xml:id="formula_43">(m) ∀k ∈ 1, ψ -1 , S 2 k b (D2 -d2) + k b r S 2 ψ r(d2 -D1) -ψb (D2 -D1 -b r ) ∀k ∈ 1, ψ -1 , S 1 k b (D2 -d1) + k b r S 1 ψ r(d2 -D1) -ψb (D2 + d2) -(D1 + d1) -b r time size 0 I 2 D2 -D1 I 1 b/r B 2 1 D2 -d2 B 2 2 D2 -d1 B 1 1 D2 -d2 + b/r S 2 1 D2 -D1 -b/r S 2 2 D2 -d1 + b/r S 1 1 (D2 + d2) -(D1 + d1) -b/r S 1 2 b r(d2 -D1) -2b I 2 B 2 S 2 I 1 B 1 S 1</formula><p>Fig. <ref type="figure" target="#fig_39">31</ref>. Source output, with the three categories I, B and S of data-units</p><p>Note: The role of the data-units of category B is to participate in the burst term of γ 2r,2b+r(D1-d1+D2-d2) in <ref type="bibr" target="#b12">(13)</ref>. In the next parts of the proof, we create a situation where all data-units of category B (both subcategories B 1 and B 2 ) are released at the same time, simultaneously with data-units I 1 and I 2 . This give the part r(D 1 -d 1 + D 2 -d 2 ) in the burst term of γ 2r,2b+r(D1-d1+D2-d2) .</p><p>We now prove that data-units of subcategory B 1 [resp., B 2 ] are generated after data-units of subcategory I 1 [resp., I 2 ] and in the order of their lower-script index.</p><p>• If χ 2 = 1, then the first data-unit of B 2 is sent at D 2 -d 2 and D 2 -d 2 ≥ 0, so data-unit of B 2 is generated after the data-unit of I 2 .</p><p>• If χ 2 ≥ 1, then the first data-unit of B 2 is sent at b/r ≥ 0, so data-units of B 2 are generated after the dataunits of I 2 . Also, the data-units (B 2 k ) κ∈ 1,χ 2 are generated in the same order as their index: this is clear for indexes up to χ 2 -1. For the order between B 2 χ 2 -1 and B 2 χ 2 , we note that</p><formula xml:id="formula_44">r(D2-d2) b b r -b r ≤ D 2 -d 2 by</formula><p>property of the ceiling function.</p><p>• If χ 1 = 1, then the first data-unit of B 1 is sent at (D 2d 1 ) thus after the data-unit of I 1 (as D 1 ≥ d 1 ).</p><p>• If χ 1 ≥ 1, then by using the same reasoning for B 2 , we obtain that data-units of B 1 are generated after the initiator I 1 and they are released in the order of their lower-script index.</p><p>Category S: In addition to the data-units of categories I and B, the source generates ψ data-units of subcategory S 2 and ψ data-units of subcategory S 1 , as described in Table <ref type="table" target="#tab_16">8</ref>. A possible output of the source when adding category S to Figure <ref type="figure" target="#fig_31">30</ref>   </p><formula xml:id="formula_45">) = r(d 2 -D 1 ) -b<label>(17)</label></formula><p>Note: The role of the data-units of category S is to participate in the peak-rate term of γ 2r,2b+r(D1-d1+D2-d2) in <ref type="bibr" target="#b12">(13)</ref>. The output traffic should maintain the peak rate for a sufficient duration so that the obtained cumulative output intersects with the curve γ r,b+r(D2-d1) . In the next parts of the proof, we create a situation where each data unit of subcategory S 1 is released at the same time as its peer of subcategory S 2 . This creates a peak rate 2r for a duration of at least d 2 -D 1 -b/r. The resulting cumulative output intersects the curve γ r,b+r(D2-d1) .</p><p>We now check the order of the data data units of category S.</p><p>• If ψ = 1, then the first data-unit of S 2 is sent at D 2 -D 1 -b/r, whereas the last data-unit of B 2 was sent at</p><formula xml:id="formula_46">D 2 - d 2 . By assumption, d 2 -D 1 ≥ b/r, so D 2 -D 1 -b/r ≥ D 2 -d 2</formula><p>and the first data-unit of S 2 is sent after the last data-unit of B 2 .</p><p>• If ψ ≥ 1, then the first data-unit of S 2 is sent b/r after the last data-unit of B 2 . Also, the data-units (S 2 k ) κ∈ 1,ψ are generated in the same order as their index: this is clear for indexes up to ψ -1. For the order between S We then apply the same principles for S 1 . We thus prove that data-units of subcategory S 1 [resp., S 2 ] are generated after data-units of subcategory B 1 [resp., B 2 ] and in the order of their index. We also observe that the last data-unit of subcategory S 2 is sent at D 2 -D 1 -b r , whereas the dataunit of subcategory I 1 is sent at D 2 -D 1 , hence data-units of subcategory S 2 are sent before the data-unit of subcategory I 1 .</p><p>Category X: After the data-units of subcategory S 1 , the source generates for eternity data-units (X n ) n∈N * of size b with a period b/r (see Table <ref type="table" target="#tab_17">9</ref>). The first one of these dataunits is sent b/r after the last data-unit of S 1 . Figure <ref type="figure" target="#fig_39">32</ref> presents the output of the source with all four categories.</p><p>Note: The role of category X is to generate the sustained rate term in the curve γ r,b+r(D2-d1) in <ref type="bibr" target="#b12">(13)</ref>.</p><p>C.3.1.3 Properties of the traffic generation at the source: Now that we have described the profile of the traffic generated by the source, we can prove that the generation is γ r,b -compliant. This is done with the following lemmas.  • B 2 χ 2 : By property of the ceiling function:</p><formula xml:id="formula_47">r(D 2 -d 2 ) b ≤ χ 2 ≤ r(D 2 -d 2 ) b + 1 r(D 2 -d 2 ) -b ≤ (χ 2 -1)b ≤ r(D 2 -d 2 ) b &gt; 0 -r(D 2 -d 2 ) + b ≥ -(χ 2 -1)b ≥ -r(D 2 -d 2 ) b ≥ r(D 2 -d 2 ) -(χ 2 -1)b ≥ 0 • B 1 χ 1 : same idea • S 1</formula><p>ψ and S 2 ψ (they have the same size): By property of the ceiling function:</p><formula xml:id="formula_48">r b (d 2 -D 1 ) -1 ≤ ψ ≤ r b (d 2 -D 1 ) -r(d 2 -D 1 ) + b ≥ -ψb ≥ -r(d 2 -D 1 ) b &gt; 0 b ≥ r(d 2 -D 1 ) -ψb ≥ 0</formula><p>All the other data-units have the same size, equal to the burst b. Then G(m ) -G(m) ≥ size(m ) r Proof of Lemma 2. We simply describe all the possible combinations:  • Case m, m ∈ B 2 (when χ 2 ≥ 2): <ref type="table" target="#tab_15">7</ref> and<ref type="table" target="#tab_16">8</ref>) and size(m ) = b so the result holds.</p><formula xml:id="formula_49">• Case m = I 2 and m = B 2 1 : We have G(m) = 0 (see Table 6). If χ 2 = 1, then G(m ) - G(m) = (D 2 -d 2 ), size(m ) = r(D 2 -d 2 ) (see Table</formula><formula xml:id="formula_50">There exists k ∈ 1, χ 2 -1 such that m = B 2 k and m = B 2 k+1 . If k ≤ χ 2 -2, then G(m ) -G(m) = b/r, size(m ) = b and the result holds. If k = χ 2 -1, then: G(m ) -G(m) = (D 2 -d 2 ) -k b r = (D 2 -d 2 ) -(χ 2 -1) b r = r • size(m ) • Case m = B 2 χ 2 and m = S 2 1 : We have G(m) = D 2 -d 2 (Table 7). If ψ = 1, then m = S 2 ψ and G(m ) -G(m) = D 2 -D 1 - b r -(D 2 -d 2 ) = d 2 -D 1 - b r = r(d 2 -D 1 ) -ψb r = size(m )/r If ψ ≥ 2, then G(m ) -G(m) = b/r (see Tables</formula><p>• Case m, m ∈ S 2 (when ψ ≥ 2): <ref type="table" target="#tab_15">7</ref>) and the result holds. If χ 1 ≥ 2, then G(m )-G(m) = b/r, size(m ) = b and the result holds also.</p><formula xml:id="formula_51">There exists k ∈ 1, ψ -1 such that m = S 2 k and m = S 2 k+1 . If k ≤ ψ -2, then G(m )-G(m) = b/r and size(m ) = b so the result holds. If k = ψ -1, then G(m ) -G(m) = d 2 -D 1 -ψ b r = size(S 2 ψ )/r = size(m )/r • Case m = S 2 ψ and m = I 1 : Then we have G(m) = D 2 -D 1 -b r (Table 8) and G(m ) = (D 2 -D 1 ) (Table 6). So G(m ) -G(m) = b/r = size(m )/r. • Case m = I 1 and m ∈ B 1 : We have G(m) = (D 2 -D 1 ) (see Table 6). If χ 1 = 1, then G(m ) -G(m) = (D 1 -d 1 ), size(m ) = r(D 1 -d 1 ) (see Table</formula><p>• Case m, m ∈ B 1 (when χ 1 ≥ 2): <ref type="table" target="#tab_15">7</ref> and<ref type="table" target="#tab_16">8</ref>) and size(m ) = b so the result holds.</p><formula xml:id="formula_52">There exists k ∈ 1, χ 1 -1 such that m = B 1 k and m = B 1 k+1 . If k ≤ χ 1 -2, then G(m ) -G(m) = b/r, size(m ) = b and the result holds. If k = χ 1 -1, then G(m ) -G(m) = (D 2 -D 1 ) + (D 1 -d 1 ) -(D 2 -D 1 ) -k b r = (D 1 -d 1 ) -(χ 1 -1) b r = r • size(m ) • Case m = B 1 χ 1 and m = S 1 1 : We have G(m) = (D 2 -d 1 ) (Table 7). If ψ = 1, then m = S 1 ψ and G(m ) -G(m) = D 2 + d 2 -D 1 -d 1 -b/r -D 2 + d 1 = d 2 -D 1 -b/r = size(m )/r If ψ ≥ 2, then G(m ) -G(m) = b/r (see Tables</formula><p>• Case m, m ∈ S 1 (when ψ ≥ 2):  Proof of Lemma 3. Consider any set of n consecutive dataunits generated by the source (P v ) v∈ 1,n . Then</p><formula xml:id="formula_53">There exists k ∈ 1, ψ -1 such that m = S 1 k and m = S 1 k+1 . If k ≤ ψ -2, then G(m )-G(m) = b/r and size(m ) = b so the result holds. If k = ψ -1, then G(m ) -G(m) = d 2 -D 1 -ψb/r = size(m )/r • Case m ∈ S 1 , m ∈ X: clear (</formula><formula xml:id="formula_54">G(P n ) -G(P 1 ) ≥ v∈ 1,n-1 G(P v+1 ) -G(P v ) ≥ v∈ 1,n-1 size(P v+1 ) r Lemma 2 r(G(P n ) -G(P 1 )) + b ≥ v∈ 1,n-1 size(P v+1 ) + b ≥ v∈ 2,n size(P v ) + b</formula><p>Applying Lemma 2, size(P 1 ) ≤ b, so we obtain</p><formula xml:id="formula_55">r(G(P n ) -G(P 1 )) + b ≥ v∈ 1,n size(P v )<label>(18)</label></formula><p>Equation ( <ref type="formula" target="#formula_55">18</ref>) is the max-plus representation of a packetized flow constrained by an arrival curve γ r,b <ref type="bibr">[9, §3]</ref>.</p><p>C.3.1.4 Description of the systems S 1 , S 2 : For a data unit m, we note E 1 (m) [resp., E 2 (m)] the absolute time at which the packet transporting m through S 1 [resp., through S 2 ], exits S 1 [resp., exits S 2 ]. For j ∈ {1, 2}, we note E j (m) = +∞ if and only if the packet transporting data unit m through S j is lost by system S j . Systems S 1 and S 2 release the packets generated by the source at the time instants shown in Table <ref type="table" target="#tab_20">10</ref>.</p><p>Remark: We chose a system such that any packet transporting a data unit of category I 2 , B 2 or S 2 is lost within S 1 (E 1 (m) = +∞) and any packet transporting a data unit of category I 1 , B 1 , S 1 or X is lost within S 2 (E 2 (m) = +∞). This scheme keeps the proof simple but note that a similar proof could be obtained assuming S 2 is lossless. In that case, we would only need to make sure that, for m in category I 1 , B 1 , S 1 or X, the packet transporting m through S 2 exits S 2 after the packet transporting m through S 1 exits S 1 , i.e., E 2 (m) ≥ E 1 (m) for any m.</p><p>As an illustration, Figure <ref type="figure" target="#fig_40">33</ref> shows the obtained cumulative function at the output of the PEF when applying the exit time instants of Table <ref type="table" target="#tab_20">10</ref> on the example of Figure <ref type="figure" target="#fig_39">32</ref>. Dashed boxes represent values of interest that are further detailed in Paragraph C.3.1.6. We also plot on top of it the arrival curve at the output of the PEF, obtained in <ref type="bibr" target="#b12">(13)</ref>. In the following paragraphs, we prove that there exists no better VBR-arrival curve than this one for the shown output cumulative function.</p><p>C.3.1.5 Properties of the systems S 1 , S 2 : We now show the following properties of the above-described systems S 1 , S 2 .</p><p>Lemma 4 (The delay bounds through S 1 , S 2 ). The delay of any non-lost packet through S 1 is bounded between d 1 and D 1 . The delay of any non-lost packet through S 2 is bounded between d 2 and D 2 .</p><p>Proof of Lemma 4. From Table <ref type="table" target="#tab_20">10</ref>, the result is clear for packets transporting data-units of categories I, S and X time data We prove it for packets transporting data-units of category B:</p><formula xml:id="formula_56">D 2 I 2 B 2 1 B 2 2 I 1 B 1 1 2b +r(D 1 -d 1 ) +r(D 2 -d 2 ) S 2 1 S 1 1 2r(d 2 -D 1 ) +r(D 1 -d 1 ) +r(D 2 -d 2 ) D 2 + b/r S 2 2 S 1 2 D 2 + d 2 -D 1 -b/r X 1 D 2 + d 2 -D 1 X 2 D 2 + d 2 -D 1 + b/r α * f r o m (<label>1 3</label></formula><p>Through S 1 : for m a data unit of category B 2 , the packet transporting m through S 1 is lost. For m a data unit of category B 1 , the packet transporting m through S 1 verifies</p><formula xml:id="formula_57">G(B 1 χ 1 ) ≥ G(m) ≥ G(I 1 )</formula><p>because data units of B 1 are sent after I 1 and before B 1 χ 1 .</p><formula xml:id="formula_58">D 2 -(D 2 -d 1 ) ≤ E 1 (m) -G(m) ≤ D 2 -(D 2 -D 1 )<label>(19)</label></formula><p>per Table <ref type="table" target="#tab_20">10</ref>. Equation <ref type="bibr" target="#b18">(19)</ref> proves that any packet transporting a data unit of type B 1 through S 1 has a delay through</p><formula xml:id="formula_59">S 1 bounded in [d 1 , D 1 ].</formula><p>Through S 2 : for m a data unit of category B 1 , the packet transporting m through S 2 is lost. For m a data unit of category B 2 , the packet transporting m through S 2 verifies</p><formula xml:id="formula_60">G(B 2 χ 2 ) ≥ G(m) ≥ G(I 2 )</formula><p>because data units B 2 are sent after I 2 and before B 2 χ 2 .</p><formula xml:id="formula_61">D 2 -(D 2 -d 2 ) ≤ E 1 (m) -G(m) ≤ D 2 -0<label>(20)</label></formula><p>Equation <ref type="bibr" target="#b19">(20)</ref>   </p><formula xml:id="formula_62">0 +∞ D 2 ∀k ∈ 1, χ 2 -1 , B 2 k k b r +∞ D 2 B 2 χ 2 D 2 -d 2 +∞ D 2 ∀k ∈ 1, ψ -1 , S 2 k D 2 -d 2 + k b r +∞ D 2 + k b r S 2 ψ D 2 -D 1 -b r +∞ D 2 + d 2 -D 1 -b r I 1 D 2 -D 1 D 2 +∞ ∀k ∈ 1, χ 1 -1 , B 1 k D 2 -D 1 + k b r D 2 +∞ B 1 χ 1 D 2 -d 1 D 2 +∞ ∀k ∈ 1, ψ -1 , S 1 k D 2 -d 1 + k b r D 2 + k b r +∞ S 1 ψ D 2 + d 2 -D 1 -d 1 -b r D 2 + d 2 -D 1 -b r +∞ ∀k ∈ N * , X k D 2 + d 2 -D 1 -d 1 + (k -1) b r D 2 + d 2 -D 1 + (k -1) b r +∞</formula><p>soon as the first packet containing m is received from either S 1 or S 2 . Therefore, for any time instant t,</p><formula xml:id="formula_63">R * (t) =    m E 1 (m) &lt; t or E 2 (m) &lt; t    size(m)<label>(21)</label></formula><p>We apply Equation ( <ref type="formula" target="#formula_63">21</ref>) to obtain the value of the cumulative function at several time-instants of interest. We start with</p><formula xml:id="formula_64">t = D 2 . R * (D 2 ) =    m E 1 (m) &lt; D 2 or E 2 (m) &lt; D 2    size(m)</formula><p>Per Table <ref type="table" target="#tab_20">10</ref>, we obtain</p><formula xml:id="formula_65">R * (D 2 ) = 0<label>(22)</label></formula><p>We then continue with D 2 + for &gt; 0,</p><formula xml:id="formula_66">R * (D 2 + ) = min(E1(m),E2(m))&lt;D2+ size(m) ≥ m∈I size(m) + m∈B 1 size(m) + m∈B 2 size(m)</formula><p>From Table <ref type="table" target="#tab_20">10</ref> With ( <ref type="formula" target="#formula_41">16</ref>), we obtain With <ref type="bibr" target="#b16">(17)</ref>, we obtain ∀ &gt; 0</p><formula xml:id="formula_67">∀ &gt; 0, R * (D 2 + ) ≥ 2b+r(D 1 -d 1 )+r(D 2 -d 2 )<label>(23</label></formula><formula xml:id="formula_68">R * (D 2 + (d 2 -D 1 ) -b/r + ) ≥ r(D 1 -d 1 ) + r(D 2 -d 2 ) + 2r(d 2 -D 1 )<label>(24)</label></formula><p>C.3.1.7 Properties of any candidate arrival curve for f : Consider any VBR arrival curve α = SPEC(M , p , r , b ) defined in [9, §1.2] and assume that α is an arrival curve for f at the output of the PEF.</p><p>Consider also the piecewise-linear function α † defined on R+ by</p><formula xml:id="formula_69">α † : t → min(M + ρ t, b + r t)<label>(25)</label></formula><p>By definition, we have, for all t ≥ 0</p><formula xml:id="formula_70">α (t) = α † (t) if t &gt; 0 0 if t = 0<label>(26)</label></formula><p>Note that α † is concave and wide-sense increasing. We also have the following result Lemma 5. For any s ≥ t ≥ 0, α † (s) -α † (t) ≥ r (s -t) Proof of Lemma 5. We simply break in all the possible cases:</p><formula xml:id="formula_71">• If both s ≤ M -b ρ -r and t ≤ M -b ρ -r then α † (s) -α † (t) = ρ (s -t) ≥ r (s -t) because r ≥ ρ . • If t ≤ M -b ρ -r , and s ≥ M -b ρ -r , then α † (s) -α † (t) = b -M + r s -ρ t ≥ r s -ρ t ≥ r (s -t) because b ≥ M and ρ ≥ r . • If both s ≥ M -b ρ -r and t ≥ M -b ρ -r then α † (s) -α † (t) = r (s -t).</formula><p>We observe that after D 2 + (d 2 -D 1 ), the output traffic R * is made of the data units of category X with a size b and a period b/r. Therefore, the long-term rate of the flow at the output of the PEF is exactly r and any piece-wise linear arrival curve for this flow must have a long-term rate at least as big as r. For the VBR arrival curve α , this gives</p><formula xml:id="formula_72">r ≥ r<label>(27)</label></formula><p>Then, as α is an arrival curve for f at the output of the PEF, by [9, Definition 1.2.1], for any t, s ≥ 0, R * (t + s) -R(t) ≤ α (s).</p><p>In particular, ∀ &gt; 0</p><p>As o is a diamond ancestor, it is not an EP-vertex, thus each data unit of f is observed at most once at w. As done in <ref type="bibr" target="#b27">[28]</ref>, the k-th data unit of f is defined as the data unit of f that crosses w in the k-th position.</p><p>We note E k the arrival time of the k-th data unit of f at v, with the convention that E k = +∞ if the k-th data unit of f is lost for n. E k is correctly defined because n is not an EPvertex, thus the k-th data unit of f can cross the observation point v at most once. Furthermore, f is packetized at v, thus all the bits of the k-th data unit cross v at the same time.</p><p>Then the reordering offset of the k-th data unit of f [28, Eq. ( <ref type="formula" target="#formula_12">4</ref>)], <ref type="bibr" target="#b32">[33]</ref> is defined by</p><formula xml:id="formula_73">Π k = j|j&gt;k,Ej &lt;E k l j (<label>36</label></formula><formula xml:id="formula_74">)</formula><p>with l j the size of the packet transporting the j-th data unit of f . Denote by R the cumulative arrival function of flow f at observation point v. By definition, R is the number of bits of flow f that cross v over the time interval [0, t[. Thus for any non-lost data unit k, R(E k ) is the number of bits of f that cross v strictly before<ref type="foot" target="#foot_3">foot_3</ref> E k . As f is packetized at v, R(E k ) is hence the sum of the length of the packets for all data units that arrived before the k-th data unit, excepted the k-th data unit itself.</p><p>Thus Π k can be written</p><formula xml:id="formula_75">Π k = j|j&gt;k,Ej &lt;E k l j = R(E k ) -R(min j&gt;k E j ) ≤ α f,v (E k -min j&gt;k E j )</formula><p>because α f,v is an arrival curve of f at v. By definition, E k -min j&gt;k E j is the reordering late offset of data unit k that we denote by Λ k [28, Eq. ( <ref type="formula" target="#formula_21">2</ref>)]. We hence obtain that for all k such that E k &lt; +∞,</p><formula xml:id="formula_76">Π k ≤ α f,v (Λ k )<label>(37)</label></formula><p>The RTO and the RBO of flow f are defined <ref type="bibr">[28, §C]</ref> by <ref type="formula" target="#formula_76">37</ref>) is valid for any k such that E k &lt; +∞, α f,v is a wide-sense increasing function and sup k|E k &lt;+∞ Λ k is bounded by assumption. We hence obtain π v (f, o) ≤ α f,v (λ v (f, o)).</p><formula xml:id="formula_77">π v (f, o) sup k|E k &lt;+∞ Π k and λ v (f, o) sup k|E k &lt;+∞ Λ k (38) Equation (</formula></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>C.5 Proof of Theorem 2</head><p>Proof of Theorem 2. The section of the network between the diamond ancestor a and the vertex n that contains the PEF is a system (neither FIFO nor lossless in general) with a jitter for f bounded by D a→n f -d a→n f . We apply <ref type="bibr" target="#b27">[28,</ref><ref type="bibr">Thm 5]</ref> to obtain the result.  thus d &lt; D. Note that q ≥ q min can be written</p><formula xml:id="formula_78">q ≥ q min = 2rJ b + 2 + 1</formula><p>With J &gt; 0. Note that q &gt; 2rJ b + 2 thus (q -2) b r &gt; 2J. Therefore, take any such that min b r -2 q -2 J, J &gt; &gt; 0 (41)</p><p>We further define</p><formula xml:id="formula_79">I max q q -2 J, b r<label>(42)</label></formula><p>φ I -J + (43) and τ qφ (44)</p><p>Finally, we consider a starting instant x 1 &gt; 0 and for i ∈ 1, q , we define</p><p>x i (i -1)φ + x 1 (45) C.7.1.2 Properties on the constants of M D1&lt;d2 : For q &gt; 3, q q-2 &gt; 1 thus by (42)</p><formula xml:id="formula_80">I &gt; J &gt; 0<label>(46)</label></formula><p>thus we also have φ &gt; 0 and τ &gt; 0 by ( <ref type="formula">43</ref>) and (44). Furthermore, τ -I = q(I -J) + q -I by (43), (44) = (q -2)I -qJ + q + I ≥ qJ -qJ + q + I by (42) &gt; I by (41) combined again with (42), this gives</p><formula xml:id="formula_81">τ -I &gt; b r<label>(47)</label></formula><p>For φ, we first have φ &lt; I (48) because &lt; J and φ &lt; I + b r -q q -2 J (49) because &lt; b r -2 q-2 J. By (42), I can take only one of two values. If I = b r , then (48) gives φ &lt; b r . If I = q q-2 J, then (49) gives φ &lt; b r . We hence prove</p><formula xml:id="formula_82">φ &lt; b r<label>(50)</label></formula><p>C.7.1.3 Adversarial traffic generation at the source in M D1&lt;d2 : For each i ∈ 1, q , the source a in Figure <ref type="figure" target="#fig_36">20</ref> sends 7 a data unit m 1 i,k , of size b at the time instant x i + kτ and m 2 j,k of size b at the time instant x i +kτ +I for all k ∈ N. Figure <ref type="figure" target="#fig_39">35</ref> presents the traffic at the output of the source, focusing on two successive flows: f i and f i+1 (with i ≤ q -1). Their source profiles are periodic with a period τ and Figure <ref type="figure" target="#fig_39">35</ref> focuses on the k-th period. For the flow f i (solid-blue data units), the source generates the data unit m 1 i,k at time x i + kτ , then sends m 2 i,k after a duration I and it finally waits for the next period (k + 1) before it restarts the same profile and sends m 1 i,k+1 . The source profile for flow f i+1 (dashed-red data units) is identical, but shifted by φ with respect to the source profile for f i , because x i+1 = x i + φ by (45). By (43) and (41), φ &lt; I thus m 1 i,k+1 is sent before m 2 i,k as shown in the figure.  <ref type="figure" target="#fig_39">35</ref>. Generation of data units for flows f i and f i+1 (i ≤ q -1). Their traffic profile is periodic with period τ . The source sends a data unit for f i at x i + kτ for k ∈ N, then it sends another data unit after a duration I and finally restarts at the next period. The profile for f i+1 is identical and shifted by φ with respect to the one of f i (x i+1 = x i + φ).   -For any k ∈ N and any i ∈ 1, q , path P 1 drops the packet containing the data unit m 1 i,k and forwards the packet containing the data unit m 2 i,k with a delay d. -For any k ∈ N and any i ∈ 1, q , path P 2 forwards the packet containing the data unit m 1 i,k with a delay D and drops the packet containing the data unit m 2 i,k . -Any other path P j with j ≥ 3 drops all packets.  Fig. <ref type="figure" target="#fig_39">37</ref>. Traffic profile for the flows f i and f i+1 at the input of the IR (above) and at its output (below). To ease the lecture, the scale is not the same as in Figures <ref type="figure" target="#fig_39">35</ref> and<ref type="figure" target="#fig_46">36</ref>.</p><p>C.7.1.7 Effect of the PEFs in M D1&lt;d2 : The set of parallel PEFs in Figure <ref type="figure" target="#fig_36">20</ref> receive the sum of the two paths outputs. As per its model in Section 4.3, each PEF forwards the first packet containing the data unit. For i ∈ 1, q , k ∈ N and w ∈ {1, 2}, we denote by A w i,k the time instant at which the unique packet containing the data unit m w i,k exits the set of parallel PEFs.</p><p>By construction of the adversarial paths, for i ∈ 1, q and k ∈ N, only path P 1 forwards a packet containing the data unit m 2 i,k , released d after its emission by the source. Thus m 2 i,k exits the PEFs as soon as the packet exits P 1 . We obtain ∀i ∈ 1, q , ∀k ∈ N A 2 i,k = x i + kτ + I + d</p><p>Similarly with m 1 i,k that is only forwarded by P 2 , ∀i ∈ 1, q , ∀k ∈ N A 1 i,k = x i + kτ + D</p><p>The top line of Figure <ref type="figure" target="#fig_39">37</ref> shows the trajectory at the output of the PEFs focusing on flows f i and f i+1 and on the k-th period of the profile. Note that outPEFs is the output of the system denoted by S in Section 6.2 and is also the input of the IR (Figure <ref type="figure" target="#fig_36">20</ref>). C.7.1.8 Properties of the system S between in and outPEFs in M D1&lt;d2 : For i ∈ 1, q and n ∈ N we note that This proves that m 2 i,k exit S after m 1 i,k for any i ∈ 1, q and any k ∈ N. Also, = τ -(I -J) = (q -1)(I -J) + q (44) and (43) &gt; 0 q ≥ 3 And this proves that for any i ∈ 1, q and any k ∈ N, m 2 i,k exits S before m 1 i,k+1 . Therefore, S is FIFO for f i , for any i ∈ 1, q . Furthermore, each data unit is transported through exactly one path (either P 1 or P 2 ), thus S is also lossless. This proves that Property 5/ of Theorem 4 holds.</p><formula xml:id="formula_85">A 2 i,k -A 1 i,k = I + d -D<label>(</label></formula><formula xml:id="formula_86">A 1 i,k+1 -A 2 i,k = τ + D -d -I<label>(</label></formula><p>Last, we note that </p><formula xml:id="formula_87">A 1 i+1,k -A 2 i,k = x i+1 -x i + D -d -I<label>(</label></formula></div><figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_0"><head>Fig. 1 .</head><label>1</label><figDesc>Fig.1. The three sections of a replicate's path: before, in, and after the redundant part.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_2"><head>Fig. 5 .Fig. 6 .</head><label>56</label><figDesc>Fig. 5. Example of a flow graph G(f ) (Sec. 4.1) of flow f with a source A, destinations E and G and redundant paths to reach G.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_3"><head>Fig. 7 .</head><label>7</label><figDesc>Fig. 7. Model of two devices in the network (in gray dashed boxes) and their relation with the flow graph (vertices in thick red).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_4"><head>Fig. 10 .</head><label>10</label><figDesc>Fig. 10. Example of an organization of the optional functions within an output port. After their respective PEF, the two flows share the same POF and the same regulator (REG).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_5"><head>Fig. 11 .</head><label>11</label><figDesc>Fig. 11. Example of an the organization of the optional functions within an output port with one POF and one REG per flow.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_6"><head>Fig.</head><label></label><figDesc>Fig.10. Each flow is first processed by its respective PEF, then both duplicate-free flows are reordered as an aggregate by using POF F ({f, g}, B). This function enforces the same order for the aggregate as the one at the output of B, i.e., before the redundant section. Last, they are both processed by the same interleaved regulator that enforces two different contracts for f and for g, but that keeps the aggregate {f, g} FIFO. A variant of this situation is shown in Fig.11. After elimination, each flow is now independent from the other one, where the POFs enforce per-flow order and the two REGs are per-flow regulators (PFRs). This situation is different from Fig.10because a packet of f cannot be delayed by a packet of g. In addition, this configuration could have a higher hardware cost than in Fig.10. FIFO assumptions: With the exception of POF, each network element is assumed to be FIFO for the class of interest. Assumptions on losses: With the exception of PEF, each function, each CBQS, each switching fabric, each input port and each internal connection within a device is assumed to be lossless (does not lose any packets). Packets can be lost on the transmission links between devices. This model covers various failures, including random media losses, the shutdown of an output port (equivalent to its out-going link losing all packets) and the shutdown of an input port (equivalent to its in-going link losing all packets).As packets can be lost on transmission links, the network is not assumed to be lossless. Of course, the latency bounds computed in this paper are only valid for the non-lost data units (the data units for which at least one replicate reaches the destination), but these bounds remain valid even if some other data units are lost in the network.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_7"><head>Fig. 12 .</head><label>12</label><figDesc>Fig. 12. Solid red: α f,PEF * , arrival curve of f on the toy example, at the output of the packet-elimination function PEF F (f ), obtained by applying Theorem 1. Dashed blue: Cumulative arrival function obtained with the trajectory of Fig. 14, which shows the tightness of the result.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_8"><head>Fig. 13 .</head><label>13</label><figDesc>Fig. 13. Notations of Corollary 1. Flow f is replicated and sent to N parallel systems. Corollary 1 gives the arrival curve α * f at the output of the packet-elimination function PEFn(f ).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_9"><head>Fig. 14 .</head><label>14</label><figDesc>Fig. 14. Trajectory showing that the results of Corollary 1 is tight for the toy example. The cumulative function of f , starting at Time Unit 8 in the above trajectory, is given as a dashed blue line in Fig. 12.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_10"><head>Theorem 2 (</head><label>2</label><figDesc>RTO at the output of a PEF). Consider a flow f , a vertex n containing a packet-elimination function PEF n (f ) and a diamond ancestor a of n in G(f ). Denote by d a→n f [resp., D a→n f ] a lower [resp., upper] delay bound for f between the output of a and the input of PEF n (f ), along any possible path in the graph G(f ). Then λ PEFn(f ) * (f, a), the reordering late time offset (RTO) of f at the output of the PEF, with respect to a, verifies λ PEFn(f ) * (f, a * ) ≤ D a→n f -d a→n f -α ↓ a * (2L min ) +</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_11"><head>Fig. 16 .</head><label>16</label><figDesc>Fig.<ref type="bibr" target="#b15">16</ref>. Trajectory of the packets at the output of the POF of Fig.15when the POF processes the packets from the trajectory of Fig.14.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_12"><head>Fig. 17 .</head><label>17</label><figDesc>Fig. 17. Notations for the analysis of the interactions between PEF and a PFR for a flow f . Vertices of G(f ) are shown in dashed circles/ovals and edges are shown with dotted arrows.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_13"><head></head><label></label><figDesc>). Due to all the possible paths with different lengths, S is neither FIFO nor lossless in the general case. We denote by d [resp., D] a delay lower-bound [resp., upper-bound] for each forwarded d.u. through S. The delays d and D are well-defined because the data units are seen at most once at the output of the PEF. Note that the PEF has no delay, hence d [resp., D] verifies d = d a→n f [resp., D = D a→n f ], i.e., a delay bound along any possible paths a → n is a delay bound through S.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_14"><head>Fig. 18 .</head><label>18</label><figDesc>Fig.<ref type="bibr" target="#b17">18</ref>. Toy example of Fig.2with a per-flow regulator (PFR) placed after the PEF to remove the burstiness increase caused by the redundancy.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_15"><head></head><label></label><figDesc>), then d = d [resp., D = 2D -d] is a lower [resp., an upper] bound on the delay of f through S . The proof combines Theorem 1 with the service-curve characterization of a PFR [9, §1.7.3] to obtain a delay bound within the PFR, see Appendix C.6. Combined with [28, Thm. 7], we directly obtain the following result. Corollary 2 (Bound on the RTO at the output of a PFR placed after a PEF). With the notations of Theorem 3, the RTO of f at the output of PFR n ({f }, a), with reference a, verifies λ n,PFR * (f, a) ≤ λ n,PEF * (f, a) + D -d with λ n,PEF * (f, a) the RTO of f at the output of the PEF, again with respect to the order of the data units at a. Application to the Toy Example: Applying Theorem 3 shows that 2D-d = 14 t.u. is an upper delay bound through S . As it is achieved by d.u. 6 in Fig.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_16"><head>Fig. 22 .</head><label>22</label><figDesc>Fig. 22. Output of the POF and of the PFR of Fig. 21 when they process the trajectory of Fig. 19.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_17"><head></head><label></label><figDesc>, followed by a unique packet-ordering function with configuration POF n (F, a), and finally a regulator with configuration REG n (F, a). Denote by d [resp., D] a lower bound [resp., an upper bound] for the delay of the non-lost data units of F through the system S between a and the output of the PEFs. • If S is lossless for F (i.e. for every data unit m of the aggregate, at least one packet containing m reaches the PEFs), then d [resp., D] is also a lower bound [resp., an upper bound] for the delay of the non-lost data units through S , which we note [d , D ] = [d, D]. • Otherwise, denote by T the timeout value of the POF [28, §III.D]. Then d [resp., D + T ] is a lower bound [resp., an upper bound] for the delay of the data units through S , i.e., [d , D ] = [d, D + T ].</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_18"><head>Fig. 24 .</head><label>24</label><figDesc>Fig.<ref type="bibr" target="#b23">24</ref>. Simplified physical topology of the Volvo core TSN Network. From<ref type="bibr" target="#b34">[35]</ref>.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_19"><head>Fig. 26 .</head><label>26</label><figDesc>Fig. 26. Comparison of the guaranteed ETE latency intervals with several technological choices. Delay bounds without any REG are shown in the middle. The bars on the left are the guaranteed intervals when the flows are regulated after the PEF, but without any POF. When a POF is additionally placed between the PEF and the REG, we obtain the results on the right of the baseline.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_20"><head></head><label></label><figDesc>Jean-Yves Le Boudec (Fellow, IEEE) received the Agr égation degree in mathematics from the École Normale Sup érieure de Saint-Cloud, Paris, in 1980, and the doctorate degree from the University of Rennes, France, in 1984. From 1984 to 1987, he was with INSA/IRISA, Rennes. In 1987, he joined Bell Northern Research, Ottawa, Canada, as a member of scientific staff at the Network and Product Traffic Design Department. In 1988, he joined the IBM Zurich Research Laboratory where he was the Manager of the Customer Premises Network Department. In 1994, he became an Associate Professor at the École Polytechnique F éd érale de Lausanne (EPFL), where he is a Professor. He is a coauthor of a book on network calculus, which serves as a foundation for deterministic networking, an introductory textbook on information sciences, and the author of the book Performance Evaluation. His research interests are in the performance and architecture of communication systems and smart grids. APPENDIX A DISCUSSION ON THE RELATIONSHIP BETWEEN OUR SYSTEM MODEL AND THE TSN AND DETNET DOC-UMENTS.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_21"><head></head><label></label><figDesc>Compound and Member Flows. When defining the redundancy that protects a flow, the working groups of DetNet and TSN use the terms compound and member flows. For example, DetNet PREOFs specifies that, "A DetNet compound flow is a DetNet flow that has been separated into multiple duplicate DetNet member flows for service protection [. . . ]. Member flows are merged back into a single DetNet compound flow [. . . ]" [4, §2.1]. Similarly, TSN FRER indicates that, "A Compound Stream is a Stream composed of one or more Member Streams linked together via Frame Replication and Elimination for Reliability (FRER)" [18, §3].</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_22"><head></head><label></label><figDesc>[4, §4.1.1]. In TSN, "no explicit Stream splitting function [. . . ] is required. Frames in a single Compound Stream can be replicated using the normal multicast mechanisms [. . . ]" [18, §8.1].</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_23"><head>Fig. 27 .</head><label>27</label><figDesc>Fig. 27. Notations for Appendix B. Flow f with input arrival curve α enters system S and exits with an output arrival curve α * .</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_24"><head></head><label></label><figDesc>5. F. Ciucu, J. Schmitt, and H. Wang, "On expressing networks with flow transformations in convolution-form," in 2011 Proceedings IEEE INFOCOM, pp. 1979-1987, Apr. 2011.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_25"><head>Fig. 28 .</head><label>28</label><figDesc>Fig. 28. Notations for Appendix C.1: System from diamond ancestor a to the PEF, focusing on the non-lost data units.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_26"><head></head><label></label><figDesc>As both a * and the output of the PEF are packetized, this also proves that each bit of f that is not lost within S (neither in the cloud of Figure28nor in the PEF) suffers a delay through S that is bounded within [d a→n f , D a→n f ]. We apply Proposition 3 and obtain that α f,a * δ (D a→n f )-(d a→n f</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_27"><head>Proof of Proposition 1 .</head><label>1</label><figDesc>Take a leaky-bucket arrival curve γ r,b . And [d 1 , D 1 ], [d 2 , D 2 ] two intervals of R + . We first prove the result when d 2 -D 1 ≥ b/r, we prove the other situation afterwards. C.3.1 Case d 2 -D 1 ≥ b/r: Applying Corollary 1 with N = 2 systems S 1 , S 2 with bounded intervals [d 1 , D 1 ] and [d 2 , D 2 ] gives that</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_28"><head>1 r(D 1 -d 1 ) b and χ 2 r(D 2 -</head><label>1122</label><figDesc>[d 1 , D 1 ] and [d 2 , D 2 ]. The proof operates in several steps, as follows: C.3.1.1 Definition of several constants used in the proof: We define χ d 2 ) b</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_29"><head>Fig. 29 .</head><label>29</label><figDesc>Fig. 29. Source output in the trajectory achieving the tightness of Corollary 1. Two "initiator" data units are sent at 0 and at D 2 -D 1 .</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_30"><head>1 1 = B 1 χ 1</head><label>1</label><figDesc>of size r(D 1 -d 1 ) and sent at time (D 2 -D 1 ) + (D 1 -d 1 ) = D 2 -d 1 . In Figure 30, χ 2 equals 2, and category B 2 is made of two data-units: B 2 1 , of size b, released at time b/r; and B 2 2 , of size r(D 2 -d 2 ) -b, released at time (D 2 -d 2 ).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_31"><head>Fig. 30 .</head><label>30</label><figDesc>Fig. 30. Example of the source output in the trajectory achieving the tightness, focusing on categories I and B.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_32"><head></head><label></label><figDesc>is shown in Figure31. In the proposed situation, we have ψ = 2 and subcategories S 1 and S 2 are both made of two data-units:S 1 1 [resp., S 2 1 ], of size b, released b r after the last data-unit of B 1 [resp., B 2 ] and S 1 2 [resp., S 2 2 ], of size r(d 2 -D 1 ) -2b, released at (D 2 + d 2 ) -(D 1 + d 1 ) -b r [resp., D 2 -D 1 -b r ].</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_33"><head>2 ψ- 1</head><label>1</label><figDesc>and S 2 ψ , we note that (ψ -1) b r ≤ (d 2 -D 1 ) -b r by properties of the ceiling function and so(D 2 -d 2 ) + (ψ -1) b r ≤ (D 2 -d 2 ) + (d 2 -D 1 ) -b r , i.e., D 2 -d 2 + (ψ -1) b r ≤ D 2 -D 1 -b r , i.e, S2ψ-1 is sent before S 2 ψ</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_34"><head>Lemma 1 (</head><label>1</label><figDesc>Size of the data-units). For any data-unit P described in Paragraph C.<ref type="bibr" target="#b2">3</ref>.1.2, 0 ≤ size(P ) ≤ b Proof of Lemma 1. We focus on certain data-units. © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_35"><head>1 ( 1 2(Fig. 32 .</head><label>1132</label><figDesc>Fig.<ref type="bibr" target="#b31">32</ref>. Source output, with the four categories of data units: I, B, S and X of data-units, in the trajectory achieving the tightness of Corollary 1.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_36"><head>Lemma 2 (</head><label>2</label><figDesc>Minimum time distance between two successive data-units). Consider two successive data-units m, m in the traffic described in Paragraph C.3.1.2, i.e., m is the first dataunit sent after m. Note G(m) and G(m ) the time at which they are generated.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_37"><head>7</head><label>7</label><figDesc></figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_38"><head></head><label></label><figDesc>) and the result holds. If χ 2 ≥ 2, then G(m ) -G(m) = b/r, size(m ) = b and the result holds.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_39"><head>Lemma 3 (</head><label>3</label><figDesc>The source described in Paragraph C.3.1.2 complies with the arrival curve γ r,b ). The traffic generation described in Paragraph C.3.1.2 is γ r,b -constrained.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_40"><head>)Fig. 33 .</head><label>33</label><figDesc>Fig. 33. Dashed blue: Cumulative function R * at the output of the PEF, from the example trajectory of Figure 32. Dashed boxes: Values of interest of the cumulative function, further detailed in Paragraph C.3.1.6. Red dashdotted: Arrival curve obtained from Corollary 1 and recalled in Equation (13).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_41"><head>)</head><label></label><figDesc>And finally, ∀ &gt; 0,R * (D 2 + (d 2 -D 1 ) -b/r + ) = min(E1(m),E2(m))&lt;D2+(d2-D1)-b/r+ size(m)</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_42"><head>χ 1 tC. 6 Proof of Theorem 3 Proof of Theorem 3 .</head><label>1633</label><figDesc>0 + (D 1 -d 1 ) t 0 + D 1 +∞ Applying Item 2/ of Theorem 1 with diamond ancestor a gives that γ r,b δ D-d = γ r,b+r(D-d) is an arrival-curve for f at the input of the PFR. From [9, §1.7.4], a PFR with concave shaping curve σ is a network element that offers σ as a service curve. The PFR is FIFO and lossless, thus we can apply [9, Thm. 1.4.2] and we obtain that D -d (the maximal horizontal distance between the input arrival curve γ r,b+r(D-d) and the service curve γ r,b ) is an upper-bound on the delay of f through the PFR. Adding the already-known delay bounds for S gives those for S . C.7 Proof of Theorem 4 Proof of Theorem 4. Consider a system defined by Figure 20 and by Conditions (a) to (c) of Theorem 4. Take any r &gt; 0, b &gt; 0 and d 1 , D 1 , d 2 , D 2 such that Conditions (d) to (f) of Theorem 4 are met. We first describe the adversarial model applied when D 1 &lt; d 2 . C.7.1 Adversarial model for the case D 1 &lt; d 2 We exhibit an adversarial model M D1&lt;d2 for the sources and for the paths {P j } j such that Properties 1/ to 5/ of Theorem 4 hold for M D1&lt;d2 . C.7.1.1 Constants of M D1&lt;d2 : We define J d 2 -D 1</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_43"><head></head><label></label><figDesc>Fig.<ref type="bibr" target="#b34">35</ref>. Generation of data units for flows f i and f i+1 (i ≤ q -1). Their traffic profile is periodic with period τ . The source sends a data unit for f i at x i + kτ for k ∈ N, then it sends another data unit after a duration I and finally restarts at the next period. The profile for f i+1 is identical and shifted by φ with respect to the one of f i (x i+1 = x i + φ).</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_46"><head>Fig. 36 .</head><label>36</label><figDesc>Fig.<ref type="bibr" target="#b35">36</ref>. Traffic profile for the flows f i and f i+1 at the output of the two adversarial paths P 1 and P 2 , in the model M D 1 &lt;d 2 . P 1 drops all m 1 data units whereas P 2 drops all m 2 data units.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_47"><head>Figure 36</head><label>36</label><figDesc>Figure 36 shows the trajectory at the output the two adversarial paths, focusing on period k and on flows f i and f i+1 . Path P 1 drops the packets containing the data units m 1 i,k and m 1 i+1,k . It forwards those that contain m 2 i,k and m 2 i+1,k with a delay d. Similarly, P 2 drops m 2 i,k and m 2 i+1,k but forwards m 1 i,k and m 1 i+1,k with a delay D. C.7.1.6 Properties of the paths in M D1&lt;d2 : The delay of the non-lost packets through P 1 [resp., through P 2 ] equals d = D 1 [resp., D = d 2 ] that belongs to [d 1 , D 1 ] [resp., to [d 2 , D 2 ] ]. Thus the adversarial paths meet Properties 2/ and 4/ of Theorem 4.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_50"><head></head><label></label><figDesc>51) and (52)</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_0"><head>TABLE 1 Main</head><label>1</label><figDesc>Acronyms Used in the Paper and Comparison with the Terms of the Working Groups.</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_2"><head>TABLE 2 Notations</head><label>2</label><figDesc>Term Definition GThe graph of the network for the class of interest.</figDesc><table /><note><p>f A flow. G(f )</p></note></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_3"><head></head><label></label><figDesc>σ n,f Shaping curve for f at the regulator within n. α f,n * [resp., α f,FUN * ] For n a vertex in G [resp., FUN a function], the arrival curve of f at the output of n [resp., of the function FUN]. γ r,b : t → rt + bLeaky-bucket arrival curve with rate r and burst b</figDesc><table><row><cell>δ D :</cell><cell>t → ∞ if t &gt; D</cell><cell>Service-curve of a D-bounded-Delay element</cell></row><row><cell></cell><cell>|x| +</cell><cell>= max(0, x)</cell></row><row><cell></cell><cell>t.u.</cell><cell>Time unit (arbitrary unit used in the examples)</cell></row><row><cell></cell><cell>d.u.</cell><cell>Data unit (arbitrary unit used in the examples)</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_6"><head></head><label></label><figDesc>Fig. 9. Model of a regulator REGn(F, o), with shaping curves {σ n,f } f .</figDesc><table><row><cell>m ∈ F</cell><cell>REG n (F, o)</cell></row><row><cell>FIFO</cell><cell>{σ n,f } f ∈F</cell></row><row><cell></cell><cell>Functions</cell></row><row><cell></cell><cell>PEF: For a flow f crossing n, the output port in n can contain</cell></row><row><cell></cell><cell>a packet-elimination function (PEF) for flow f , noted PEF n (f ).</cell></row><row><cell></cell><cell>For each incoming packet of f , we assume that PEF n (f )</cell></row><row><cell></cell><cell>determines without any delay if the data unit contained in</cell></row><row><cell></cell><cell>the packet has already been observed by PEF n (f ). If so, the</cell></row><row><cell></cell><cell>packet is identified as a duplicate and is discarded. For the</cell></row><row><cell></cell><cell>stream of packets that contains never-seen data units of f ,</cell></row><row><cell></cell><cell>the PEF n (f ) is transparent: FIFO and without any delay.</cell></row><row><cell></cell><cell>POF: Consider a set of flows F crossing n such that for</cell></row><row><cell></cell><cell>each flow f ∈ F, o is a diamond ancestor of n in G(f ). The</cell></row><row><cell></cell><cell>output port in n can contain a packet-ordering function (POF)</cell></row><row><cell></cell><cell>for the aggregate F with reference o, noted POF n (F, o). We</cell></row><row><cell></cell><cell>assume that POF n (F, o) has the knowledge of the order in</cell></row><row><cell></cell><cell>which the data units belonging to the aggregate F exited the</cell></row><row><cell></cell><cell>reference o. POF n (F, o) then enforces the same order at its</cell></row><row><cell></cell><cell>own output, by delaying the packets that are out of order.</cell></row><row><cell></cell><cell>However, a data unit m cannot be delayed by POF n (F, o)</cell></row><row><cell></cell><cell>for a duration longer than the POF's timeout parameter</cell></row><row><cell cols="2">© 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See</cell></row><row><cell cols="2">https://www.ieee.org/publications/rights/index.html for more information.</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_10"><head>Table 3</head><label>3</label><figDesc>summarizes the benefits and drawbacks of using regulators after a PEF, as analyzed in Sections 6.1 and 6.2.</figDesc><table /><note><p>© 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_11"><head>TABLE 3</head><label>3</label><figDesc>Benefits and Drawbacks of Several Configurations, Compared to the Situation with the PEF(s) only.</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_12"><head>TABLE 4 Traffic</head><label>4</label><figDesc>Profiles. Realistic Use-Case Based on the Values for Command and Control Flows in [35, Page 13].</figDesc><table><row><cell>Name</cell><cell>Payload size</cell><cell>Period at source</cell><cell>Deadline</cell></row><row><cell>S</cell><cell>64B</cell><cell>0.5ms</cell><cell>0.2ms</cell></row><row><cell>M1</cell><cell>92B</cell><cell>2ms</cell><cell>0.8ms</cell></row><row><cell>M2</cell><cell>120B</cell><cell>3.5ms</cell><cell>1.4ms</cell></row><row><cell>B</cell><cell>150B</cell><cell>5ms</cell><cell>2ms</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_13"><head>TABLE 5 Flow</head><label>5</label><figDesc>Path for i ∈ {1, 2, 3, 4}, p ∈ {S, M1, M2, B}.</figDesc><table><row><cell>Name</cell><cell>Source</cell><cell>Dest.</cell><cell>Redundancy</cell></row><row><cell>C_MCUi_P12_p</cell><cell>MCUi</cell><cell>P1, P2</cell><cell>For C_MCU3_P12_p [resp., C_MCU4_P12_p], dest. P2 [resp., P1] is not protected</cell></row><row><cell>C_P1_MCUi_p</cell><cell>P1</cell><cell>MCUi</cell><cell>Except for C_P1_MCU1_p</cell></row><row><cell>C_P2_MCUi_p</cell><cell>P2</cell><cell>MCUi</cell><cell>Except for C_P2_MCU3_p</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_14"><head></head><label></label><figDesc>[4, §3.2.2.2], the DetNet working group states that the "order in which a DetNet node applies PEF [and] POF [. . . ] to a DetNet flow is left open for implementations". This is however contradicted by both [4, §3.2.2.1.] and [18, §7.1.1.m]</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_15"><head>TABLE 7</head><label>7</label><figDesc>Generation of the Data-Units of Category B in the Trajectory that Achieves the Tightness of Corollary 1.</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_16"><head>TABLE 8</head><label>8</label><figDesc>Generation of the Data-Units of Category S in the Trajectory that Achieves the Tightness of Corollary 1.</figDesc><table><row><cell>Data unit m</cell><cell>Size, size(m)</cell><cell>Generation time, G</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_17"><head>TABLE 9</head><label>9</label><figDesc>Generation of the Data-units of Category X in the Trajectory that Achieves the Tightness of Corollary 1.</figDesc><table><row><cell cols="2">Data unit m</cell><cell>Size, size(m)</cell><cell>Generation time, G(m)</cell></row><row><cell>∀k ∈ N  *  ,</cell><cell>X k</cell><cell>b</cell><cell>(D 2 + d 2 ) -(D 1 + d 1 ) + (k -1) b r</cell></row><row><cell cols="4">Note that for any value of ψ, by Table 8,</cell></row><row><cell cols="2">∀j ∈ {1, 2}</cell><cell cols="2">j k size(S</cell></row><row><cell></cell><cell></cell><cell>k∈ 1,ψ</cell><cell></cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_18"><head>Table 9</head><label>9</label><figDesc></figDesc><table /><note><p><p><p><p>)</p>• Case m, m ∈ X: clear as well (Table</p>9</p>) © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_19"><head></head><label></label><figDesc>proves that any packet transporting a data unit of type B 2 through S 2 has a delay through S 2 bounded in [d 2 , D 2 ].</figDesc><table /><note><p>C.3.1.6 Properties of the output cumulative function: Call R * the output cumulative function of the flow at the output of the PEF. Any data unit m is released as © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_20"><head>TABLE 10 Absolute</head><label>10</label><figDesc>Release Time for Each Packet at the Output of Each System S 1 , S 2 Data unit, m G(m), generation time E 1 (m), exit time out of S 1 for the packet E 2 (m), exit time out of S 2 for the packet transporting m through S 1 transporting m through S 2 I 2</figDesc><table /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_21"><head>TABLE 13 Absolute</head><label>13</label><figDesc>Release Time for Each Packet at the Output of Each System S 1 , S 2 , in the Case d 2 -D 1 ≤ b/r. Data unit, m G(m), Generation time E 1 (m), exit time out of S 1 for the packet E 2 (m), exit time out of S 2 for the packet transporting m through S 1 transporting m through S 2 ∀k ∈ 1, χ 2 -1 , B 2 k t 0 -D 2 + D 1 + (k -1) b</figDesc><table><row><cell></cell><cell>B 2 χ 2</cell><cell>t 0 -b/r</cell><cell>r</cell><cell>+∞ +∞</cell><cell>t 0 + D 1 t 0 + D 1</cell></row><row><cell></cell><cell>I</cell><cell>t 0</cell><cell></cell><cell>t 0 + D 1</cell><cell>+∞</cell></row><row><cell>∀k ∈ 1, χ 1 -1 ,</cell><cell>B 1 k B 1</cell><cell>t 0 + k b r</cell><cell></cell><cell>t 0 + D 1</cell><cell>+∞</cell></row></table></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" type="table" xml:id="tab_22"><head></head><label></label><figDesc>Fig.38. Traffic profile for the flows f i and f i+1 at the output of the two adversarial paths P 1 and P 2 , in the model M d 2 &lt;D 1 . P 1 drops all m 2 data units whereas P 2 drops all m 2 data units. With respect to Figure36, the roles of P 1 and P 2 have been exchanged.</figDesc><table><row><cell>m 1 i,k</cell><cell>m 1 i+1,k</cell><cell>m 2 i,k</cell><cell>m 2 i+1,k</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>. . .</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>in</cell></row><row><cell></cell><cell></cell><cell>m 1 i,k</cell><cell cols="2">m 1 i+1,k</cell></row><row><cell></cell><cell>D</cell><cell></cell><cell></cell><cell>. . .</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>outP 1</cell></row><row><cell></cell><cell></cell><cell>x i + kτ</cell><cell cols="2">x i+1 + kτ</cell></row><row><cell></cell><cell></cell><cell>+D</cell><cell cols="2">+D</cell></row><row><cell></cell><cell></cell><cell cols="2">m 2 i,k</cell><cell>m 2 i+1,k</cell></row><row><cell></cell><cell></cell><cell>d</cell><cell></cell><cell>. . .</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>outP 2</cell></row><row><cell></cell><cell></cell><cell cols="2">x i + kτ</cell><cell>x i+1 + kτ</cell></row><row><cell></cell><cell></cell><cell cols="2">+I + d</cell><cell>+I + d</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>51) and (52)</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>= φ + J -I</cell><cell>(39) and (45)</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>= &gt; 0</cell><cell>(43)</cell></row><row><cell></cell><cell></cell><cell></cell><cell></cell><cell>(53)</cell></row></table></figure>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" xml:id="foot_0"><p>© 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="3" xml:id="foot_1"><p>Y. Jiang and Y. Liu, Stochastic Network Calculus. London: Springer-Verlag, 2008. https://www.springer.com/gp/book/ 9781848001268. © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" xml:id="foot_2"><p>α ( ) ≥ R * (D 2 + ) -R * (D 2 )© 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="6" xml:id="foot_3"><p>Here we use the traditional convention that cumulative functions are left-continuous. A discussion of this assumption is available in [9, §1.1.1]. © 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note>
			<note xmlns="http://www.tei-c.org/ns/1.0" place="foot" n="7" xml:id="foot_4"><p>If b is larger than the maximal packet length, then the source sends several data units simultaneously such that the sum of their length equal b. In this case, m 1 i,k and m 2 i,k represent the set of these data units.© 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See https://www.ieee.org/publications/rights/index.html for more information.</p></note>
		</body>
		<back>
			<div type="annex">
<div xmlns="http://www.tei-c.org/ns/1.0"><p>Ludovic Thomas (Graduate Student Member, IEEE) obtained his Master's degree in Aerospace Engineering from ISAE-SUPAERO in 2018. He performed his final-year internship at the French aerospace agency where he studied the effects of fully-encrypted transport-layer protocols (such as QUIC) on the performance of satellite Internet access. He is currently a PhD student at ISAE-SUPAERO in collaboration with EPFL and focuses on the deterministic performance analysis of Time-Sensitive Networking (TSN) technologies using the network-calculus framework. His research interests include the performance analysis of computer networks using measurements, simulations and deterministic approaches.</p><p>With <ref type="bibr" target="#b21">(22)</ref> and <ref type="bibr" target="#b22">(23)</ref> this gives, ∀ &gt; 0,</p><p>This is valid for any choice of &gt; 0 thus lim t→0 α (t) ≥ 2b + r(D 1 -d 1 + D 2 -d 2 ), which gives:</p><p>Similarly, ∀ &gt; 0,</p><p>) with <ref type="bibr" target="#b21">(22)</ref> and <ref type="bibr" target="#b23">(24)</ref>, we obtain, ∀ &gt; 0,</p><p>) this is again valid for any value &gt; 0 so lim →0 α (d 2 -</p><p>, which gives</p><p>(32) And using the above properties, we can prove the following result Lemma 6. For any t &gt; 0, α † (t) ≥ α * (t) where α * is the VBR obtained by applying Corollary 1 and given in <ref type="bibr" target="#b12">(13)</ref>.</p><p>Proof of Lemma 6.</p><p>• If 0 &lt; t &lt; d 2 -D 1 -b r , then we use the fact that α † is concave on R+. Define</p><p>then, by definition of a concave function,</p><p>) and ( <ref type="formula">13</ref>)</p><p>By <ref type="bibr" target="#b25">(26)</ref>, Lemma 6 proves that ∀t &gt; 0, α (t) ≥ α * (t) and by definition of an arrival curve, α (0) = α * (0) = 0. We hence have proved that α * is a better arrival curve for f at the output of the PEF than α . This is valid for any VBR curve α that is an arrival curve for f at the output of the PEF. Therefore α * obtained using Corollary 1 is the best VBR arrival curve for f at the output of the PEF. </p><p>In this case, the leaky-bucket γ 2r,2b+r(D1-d1+D2-d2) is always larger than γ r,b+r(D2-d1) . Thus the application of Corollary 1 gives that the leaky-bucket α * = γ r,b+r(D2-d1) is an arrival curve for f at the output of the PEF in Figure <ref type="figure">13</ref>. Using the same rationale as for the previous case, we can use a greedy source that generates packets with a long-term rate of r, thus any arrival curve for f at the output of the PEF must also have a long-term rate larger than r.</p><p>Therefore, the proof of tightness needs only to exhibit a trajectory that creates a burst as big as b + r(D 2 -d 1 ). This is done as follows.</p><p>C.3.2.1 Definition of several constants: We define</p><p>Note that both χ 1 ≥ 1 and χ 2 ≥ 1. We further consider a time instant t 0 such that t 0 &gt; D 2 -D 1 . C.3.2.2 Description of the traffic generation at the source: We classify the data units generated by the source into two categories: I, B. Category B is then subdivided into subcategories B 1 and B 2 . The category of a data unit defines the role that the data unit has in the trajectory. This notion is only used in the proof and does not relate to any physical property of the data units.</p><p>Category I The source generates a unique data unit I at absolute time t 0 , of length b (see Table <ref type="table">11</ref>).</p><p>Note: The role of the data unit</p><p>Category B In addition, the source generates χ 1 data units of subcategory B 1 and χ 2 data units of subcategory B 2 , as described in Table <ref type="table">12</ref>.</p><p>A possible output of the source when combining categories I and B is shown in Figure <ref type="figure">34</ref>. In the proposed situation, we have χ 1 = χ 2 = 2. Both subcategories B 1 and B 2 are made of two data units. The data units of B 2 are sent before I whereas the data units of B 1 are sent after I.</p><p>We note that, for any value of χ 1 , χ 2 ,</p><p>and</p><p>© 2022 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.See <ref type="url" target="https://www.ieee.org/publications/rights/index.html">https://www.ieee.org/publications/rights/index.html</ref> for more information. C.3.2.3 Properties of the traffic generation at the source: As for the previous case, we prove that Lemmas 1 and 2 hold for the traffic described in C.3.2.2. This is clear for most pair of data units, let us show it for example for data units B 2 χ 2 -1 and B 2 χ 2 :</p><p>Therefore, Lemma 3 also holds for the traffic described in C.3.2.2. The traffic described in the trajectory is γ r,bconstrained.</p><p>C.3.2.4 Description of the systems S 1 , S 2 : With the same notations and conventions as for the previous case, the systems S 1 and S 2 release the packets containing the different data units at the time instants shown in Table <ref type="table">13</ref>.</p><p>C.3.2.5 Properties of the systems S 1 , S 2 : As for the previous case, we can also prove that Lemma 4 holds for the systems S 1 , S 2 described above. This is clear from Table <ref type="table">13</ref> for most data units. For example, the delay of the packet transporting the data unit B 2 χ 2 through S 2 is at least d 2 because, by assumption, d 2 -D 1 ≤ b r . C.3.2.6 Properties of the output cumulative function: In the trajectory of Table <ref type="table">13</ref>, all data units exit the PEF at t 0 + D 1 . We hence have created a burst of size size(I)</p><p>Therefore, any curve that is an arrival curve of f at the output of the PEF should have a limit at 0 at least larger than b + r(D 2 -d 1 ) and a long-term rate at least larger than r. Thus any such curve that is in addition concave on R * + must hence be larger than the leaky-bucket arrival curve γ r,b+r(D2-d1) . In particular, any VBR arrival curve (concave on R * + by definition) is larger than γ r,b+r(D2-d1) .</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>C.4 Proof of Proposition 2</head><p>Proof of Proposition 2. Consider the flow f and two observation points v, w such that v is in vertex n, w is in vertex o, n is not an EP-vertex of G(f ), o is a diamond ancestor of n in G(f ), and the flow f is packetized at v, w.</p><p>Therefore, m 1 i+1,k , the first packet of the flow f i+1 in the kth period exits the PEFs seconds after the second packet of the flow f i in the k-th period, as described in Figure <ref type="figure">37</ref>. C.7.1.9 Output of the IR in M D1&lt;d2 : For i ∈ 1, q , n ∈ N and w ∈ {1, 2}, we denote by D w i,k the absolute time at which data unit m w i,k leaves the IR. The bottom line of Figure <ref type="figure">37</ref> shows the release time of the data units out of the IR. Assume for example that the source has been idle for a while, then the regulator is empty and data unit m 1 i,k can be released immediately without violating the shaping curve for f i , thus D 1 i,k = A 1 i,k . However, data unit m 2 i,k arrives at the IR too soon with respect to the shaping curve σ fi . By applying the equations of the IR <ref type="bibr" target="#b11">[12]</ref>, we note that the IR must delay m 2 i,k and</p><p>By (53), data unit m 1 i+1,k arrives after the data unit m 2 i,k . As the IR looks only at the head-of-line packet and is itself a FIFO system, we obtain</p><p>Combining Equations ( <ref type="formula">54</ref>) and (55) gives, by induction,</p><p>Now we note that</p><p>Therefore, the first data unit of the (k + 1)-th period of f 1 arrives seconds after the second data unit of the k-th period of the last flow f q . The IR being FIFO, we have</p><p>which, combined with (55), gives</p><p>At period k = 0, the network is empty and</p><p>And the delay, through the IR, suffered by the first data unit of the k-th period of the first flow f 1 is The adversarial model M d2&lt;D1 follows the same principle as the adversarial model M D1&lt;d2 described above. In the following, we detail only the differences. C.7.2.1 Constants of M d2&lt;D1 : By assumption, D 1d 2 &gt; 0. Furthermore, q min now equals 3 and q ≥ q min , q-2 2 b r &gt; 0. We hence select J such that</p><p>And we re-define</p><p>As J &lt; D 1 -d 2 =, J &gt; 0, and D 2 ≥ D 1 by on the indexes, we obtain</p><p>By definition, 2 q-2 J &lt; b r , thus we define , I, φ, τ and x i as in Appendix C.7.1.1, i.e., per Equations ( <ref type="formula">41</ref>), ( <ref type="formula">42</ref>), ( <ref type="formula">43</ref> C.7.2.5 Adversarial paths in M d2&lt;D1 : With respect to the model M D1&lt;d2 , the adversarial model M d2&lt;D1 sim- ply flips the the roles of each paths. Specifically, -For any k ∈ N and any i ∈ 1, q , path P 1 forwards the packet containing the data unit m 1 i,k with a delay D and drops the packet containing the data unit m 2 i,k . -For any k ∈ N and any i ∈ 1, q , path P 2 drops the packet containing the data unit m 1 i,k and forwards the packet containing the data unit m 2 i,k with a delay d. -Any other path P j with j ≥ 3 drops all packets. The output of both paths is shown in Figure <ref type="figure">38</ref>. We can note the symmetry with Figure <ref type="figure">36</ref>. C.7.2.6 Properties of the paths in M d2&lt;D1 : The packets not lost in P 1 have the same delay through P 1 equal to D. Similarly, the packets not lost in P 2 have the same delay through P 2 equal to d. As for the M D1&lt;d2 model, each data unit arrives in a unique packet at the PEFs (m 1 data units arrive only through P 1 and m 2 data units arrive only through P 2 ). Thus the PEFs are transparent and forward the sum of both output traffic, outP 1 and outP 2 from Figure <ref type="figure">38</ref>. We observe that the sum of them gives the same output as on the first line of Figure <ref type="figure">37</ref>.</p><p>Therefore, all the remaining steps of the proof (properties on the system S, output of the IR with diverging delays) can be followed as in the model M D1&lt;d2 . </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>C.8 Proof of Corollary 3</head><p>Proof of Corollary 3. We simply construct S as a system containing a packet-replication function (PRF), two alternative paths P 1 , P 2 and a set of PEFs, as in Figure <ref type="figure">20</ref>. We then apply Theorem 4 with lossless and FIFO paths P 1 and P 2 that have both the same delay interval</p><p>C.9 Proof of Theorem 5</p><p>Proof of Theorem 5. We denote by [d † , D † ] the lower and upper delay bounds of the non-lost data units through the system S † between the output of a and the output of the POF (Figure <ref type="figure">23</ref>). The output of a vertex corresponds to the output of the packetizer, thus the flow aggregate F is packetized at the output of vertex a. We can hence define the packet sequence (A, L, F ) for the aggregate F as in [12, §II.A]:</p><p>• A is the sequence of the arrival times at the observation point a * for the data units that belong to the flow aggregate F. A is a wide-sense increasing sequence. I.e., A n is the arrival time at a * of the n-th data unit of the aggregate F. • L is the sequence of packet length for the above data units. I.e., L n is the length of the packet that transports the n-th data unit that arrives at a * and belongs to F. • F is the sequence of flow identifiers for the above data units. I.e., F n = f means that the n-th data unit of the aggregate F at a * belongs to flow f . We also define the Π f regulator for each flow f of F that corresponds to the shaping curve σ f,n of the IR REG n (F, a) [12, IV.A]. By configuration of REG n (F, a), each flow f of the aggregate is σ f,n -constrained thus Π f -regular at a * , the input of the systems S, S † and S .</p><p>-If S is lossless for F, we apply [28, Theorem 4] and obtain d † = d and D † = D.</p><p>Then, by definition of the POF and considering its configuration POF n ({f }, a), system S † is FIFO and lossless for the aggregate F processed by the regulator. Therefore, applying <ref type="bibr" target="#b11">[12,</ref><ref type="bibr">Theorem 5]</ref>  Then, by definition of the POF and considering its configuration POF n ({f }, a), system S † is FIFO but not lossless for the aggregate F processed by the regulator.</p><p>Like in the proof of Proposition 3, we decompose the packet sequence (A, L, F ) at the input of S † into the subsequences (A 1 , L 1 , F 1 ) and (A 2 , L 2 , F 2 ) that correspond respectively to the data units that are not lost inside S † and to the data units that are lost inside S † .</p><p>We consider the cumulative functions R f,1 and R f,2 of each flow f that correspond to the sequence (A 1 , L 1 , F 1 ) and (A 2 , L 2 , F 2 ), respectively. Then, R f R f,1 + R f,2 , the overall cumulative function, corresponds to the sequence (A, L, F ) for flow f thus R f is σ f,n -constrained. Re-using an argument from the proof of Proposition 3, the cumulative sub-function R f,1 remains σ f,n -constrained. Thus flow f in sub-sequence (A 1 , L 1 , F 1 ) remains Π f -regular.</p><p>Therefore, we apply <ref type="bibr" target="#b11">[12,</ref><ref type="bibr">Theorem 5]</ref> on the sub-sequence (A 1 , L 1 , F 1 ) and we obtain that for the corresponding IR output sequence (D 1 , L 1 , F 1 ), the delay through S verifies </p></div>			</div>
			<div type="references">

				<listBibl>

<biblStruct xml:id="b0">
	<monogr>
		<title level="m" type="main">P802.1DP -TSN for Aerospace Onboard Ethernet Communications</title>
		<author>
			<persName><forename type="first">Sae</forename><surname>Ieee</surname></persName>
		</author>
		<ptr target="https://1.ieee802.org/tsn/802-1dp/" />
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b1">
	<monogr>
		<title level="m" type="main">IEC/IEEE 60802 -Time-Sensitive Networking Profile for Industrial Automation</title>
		<author>
			<persName><forename type="first">Ieee</forename><surname>Iec</surname></persName>
		</author>
		<idno>IEC/IEEE 60802</idno>
		<ptr target="http://www.ieee802.org/1/files/private/60802-drafts/d1/60802-d1-1.pdf" />
		<imprint>
			<date type="published" when="2019">2019</date>
			<biblScope unit="volume">1</biblScope>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b2">
	<monogr>
		<title level="m" type="main">Draft Standard for Local and metropolitan area networks -Time-Sensitive Networking Profile for Automotive In-Vehicle Ethernet Communications</title>
		<author>
			<persName><surname>Ieee</surname></persName>
		</author>
		<idno>IEEE802.1</idno>
		<ptr target="http://www.ieee802.org/1/files/private/dg-drafts/d1/802-1DG-d1-1.pdf" />
		<imprint>
			<date type="published" when="2019-10">Oct. 2019</date>
		</imprint>
	</monogr>
	<note>private repository. To obtain the access credentials. htm or contact the IEEE802.1 chair.</note>
</biblStruct>

<biblStruct xml:id="b3">
	<analytic>
		<title level="a" type="main">Deterministic Networking Architecture</title>
		<author>
			<persName><forename type="first">N</forename><surname>Finn</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Thubert</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Varga</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Farkas</surname></persName>
		</author>
		<ptr target="https://www.rfc-editor.org/info/rfc8655" />
	</analytic>
	<monogr>
		<title level="j">RFC</title>
		<imprint>
			<biblScope unit="volume">8655</biblScope>
			<date type="published" when="2019">2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b4">
	<monogr>
		<title level="m" type="main">TSN Basic Concepts</title>
		<author>
			<persName><forename type="first">J</forename><surname>Farkas</surname></persName>
		</author>
		<ptr target="https://www.ieee802.org/1/files/public/docs2018/detnet-tsn-farkas-tsn-basic-concepts-1118-v01.pdf" />
		<imprint>
			<date type="published" when="2018-11">Nov. 2018</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b5">
	<monogr>
		<title level="m" type="main">Deterministic Network Calculus: From Theory to Practical Implementation. Networks and Telecommunications</title>
		<author>
			<persName><forename type="first">A</forename><surname>Bouillard</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Boyer</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><forename type="middle">Le</forename><surname>Corronc</surname></persName>
		</author>
		<idno type="DOI">10.1002/9781119440284</idno>
		<ptr target="http://doi.org/10.1002/9781119440284" />
		<imprint>
			<date type="published" when="2018">2018</date>
			<publisher>Wiley</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b6">
	<analytic>
		<title level="a" type="main">IEEE Standard for Local and Metropolitan Area Network-Bridges and Bridged Networks</title>
		<idno>802.1Q-2018</idno>
	</analytic>
	<monogr>
		<title level="j">IEEE Std</title>
		<imprint>
			<biblScope unit="volume">802</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="1" to="1993" />
			<date type="published" when="2018-07">July 2018</date>
		</imprint>
	</monogr>
	<note>IEEE Std</note>
</biblStruct>

<biblStruct xml:id="b7">
	<monogr>
		<title level="m" type="main">DetNet bounded latency</title>
		<author>
			<persName><forename type="first">N</forename><surname>Finn</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-Y</forename><forename type="middle">L</forename><surname>Boudec</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Mohammadpour</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Zhang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Varga</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Farkas</surname></persName>
		</author>
		<ptr target="https://datatracker.ietf.org/doc/html/draft-ietf-detnet-bounded-latency-08" />
		<imprint>
			<date type="published" when="2022-01">Jan. 2022</date>
		</imprint>
	</monogr>
	<note type="report_type">Internet-Draft draftietf-detnet-bounded-latency-08, Internet Engineering Task Force / Internet Engineering Task Force</note>
</biblStruct>

<biblStruct xml:id="b8">
	<analytic>
		<title level="a" type="main">Network Calculus: A Theory of Deterministic Queuing Systems for the Internet</title>
		<author>
			<persName><forename type="first">J.-Y. Le</forename><surname>Boudec</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Thiran</surname></persName>
		</author>
		<ptr target="https://www.springer.com/us/book/9783540421849" />
	</analytic>
	<monogr>
		<title level="s">Lecture Notes in Computer Science, Lect.Notes Computer. Tutorial, Berlin Heidelberg</title>
		<imprint>
			<date type="published" when="2001">2001</date>
			<publisher>Springer-Verlag</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b9">
	<monogr>
		<title level="m" type="main">Aircraft Data Network Part 7, Avionics Full Duplex Switched Ethernet (AFDX) Network, ARINC Specification 664</title>
		<author>
			<persName><forename type="first">Aee</forename><surname>Committee</surname></persName>
		</author>
		<author>
			<persName><surname>Others</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2002">2002</date>
			<publisher>Aeronautical Radio</publisher>
			<pubPlace>Annapolis, Maryland</pubPlace>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b10">
	<analytic>
		<title level="a" type="main">Latency and Backlog Bounds in Time-Sensitive Networking with Credit Based Shapers and Asynchronous Traffic Shaping</title>
		<author>
			<persName><forename type="first">E</forename><surname>Mohammadpour</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Stai</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Mohiuddin</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-Y. Le</forename><surname>Boudec</surname></persName>
		</author>
		<idno type="DOI">10.1109/ITC30.2018.10053</idno>
		<ptr target="http://doi.org/10.1109/ITC30.2018.10053" />
	</analytic>
	<monogr>
		<title level="m">2018 30th International Teletraffic Congress (ITC 30)</title>
		<imprint>
			<date type="published" when="2018-09">Sept. 2018</date>
			<biblScope unit="volume">02</biblScope>
			<biblScope unit="page" from="1" to="6" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b11">
	<analytic>
		<title level="a" type="main">A Theory of Traffic Regulators for Deterministic Networks With Application to Interleaved Regulators</title>
		<author>
			<persName><forename type="first">J.-Y. Le</forename><surname>Boudec</surname></persName>
		</author>
		<idno type="DOI">10.1109/TNET.2018.2875191</idno>
		<ptr target="http://doi.org/10.1109/TNET.2018.2875191" />
	</analytic>
	<monogr>
		<title level="j">IEEE/ACM Transactions on Networking</title>
		<imprint>
			<biblScope unit="volume">26</biblScope>
			<biblScope unit="page" from="2721" to="2733" />
			<date type="published" when="2018-12">Dec. 2018</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b12">
	<analytic>
		<title level="a" type="main">On Cyclic Dependencies and Regulators in Time-Sensitive Networks</title>
		<author>
			<persName><forename type="first">L</forename><surname>Thomas</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-Y. Le</forename><surname>Boudec</surname></persName>
		</author>
		<author>
			<persName><forename type="first">A</forename><surname>Mifdaoui</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2019 IEEE Real-Time Systems Symposium (RTSS)</title>
		<imprint>
			<date type="published" when="2019-12">Dec. 2019</date>
			<biblScope unit="page" from="299" to="311" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b13">
	<analytic>
		<title level="a" type="main">On Time Synchronization Issues in Time-Sensitive Networks with Regulators and Nonideal Clocks</title>
		<author>
			<persName><forename type="first">L</forename><surname>Thomas</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-Y. Le</forename><surname>Boudec</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Proceedings of the ACM on Measurement and Analysis of Computing Systems</title>
		<imprint>
			<biblScope unit="volume">4</biblScope>
			<biblScope unit="page">41</biblScope>
			<date type="published" when="2020-06">June 2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b14">
	<analytic>
		<title level="a" type="main">Network calculus results for tsn: An introduction</title>
		<author>
			<persName><forename type="first">L</forename><surname>Maile</surname></persName>
		</author>
		<author>
			<persName><forename type="first">K.-S</forename><surname>Hielscher</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>German</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2020 Information Communication Technologies Conference (ICTC)</title>
		<imprint>
			<publisher>IEEE</publisher>
			<date type="published" when="2020">2020</date>
			<biblScope unit="page" from="131" to="140" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b15">
	<monogr>
		<title level="m" type="main">Quantitative Performance Comparison of Various Traffic Shapers in Time-Sensitive Networking</title>
		<author>
			<persName><forename type="first">L</forename><surname>Zhao</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Pop</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Steinhorst</surname></persName>
		</author>
		<idno type="arXiv">arXiv:2103.13424</idno>
		<ptr target="http://arxiv.org/abs/2103.13424" />
		<imprint>
			<date type="published" when="2021-03">Mar. 2021</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b16">
	<monogr>
		<title level="m" type="main">Time-Sensitive Networking (TSN) Task Group</title>
		<ptr target="https://1.ieee802.org/tsn/" />
		<imprint/>
	</monogr>
</biblStruct>

<biblStruct xml:id="b17">
	<analytic>
		<title level="a" type="main">IEEE Standard for Local and metropolitan area networks-Frame Replication and Elimination for Reliability</title>
		<author>
			<persName><surname>Ieee</surname></persName>
		</author>
		<idno type="DOI">10.1109/IEEESTD.2017.8091139</idno>
		<ptr target="https://doi.org/10.1109/IEEESTD.2017.8091139" />
	</analytic>
	<monogr>
		<title level="j">IEEE Std</title>
		<imprint>
			<biblScope unit="volume">802</biblScope>
			<biblScope unit="page" from="1" to="102" />
			<date type="published" when="2017-10">Oct. 2017</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b18">
	<monogr>
		<title level="m" type="main">Request for Comments RFC 2475, Internet Engineering Task Force</title>
		<author>
			<persName><forename type="first">D</forename><forename type="middle">L</forename><surname>Black</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Z</forename><surname>Wang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><forename type="middle">A</forename><surname>Carlson</surname></persName>
		</author>
		<author>
			<persName><forename type="first">W</forename><surname>Weiss</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><forename type="middle">B</forename><surname>Davies</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><forename type="middle">L</forename><surname>Blake</surname></persName>
		</author>
		<ptr target="https://datatracker.ietf.org/doc/rfc2475" />
		<imprint>
			<date type="published" when="1998-12">Dec. 1998</date>
		</imprint>
	</monogr>
	<note>An Architecture for Differentiated Services</note>
</biblStruct>

<biblStruct xml:id="b19">
	<monogr>
		<title level="m" type="main">Draft Standard for Local and Metropolitan Area Networks-Bridges and Bridged Networks-Amendment: Asynchronous Traffic Shaping</title>
		<author>
			<persName><surname>Ieee</surname></persName>
		</author>
		<idno>IEEE802.1</idno>
		<ptr target="http://www.ieee802.org/1/files/private/cr-drafts/d2/802-1Qcr-d2-0.pdf" />
		<imprint>
			<date type="published" when="2019-12">Dec. 2019</date>
		</imprint>
	</monogr>
	<note>private repository. Access credentials: User: &apos;p8021&apos; Password: &apos;go wildcats</note>
</biblStruct>

<biblStruct xml:id="b20">
	<monogr>
		<title level="m" type="main">Real-Time Guarantees, Dependability and Self-Configuration in Future Avionic Networks</title>
		<author>
			<persName><forename type="first">P</forename><surname>Heise</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2018">2018</date>
			<pubPlace>Siegen</pubPlace>
		</imprint>
		<respStmt>
			<orgName>Universitätsbibliothek der Universität Siegen</orgName>
		</respStmt>
	</monogr>
	<note type="report_type">PhD thesis</note>
</biblStruct>

<biblStruct xml:id="b21">
	<analytic>
		<title level="a" type="main">SAFDX: Deterministic high-availability ring for industrial low-cost networks</title>
		<author>
			<persName><forename type="first">P</forename><surname>Heise</surname></persName>
		</author>
		<author>
			<persName><forename type="first">N</forename><surname>Tobeck</surname></persName>
		</author>
		<author>
			<persName><forename type="first">O</forename><surname>Hanka</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Schneele</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2014 7th International Workshop on Communication Technologies for Vehicles (Nets4Cars-Fall)</title>
		<imprint>
			<date type="published" when="2014-10">Oct. 2014</date>
			<biblScope unit="page" from="40" to="44" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b22">
	<monogr>
		<title level="m" type="main">IEC 62439-3:2016 -IEC Webstore -smart manufacturing</title>
		<author>
			<persName><surname>Iec</surname></persName>
		</author>
		<ptr target="https://webstore.iec.ch/publication/24447" />
		<imprint/>
	</monogr>
	<note>industrie 4.0, industry 4.0</note>
</biblStruct>

<biblStruct xml:id="b23">
	<analytic>
		<title level="a" type="main">Redundancy Management for Safety-Critical Applications with Time Sensitive Networking</title>
		<author>
			<persName><forename type="first">M</forename><surname>Pahlevan</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Obermaisser</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2018 28th International Telecommunication Networks and Applications Conference (ITNAC)</title>
		<imprint>
			<date type="published" when="2018-11">Nov. 2018</date>
			<biblScope unit="page" from="1" to="7" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b24">
	<analytic>
		<title level="a" type="main">Formal Specification and Analysis of AFDX Redundancy Management Algorithms</title>
		<author>
			<persName><forename type="first">J</forename><surname>Täubrich</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Von Hanxleden</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="s">Lecture Notes in Computer Science</title>
		<editor>
			<persName><forename type="first">Computer</forename><surname>Safety</surname></persName>
		</editor>
		<editor>
			<persName><surname>Reliability</surname></persName>
		</editor>
		<editor>
			<persName><forename type="first">(</forename><forename type="middle">F</forename><surname>Security</surname></persName>
		</editor>
		<editor>
			<persName><forename type="first">N</forename><surname>Saglietti</surname></persName>
		</editor>
		<editor>
			<persName><surname>Oster</surname></persName>
		</editor>
		<imprint>
			<biblScope unit="page" from="436" to="450" />
			<date type="published" when="2007">2007</date>
			<publisher>Springer</publisher>
			<pubPlace>Berlin, Heidelberg</pubPlace>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b25">
	<analytic>
		<title level="a" type="main">Challenges and Limitations of IEEE 802.1CB-2017</title>
		<author>
			<persName><forename type="first">R</forename><surname>Hofmann</surname></persName>
		</author>
		<author>
			<persName><forename type="first">B</forename><surname>Nikolić</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Ernst</surname></persName>
		</author>
		<idno type="DOI">10.1109/LES.2019.2960744</idno>
		<ptr target="https://doi.org/10.1109/LES.2019.2960744" />
	</analytic>
	<monogr>
		<title level="j">IEEE Embedded Systems Letters</title>
		<imprint>
			<biblScope unit="volume">12</biblScope>
			<biblScope unit="page" from="105" to="108" />
			<date type="published" when="2020-12">Dec. 2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b26">
	<analytic>
		<title level="a" type="main">TSimNet: An Industrial Time Sensitive Networking Simulation Framework Based on OMNeT++</title>
		<author>
			<persName><forename type="first">P</forename><surname>Heise</surname></persName>
		</author>
		<author>
			<persName><forename type="first">F</forename><surname>Geyer</surname></persName>
		</author>
		<author>
			<persName><forename type="first">R</forename><surname>Obermaisser</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2016 8th IFIP International Conference on New Technologies, Mobility and Security (NTMS)</title>
		<imprint>
			<date type="published" when="2016-11">Nov. 2016</date>
			<biblScope unit="page" from="1" to="5" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b27">
	<analytic>
		<title level="a" type="main">On Packet Reordering in Time-Sensitive Networks</title>
		<author>
			<persName><forename type="first">E</forename><surname>Mohammadpour</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-Y. Le</forename><surname>Boudec</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">IEEE/ACM Transactions on Networking</title>
		<imprint>
			<biblScope unit="page" from="1" to="13" />
			<date type="published" when="2021">2021</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b28">
	<monogr>
		<title level="m" type="main">Deterministic Networking (DetNet): Packet Ordering Function</title>
		<author>
			<persName><forename type="first">B</forename><surname>Varga</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Farkas</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Kehrer</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Heer</surname></persName>
		</author>
		<ptr target="https://datatracker.ietf.org/doc/draft-varga-detnet-pof-02" />
		<imprint>
			<date type="published" when="2021-10">Oct. 2021</date>
		</imprint>
		<respStmt>
			<orgName>Internet Engineering Task Force</orgName>
		</respStmt>
	</monogr>
	<note type="report_type">Internet Draft draftvarga-detnet-pof-02</note>
</biblStruct>

<biblStruct xml:id="b29">
	<analytic>
		<title level="a" type="main">Improved Delay Bound for a Service Curve Element with Known Transmission Rate</title>
		<author>
			<persName><forename type="first">E</forename><surname>Mohammadpour</surname></persName>
		</author>
		<author>
			<persName><forename type="first">E</forename><surname>Stai</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J.-Y. Le</forename><surname>Boudec</surname></persName>
		</author>
		<idno type="DOI">10.1109/LNET.2019.2927143</idno>
		<ptr target="http://doi.org/10.1109/LNET" />
	</analytic>
	<monogr>
		<title level="j">IEEE Networking Letters</title>
		<imprint>
			<biblScope unit="page" from="1" to="1" />
			<date type="published" when="2019">2019. 2019.2927143</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b30">
	<analytic>
		<title level="a" type="main">Latency analysis of multiple classes of avb traffic in tsn with standard credit behavior using network calculus</title>
		<author>
			<persName><forename type="first">L</forename><surname>Zhao</surname></persName>
		</author>
		<author>
			<persName><forename type="first">P</forename><surname>Pop</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Z</forename><surname>Zheng</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Daigmorte</surname></persName>
		</author>
		<author>
			<persName><forename type="first">M</forename><surname>Boyer</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">IEEE Transactions on Industrial Electronics</title>
		<imprint>
			<date type="published" when="2020">2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b31">
	<analytic>
		<title level="a" type="main">Beyond the Accuracy-Complexity Tradeoffs of Compositional Analyses using Network Calculus for Complex Networks</title>
		<author>
			<persName><forename type="first">A</forename><surname>Mifdaoui</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><surname>Leydier</surname></persName>
		</author>
		<ptr target="https://hal.archives-ouvertes.fr/hal-01690096" />
	</analytic>
	<monogr>
		<title level="m">10th International Workshop on Compositional Theory and Technology for Real-Time Embedded Systems (Co-Located with RTSS 2017)</title>
		<meeting><address><addrLine>Paris, France</addrLine></address></meeting>
		<imprint>
			<date type="published" when="2017-12">Dec. 2017</date>
			<biblScope unit="page" from="1" to="8" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b32">
	<analytic>
		<title level="a" type="main">Packet reordering metrics</title>
		<author>
			<persName><forename type="first">A</forename><surname>Morton</surname></persName>
		</author>
		<author>
			<persName><forename type="first">G</forename><surname>Ramachandran</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Shalunov</surname></persName>
		</author>
		<author>
			<persName><forename type="first">L</forename><surname>Ciavattone</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Perser</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">RFC</title>
		<imprint>
			<biblScope unit="volume">4737</biblScope>
			<date type="published" when="2006-11">Nov. 2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b33">
	<monogr>
		<title level="m" type="main">Duality of the Max-Plus and Min-Plus Network Calculus. now</title>
		<author>
			<persName><forename type="first">J</forename><surname>Liebeherr</surname></persName>
		</author>
		<ptr target="https://ieeexplore.ieee.org/document/8187214" />
		<imprint>
			<date type="published" when="2017">2017</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b34">
	<monogr>
		<title level="m" type="main">Early-stage Bottleneck Identification and Removal in TSN Networks</title>
		<author>
			<persName><forename type="first">N</forename><surname>Navet</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><forename type="middle">H</forename><surname>Bengtsson</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Migge</surname></persName>
		</author>
		<ptr target="https://orbilu.uni.lu/handle/10993/46282" />
		<imprint>
			<date type="published" when="2020-02">Feb. 2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b35">
	<analytic>
		<title level="a" type="main">IEEE Standard for Local and Metropolitan Area Networks-Bridges and Bridged Networks -Amendment 34:Asynchronous Traffic Shaping</title>
		<idno type="DOI">10.1109/IEEESTD.2020.9253013</idno>
		<ptr target="https://doi.org/10.1109/IEEESTD.2020.9253013" />
	</analytic>
	<monogr>
		<title level="j">IEEE Std</title>
		<imprint>
			<biblScope unit="volume">802</biblScope>
			<biblScope unit="page" from="1" to="151" />
			<date type="published" when="2018">1Qcc-2018. 1Qcy-2019. 1Qcx-2020. Nov. 2020</date>
		</imprint>
	</monogr>
	<note>IEEE Std</note>
</biblStruct>

				</listBibl>
			</div>
		</back>
	</text>
</TEI>
